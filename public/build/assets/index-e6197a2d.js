import{_ as R}from"./AppTextField-0858edf6.js";import{bm as j,r as g,b5 as z,o as b,f as c,e as a,b as l,v as r,x as I,z as T,a$ as A,ai as p,n as B,d as f,$ as D,j as F}from"./main-2ca02b3b.js";import{u as M}from"./useApi-93131946.js";import{$ as L}from"./api-d97a1aea.js";import{a as d,V as k}from"./VRow-e41a8b34.js";import{V as C}from"./VCard-211b1d9e.js";import{V as O}from"./VDivider-cc04d089.js";import{V as v}from"./VCardText-e7df9280.js";import{V as E}from"./VAlert-97da2a17.js";import{V as G}from"./VForm-7850ca66.js";import{V as J}from"./VAvatar-a7deecfc.js";import"./form-333814a1.js";import"./VTextField-0a864af4.js";/* empty css                   */import"./VCounter-973a6cc1.js";import"./VImg-250183fa.js";import"./VField-b433e507.js";import"./easing-9f15041e.js";import"./VInput-9aa25b78.js";import"./forwardRefs-8348545e.js";import"./index-4e4fc132.js";import"./index-9c720871.js";const H=""+new URL("no-photo-0cdf71ff.png",import.meta.url).href,K={class:"d-flex flex-column justify-center gap-4"},q={class:"d-flex flex-wrap gap-2"},Q={__name:"AccountSettingsAccount",async setup(w){let u,V;const o=j({}),y=g(""),m=g(""),x=g(),{data:i,error:U}=([u,V]=z(()=>M("/schools")),u=await u,V(),u);U.value?console.log(U.value):i.value&&Object.assign(o,i.value.data[0]);const N=()=>{Object.assign(o,i.value.data[0])},P=s=>{const e=new FileReader,{files:n}=s.target;n&&n.length&&(e.readAsDataURL(n[0]),e.onload=()=>{typeof e.result=="string"&&(o.logo=e.result)})},$=()=>{o.logo=i.value.data[0].logo},S=async()=>{try{const s=await L(`/schools/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D("accessToken").value}`},body:JSON.stringify(o)});s&&(m.value=s.status,y.value=s.message)}catch(s){errorMessage.value="An error occurred while updating the profile",console.error(s)}};return(s,e)=>{const n=R;return b(),c(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[l(C,{title:"School Profile Details"},{default:a(()=>[l(O),l(v,null,{default:a(()=>[m.value?(b(),c(E,{key:0,type:m.value,dismissible:"",onClick:e[0]||(e[0]=t=>m.value="")},{default:a(()=>[r(I(y.value),1)]),_:1},8,["type"])):T("",!0)]),_:1}),l(v,null,{default:a(()=>[l(G,{onSubmit:A(S,["prevent"])},{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.name=t),label:"Institution Name"},null,8,["modelValue"])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[l(n,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=t=>o.nickname=t),label:"Initial"},null,8,["modelValue"])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[l(n,{modelValue:o.npsn,"onUpdate:modelValue":e[3]||(e[3]=t=>o.npsn=t),label:"NPSN"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.organization,"onUpdate:modelValue":e[4]||(e[4]=t=>o.organization=t),label:"Organization"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.permit,"onUpdate:modelValue":e[5]||(e[5]=t=>o.permit=t),label:"Permit"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12"},{default:a(()=>[l(n,{modelValue:o.address,"onUpdate:modelValue":e[6]||(e[6]=t=>o.address=t),label:"Address"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.map,"onUpdate:modelValue":e[7]||(e[7]=t=>o.map=t),label:"Location"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.phone,"onUpdate:modelValue":e[8]||(e[8]=t=>o.phone=t),label:"Phone Number"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.email,"onUpdate:modelValue":e[9]||(e[9]=t=>o.email=t),label:"E-mail",type:"email"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.motto,"onUpdate:modelValue":e[10]||(e[10]=t=>o.motto=t),label:"Motto"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.period,"onUpdate:modelValue":e[11]||(e[11]=t=>o.period=t),label:"Period"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.head,"onUpdate:modelValue":e[12]||(e[12]=t=>o.head=t),label:"Head"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.contact,"onUpdate:modelValue":e[13]||(e[13]=t=>o.contact=t),label:"Contact"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(n,{modelValue:o.note,"onUpdate:modelValue":e[14]||(e[14]=t=>o.note=t),label:"Note"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[l(p,{type:"submit"},{default:a(()=>e[16]||(e[16]=[r(" Save changes ")])),_:1}),l(p,{color:"secondary",variant:"tonal",onClick:A(N,["prevent"])},{default:a(()=>e[17]||(e[17]=[r(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:a(()=>[l(C,{title:"Logo"},{default:a(()=>[l(v,{class:"d-flex"},{default:a(()=>[l(J,{image:o.logo||B(H),rounded:"",size:"100",class:"me-6"},null,8,["image"]),f("form",K,[f("div",q,[l(p,{color:"primary",onClick:e[15]||(e[15]=t=>{var _;return(_=x.value)==null?void 0:_.click()})},{default:a(()=>e[18]||(e[18]=[r(" Upload ")])),_:1}),f("input",{ref_key:"refInputEl",ref:x,type:"file",accept:".jpeg,.png,.jpg,.gif",hidden:"",onInput:P},null,544),l(p,{type:"reset",color:"secondary",variant:"tonal",onClick:$},{default:a(()=>e[19]||(e[19]=[r(" Reset ")])),_:1})]),e[20]||(e[20]=f("p",null,"Allowed JPG, GIF or PNG. Max size of 800K",-1))])]),_:1})]),_:1})]),_:1})]),_:1})}}},be={__name:"index",setup(w){return F(),(u,V)=>(b(),c(Q))}};export{be as default};
