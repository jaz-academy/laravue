import{u as H}from"./helpers-2778edbe.js";import{u as K}from"./useApi-765b1997.js";import{_ as ue}from"./ConfirmDialog-307b816e.js";import{_ as Q}from"./AppSelect-1495259f.js";import{_ as W}from"./AppTextField-a9d65adc.js";import{r as b,w as X,a6 as F,o as k,c as E,b as e,e as l,n as t,f as N,d as x,aj as A,a1 as $,z as M,a$ as G,v as U,F as ne,b5 as ie,a as te,aV as T,x as D,s as Y,j as de,H as me,i as pe}from"./main-e40851b7.js";import{a as oe}from"./no-profile-4221a4a6.js";import{a as d,V as O}from"./VRow-f8693abc.js";import{V as z}from"./VCard-c8ea4733.js";import{V as B}from"./VCardText-e11304cd.js";import{V as q}from"./VAvatar-43d2e5c8.js";import{V as Z}from"./VForm-4a2fa4d7.js";import{V as L}from"./VDivider-06554ebe.js";import{_ as ce}from"./AppDateTimePicker-0f884082.js";import{a as fe}from"./formatters-f2ec2421.js";import{_ as ve}from"./MoreBtn-ef03266d.js";import{p as Ve}from"./paginationMeta-4ad053a4.js";import{c as be}from"./createUrl-892d2468.js";import{$ as ge}from"./api-e6efa3e7.js";import{V as ye}from"./VSpacer-b30a3d0b.js";import{V as _e}from"./VDataTableServer-2ec513c8.js";import{V as Se}from"./VTooltip-75abf796.js";import{V as xe}from"./VImg-d0687b57.js";import{V as Ue}from"./VChip-f703cea5.js";import{V as he}from"./VPagination-dda64f68.js";import{_ as ke,A as De}from"./AccountSettingsSecurity-618b266d.js";import{a as Pe,V as we}from"./VTabs-57e16723.js";import{V as Ae}from"./VSnackbar-b44ec0f3.js";import{a as R,V as Ne}from"./VWindowItem-7fdd09c3.js";import"./VDialog-de35c450.js";import"./VOverlay-c77512d0.js";import"./easing-9f15041e.js";import"./lazy-924c41e8.js";import"./scopeId-4e41f258.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-13233f06.js";import"./form-c3e0076b.js";import"./VSelect-28fcf519.js";import"./VTextField-bbc7a2fc.js";/* empty css                   */import"./VCounter-f770fb79.js";import"./VField-a2644e25.js";import"./VInput-6eaa5e55.js";import"./VList-deb9c324.js";import"./ssrBoot-282be025.js";import"./VMenu-57cdd853.js";import"./VCheckboxBtn-d41b44e1.js";import"./VSelectionControl-6e4301a8.js";import"./index-9c720871.js";import"./index-8c7cbe3e.js";import"./VDataTable-7ed5e158.js";import"./VTable-edc8740e.js";import"./filter-8773b8ea.js";import"./fetchUserData-e921d954.js";import"./VAlert-ed80c70a.js";import"./VCheckbox-49b0f7b1.js";import"./TwoFactorAuthDialog-c56c2449.js";import"./DialogCloseBtn-3321cf35.js";import"./VSlideGroup-5b85dd7b.js";const Ce={class:"d-flex flex-column justify-center gap-4"},Ie={class:"d-flex flex-wrap gap-2"},Te={__name:"AccountSettingsAccount",props:{student:Object},emits:["userData"],setup(C,{emit:P}){const I=P,{hasRole:h}=H(),r=b(),_=b(null),g=b(),S=b(!1),s=b({});X(()=>C.student,y=>{if(y){const a=JSON.parse(JSON.stringify(y));if(typeof a.skills=="string")try{const i=JSON.parse(a.skills);a.skills=Array.isArray(i)?i:[]}catch{a.skills=a.skills.split(",").map(p=>p.trim())}s.value=a}},{immediate:!0});const n=F(()=>{var a;const y=(a=s.value)==null?void 0:a.image;return y?`/storage/${y}`:oe}),V=()=>{s.value=JSON.parse(JSON.stringify(C.student))},f=y=>{const a=new FileReader,{files:i}=y.target;i&&i.length&&(a.readAsDataURL(i[0]),a.onload=()=>{typeof a.result=="string"&&(n.value=a.result,j())},_.value=i[0])},w=()=>{n.value=oe},c=()=>{var y;(y=r.value)==null||y.validate().then(({valid:a})=>{a&&(console.log("SUBMIT PAYLOAD",s.value),I("userData",{...s.value}))})},j=async()=>{if(!_.value)return;const y=new FormData;y.append("image",_.value),y.append("_method","PUT");try{const a=await K("/user/profile",{method:"POST",body:y}),i=a.data.image,p=a.data.url;n.value=p,s.value.image=i,userData.value.image=i,console.log("Upload success",a)}catch(a){console.error("Upload failed",a)}};return(y,a)=>{const i=W,p=Q,v=ue;return k(),E(ne,null,[e(O,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(z,{title:"Profile Student Details"},{default:l(()=>[t(h)(2).value?(k(),N(B,{key:0,class:"d-flex"},{default:l(()=>[e(q,{rounded:"",size:"100",class:"me-6",image:t(n)},null,8,["image"]),x("div",Ce,[x("div",Ie,[e(A,{color:"primary",onClick:a[0]||(a[0]=o=>{var m;return(m=g.value)==null?void 0:m.click()})},{default:l(()=>[e($,{icon:"tabler-cloud-upload",class:"d-sm-none"}),a[19]||(a[19]=x("span",{class:"d-none d-sm-block"},"Upload new photo",-1))]),_:1}),x("input",{ref_key:"refInputEl",ref:g,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:f},null,544),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:w},{default:l(()=>[a[20]||(a[20]=x("span",{class:"d-none d-sm-block"},"Reset",-1)),e($,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),a[21]||(a[21]=x("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),_:1})):M("",!0),e(Z,{ref_key:"refForm",ref:r,onSubmit:G(c,["prevent"])},{default:l(()=>[e(L,{class:"my-4"}),e(B,{class:"pt-2"},{default:l(()=>[e(O,null,{default:l(()=>[e(d,{md:"4",cols:"12"},{default:l(()=>[e(i,{modelValue:s.value.nis,"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.nis=o),placeholder:"201122",label:"Nomor Induk"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(i,{modelValue:s.value.name,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.name=o),placeholder:"John",label:"Nama Lengkap"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(i,{modelValue:s.value.nickname,"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.nickname=o),placeholder:"Doe",label:"Panggilan"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.birth_place,"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.birth_place=o),label:"Tempat Lahir",placeholder:"Enter your birth place"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.birth_date,"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.birth_date=o),label:"Tanggal Lahir",placeholder:"Select Birth Date"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.ownPhone,"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.ownPhone=o),label:"Nomor Handphone",placeholder:"+62 888 1234 5678"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.address,"onUpdate:modelValue":a[7]||(a[7]=o=>s.value.address=o),label:"Alamat",placeholder:"Jln. Sirot No. 123"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.hamlet,"onUpdate:modelValue":a[8]||(a[8]=o=>s.value.hamlet=o),label:"Desa",placeholder:"Desa Mustaqim"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.village,"onUpdate:modelValue":a[9]||(a[9]=o=>s.value.village=o),label:"Kecamatan",placeholder:"Kelurahan / Kec. Jannah"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.city,"onUpdate:modelValue":a[10]||(a[10]=o=>s.value.city=o),label:"Kota",placeholder:"Kota / Kabupaten Firdaus"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.district,"onUpdate:modelValue":a[11]||(a[11]=o=>s.value.district=o),label:"Provinsi",placeholder:"Prop. Firdaus"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.postal_code,"onUpdate:modelValue":a[12]||(a[12]=o=>s.value.postal_code=o),label:"Kodepos",placeholder:"10001"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{class:"mt-4"}),e(B,{class:"pt-2 mt-6"},{default:l(()=>[e(O,null,{default:l(()=>[e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.hobby,"onUpdate:modelValue":a[13]||(a[13]=o=>s.value.hobby=o),label:"Hobi (selain olahraga)",placeholder:"What do you like to do?"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.sport,"onUpdate:modelValue":a[14]||(a[14]=o=>s.value.sport=o),label:"Olahraga yang disukai",placeholder:"What is your favorite sport?"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:s.value.ambition,"onUpdate:modelValue":a[15]||(a[15]=o=>s.value.ambition=o),label:"Cita-cita",placeholder:"What do you want to be?"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(p,{modelValue:s.value.role,"onUpdate:modelValue":a[16]||(a[16]=o=>s.value.role=o),label:"Peran",items:["Content Creator","Entrepreneur","Influencer","Developer"],placeholder:"Select Role"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"8"},{default:l(()=>[e(p,{modelValue:s.value.skills,"onUpdate:modelValue":a[17]||(a[17]=o=>s.value.skills=o),label:"Keahlian",placeholder:"Select Skills",multiple:"",items:["Design","Editing","Copywriting","Photography","HTML","CSS","JavaScript","React","NodeJS","MongoDB","MySQL","Python"]},null,8,["modelValue"])]),_:1}),t(h)(2).value?(k(),N(d,{key:0,cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>a[22]||(a[22]=[U(" Save changes ")])),_:1}),e(A,{color:"secondary",variant:"tonal",type:"reset",onClick:G(V,["prevent"])},{default:l(()=>a[23]||(a[23]=[U(" Reset ")])),_:1})]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(v,{"is-dialog-visible":S.value,"onUpdate:isDialogVisible":a[18]||(a[18]=o=>S.value=o),"confirmation-question":"Are you sure you want to deactivate your account?","confirm-title":"Deactivated!","confirm-msg":"Your account has been deactivated successfully.","cancel-title":"Cancelled","cancel-msg":"Account Deactivation Cancelled!"},null,8,["is-dialog-visible"])],64)}}},Oe={__name:"AccountSettingsOthers",props:{student:Object},emits:["userData"],setup(C,{emit:P}){const I=P,{hasRoleAndAccess:h}=H(),r=b({}),_=b();X(()=>C.student,s=>{s&&(r.value=JSON.parse(JSON.stringify(s)))},{immediate:!0});const g=()=>{r.value=JSON.parse(JSON.stringify(C.student))},S=()=>{var s;h(3,"Profile")&&((s=_.value)==null||s.validate().then(({valid:n})=>{n&&(console.log("SUBMIT PAYLOAD",r.value),I("userData",{...r.value}))}))};return(s,n)=>{const V=W;return k(),N(Z,{ref_key:"refForm",ref:_,onSubmit:G(S,["prevent"])},{default:l(()=>[e(O,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Registration Data"},{default:l(()=>[e(B,null,{default:l(()=>[n[8]||(n[8]=x("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e(O,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).registered,"onUpdate:modelValue":n[0]||(n[0]=f=>t(r).registered=f),placeholder:"2000",label:"Registered"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).email,"onUpdate:modelValue":n[1]||(n[1]=f=>t(r).email=f),placeholder:"john.doe@example.com",label:"Email"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).instagram,"onUpdate:modelValue":n[2]||(n[2]=f=>t(r).instagram=f),placeholder:"@john.doe",label:"Instagram"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).payment_category,"onUpdate:modelValue":n[3]||(n[3]=f=>t(r).payment_category=f),placeholder:"@john.doe",label:"Payment"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Graduation Data"},{default:l(()=>[e(B,null,{default:l(()=>[n[9]||(n[9]=x("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e(O,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).graduation,"onUpdate:modelValue":n[4]||(n[4]=f=>t(r).graduation=f),placeholder:"2000",label:"Graduated"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).next_school,"onUpdate:modelValue":n[5]||(n[5]=f=>t(r).next_school=f),placeholder:"Oxford University",label:"Next Place"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).next_school_address,"onUpdate:modelValue":n[6]||(n[6]=f=>t(r).next_school_address=f),placeholder:"United Kingdom",label:"Next Place Address"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).note,"onUpdate:modelValue":n[7]||(n[7]=f=>t(r).note=f),placeholder:"-",label:"Note"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(h)(3,"Profile").value?(k(),N(d,{key:0,class:"d-flex flex-wrap gap-4 mt-4",cols:"12"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>n[10]||(n[10]=[U(" Save changes ")])),_:1}),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:g},{default:l(()=>n[11]||(n[11]=[U(" Reset ")])),_:1})]),_:1})):M("",!0)]),_:1},512)}}};const $e={class:"d-flex align-end flex-wrap gap-3"},Fe={class:"invoice-list-search"},Be={class:"invoice-list-status"},Me={class:"mb-0"},je={class:"mb-0"},Je={class:"mb-0"},Re={class:"d-flex align-center"},Le={key:1},Ee={class:"d-flex flex-column"},ze={class:"text-sm text-disabled"},Ke={key:1},Ge={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},He={class:"text-sm text-disabled mb-0"},We={__name:"BillingHistoryTable",async setup(C){let P,I;const h=b(""),r=b(),_=b([]),g=b(10),S=b(1),s=b(),n=b(),V=o=>{var m,J;S.value=o.page,s.value=(m=o.sortBy[0])==null?void 0:m.key,n.value=(J=o.sortBy[0])==null?void 0:J.order},f=[{title:"#ID",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:w,execute:c}=([P,I]=ie(()=>K(be("/apps/invoice",{query:{q:h,status:r,itemsPerPage:g,page:S,sortBy:s,orderBy:n}}))),P=await P,I(),P),j=F(()=>{var o;return(o=w.value)==null?void 0:o.invoices}),y=F(()=>{var o;return(o=w.value)==null?void 0:o.totalInvoices}),a=(o,m)=>o===m?{status:"Unpaid",chip:{color:"error"}}:o===0?{status:"Paid",chip:{color:"success"}}:{status:o,chip:{variant:"text"}},i=o=>o==="Partial Payment"?{variant:"warning",icon:"tabler-circle-half-2"}:o==="Paid"?{variant:"success",icon:"tabler-circle-check"}:o==="Downloaded"?{variant:"info",icon:"tabler-download"}:o==="Draft"?{variant:"secondary",icon:"tabler-device-floppy"}:o==="Sent"?{variant:"primary",icon:"tabler-mail"}:o==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},p=F(()=>o=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:o}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),v=async o=>{await ge(`/apps/invoice/${o}`,{method:"DELETE"}),c()};return(o,m)=>{const J=Q,se=W,ee=te("RouterLink"),le=te("IconBtn"),re=ve;return t(j)?(k(),N(z,{key:0,id:"invoice-list"},{default:l(()=>[e(B,{class:"d-flex align-center flex-wrap gap-3"},{default:l(()=>[e(A,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"},class:"me-3"},{default:l(()=>m[7]||(m[7]=[U(" Create invoice ")])),_:1}),e(J,{modelValue:t(g),"onUpdate:modelValue":m[0]||(m[0]=u=>T(g)?g.value=u:null),items:[5,10,20,25,50],style:{"max-inline-size":"6.25rem"}},null,8,["modelValue"]),e(ye),x("div",$e,[x("div",Fe,[e(se,{modelValue:t(h),"onUpdate:modelValue":m[1]||(m[1]=u=>T(h)?h.value=u:null),placeholder:"Search Invoice",density:"compact",class:"me-3"},null,8,["modelValue"])]),x("div",Be,[e(J,{modelValue:t(r),"onUpdate:modelValue":m[2]||(m[2]=u=>T(r)?r.value=u:null),density:"compact",placeholder:"Select Status",clearable:"","clear-icon":"tabler-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"],style:{"inline-size":"12rem"}},null,8,["modelValue"])])])]),_:1}),e(L),e(t(_e),{modelValue:t(_),"onUpdate:modelValue":m[4]||(m[4]=u=>T(_)?_.value=u:null),"items-per-page":t(g),"onUpdate:itemsPerPage":m[5]||(m[5]=u=>T(g)?g.value=u:null),page:t(S),"onUpdate:page":m[6]||(m[6]=u=>T(S)?S.value=u:null),"show-select":"","items-length":t(y),headers:f,items:t(j),class:"text-no-wrap","onUpdate:options":V},{"column.trending":l(()=>[e($,{size:"22",icon:"tabler-trending-up"})]),"item.id":l(({item:u})=>[e(ee,{to:{name:"apps-invoice-preview-id",params:{id:u.id}}},{default:l(()=>[U(" #"+D(u.id),1)]),_:2},1032,["to"])]),"item.trending":l(({item:u})=>[e(Se,null,{activator:l(({props:ae})=>[e(q,Y({size:30},ae,{color:i(u.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e($,{size:20,icon:i(u.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[x("p",Me,D(u.invoiceStatus),1),x("p",je," Balance: "+D(u.balance),1),x("p",Je," Due date: "+D(u.dueDate),1)]),_:2},1024)]),"item.client":l(({item:u})=>[x("div",Re,[e(q,{size:"38",color:u.avatar.length?void 0:i(u.invoiceStatus).variant,variant:u.avatar.length?void 0:"tonal",class:"me-3"},{default:l(()=>[u.avatar.length?(k(),N(xe,{key:0,src:u.avatar},null,8,["src"])):(k(),E("span",Le,D(("avatarText"in o?o.avatarText:t(fe))(u.client.name)),1))]),_:2},1032,["color","variant"]),x("div",Ee,[e(ee,{class:"font-weight-medium mb-0 text-link",to:{name:"pages-user-profile-tab",params:{tab:"profile"}}},{default:l(()=>[U(D(u.client.name),1)]),_:2},1024),x("span",ze,D(u.client.companyEmail),1)])])]),"item.total":l(({item:u})=>[U(" $"+D(u.total),1)]),"item.date":l(({item:u})=>[U(D(u.issuedDate),1)]),"item.balance":l(({item:u})=>[typeof a(u.balance,u.total).status=="string"?(k(),N(Ue,{key:0,color:a(u.balance,u.total).chip.color,size:"small",label:""},{default:l(()=>[U(D(a(u.balance,u.total).status),1)]),_:2},1032,["color"])):(k(),E("span",Ke,D(Number(a(u.balance,u.total).status)>0?`$${a(u.balance,u.total).status}`:`-$${Math.abs(Number(a(u.balance,u.total).status))}`),1))]),"item.actions":l(({item:u})=>[e(le,{onClick:ae=>v(u.id)},{default:l(()=>[e($,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(le,{to:{name:"apps-invoice-preview-id",params:{id:u.id}}},{default:l(()=>[e($,{icon:"tabler-eye"})]),_:2},1032,["to"]),e(re,{"menu-list":t(p)(u.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:l(()=>[e(L),x("div",Ge,[x("p",He,D(t(Ve)({page:t(S),itemsPerPage:t(g)},t(y))),1),e(he,{modelValue:t(S),"onUpdate:modelValue":m[3]||(m[3]=u=>T(S)?S.value=u:null),length:Math.ceil(t(y)/t(g)),"total-visible":o.$vuetify.display.xs?1:Math.ceil(t(y)/t(g))},{prev:l(u=>[e(A,Y({variant:"tonal",color:"default"},u,{icon:!1}),{default:l(()=>m[8]||(m[8]=[U(" Previous ")])),_:2},1040)]),next:l(u=>[e(A,Y({variant:"tonal",color:"default"},u,{icon:!1}),{default:l(()=>m[9]||(m[9]=[U(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["modelValue","items-per-page","page","items-length","items"]),e(L)]),_:1})):M("",!0)}}};const Ye={__name:"AccountSettingsParents",props:{student:Object},emits:["userData"],setup(C,{emit:P}){const I=P,{hasRole:h}=H(),r=b({}),_=b();X(()=>C.student,s=>{s&&(r.value=JSON.parse(JSON.stringify(s)))},{immediate:!0}),b(),b(!1);const g=()=>{r.value=JSON.parse(JSON.stringify(C.student))},S=()=>{var s;(s=_.value)==null||s.validate().then(({valid:n})=>{n&&(console.log("SUBMIT PAYLOAD",r.value),I("userData",{...r.value}))})};return(s,n)=>{const V=W,f=ce,w=Q;return k(),N(O,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(z,{title:"Parents Data"},{default:l(()=>[e(B,null,{default:l(()=>[e(Z,{ref_key:"refForm",ref:_,onSubmit:G(S,["prevent"])},{default:l(()=>[e(O,null,{default:l(()=>[e(d,{md:"4",cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).father,"onUpdate:modelValue":n[0]||(n[0]=c=>t(r).father=c),placeholder:"John Doe",label:"Father Name"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(f,{modelValue:t(r).father_birth,"onUpdate:modelValue":n[1]||(n[1]=c=>t(r).father_birth=c),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(w,{modelValue:t(r).father_note,"onUpdate:modelValue":n[2]||(n[2]=c=>t(r).father_note=c),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).mother,"onUpdate:modelValue":n[3]||(n[3]=c=>t(r).mother=c),placeholder:"Maemunah",label:"Mother Name"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(f,{modelValue:t(r).mother_birth,"onUpdate:modelValue":n[4]||(n[4]=c=>t(r).mother_birth=c),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(w,{modelValue:t(r).mother_note,"onUpdate:modelValue":n[5]||(n[5]=c=>t(r).mother_note=c),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).phone,"onUpdate:modelValue":n[6]||(n[6]=c=>t(r).phone=c),placeholder:"+62 888 1234 5678",label:"Phone Number"},null,8,["modelValue"])]),_:1}),e(d,{md:"4",cols:"12"},{default:l(()=>[e(V,{modelValue:t(r).job,"onUpdate:modelValue":n[7]||(n[7]=c=>t(r).job=c),placeholder:"Software Engineer",label:"Job Title"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"4"},{default:l(()=>[e(w,{modelValue:t(r).income,"onUpdate:modelValue":n[8]||(n[8]=c=>t(r).income=c),label:"Income",items:["< 5 juta","5 - 10 juta","10 - 20 juta","20 juta >"],placeholder:"Select Income"},null,8,["modelValue"])]),_:1}),t(h)(2).value?(k(),N(d,{key:0,cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>n[9]||(n[9]=[U(" Save changes ")])),_:1}),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:g},{default:l(()=>n[10]||(n[10]=[U(" Reset ")])),_:1})]),_:1})):M("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(We)]),_:1})]),_:1})}}},la={__name:"[tab]",setup(C){const{currentUser:P,hasRoleOrStudent:I}=H(),h=de(),r=F({get:()=>h.params.tab,set:()=>h.params.tab}),_=F(()=>h.params.id),g=b(null),S=b(!1),s=b(null),n=F(()=>{var i;return _.value==((i=P.value)==null?void 0:i.admin_student_id)}),V=b(!1),f=b(""),w=b("primary"),c=(i,p="primary")=>{f.value=i,w.value=p,V.value=!0,setTimeout(()=>{V.value=!1},1e4)};me(async()=>{S.value=!0,s.value=null;try{const i=await K(`/public/student/${_.value}`);g.value=i.data.value.data??null}catch(i){s.value=i,console.error("Failed to fetch student:",i)}finally{S.value=!1}});const y=[{title:"Account",icon:"tabler-users",tab:"account"},{title:"Parents",icon:"tabler-file-text",tab:"parents"},{title:"Others data",icon:"tabler-link",tab:"others"},{title:"Roles",icon:"tabler-bell",tab:"roles"},{title:"Security",icon:"tabler-lock",tab:"security"}],a=async(i,p)=>{var v;if(!I(4,i).value){c("You are not authorized to update this student","error");return}try{const{data:o,response:m}=await K(`/students/${i}`,{method:"PATCH",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Accept:"application/json"}});m.value.ok?c("Data berhasil diperbarui","success"):(c(m.value.statusText||"Gagal memperbarui data","error"),console.error("Update error response:",m.value))}catch(o){console.error("Update student error:",((v=o==null?void 0:o.data)==null?void 0:v.errors)||o),c(o.message||"Gagal memperbarui data","error")}};return(i,p)=>(k(),E("div",null,[e(we,{modelValue:t(r),"onUpdate:modelValue":p[0]||(p[0]=v=>T(r)?r.value=v:null),class:"v-tabs-pill"},{default:l(()=>[(k(),E(ne,null,pe(y,v=>e(Pe,{key:v.icon,value:v.tab,to:{name:"profile-student-id-tab",params:{tab:v.tab}}},{default:l(()=>[e($,{size:"20",start:"",icon:v.icon},null,8,["icon"]),U(" "+D(v.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"]),e(Ae,{modelValue:t(V),"onUpdate:modelValue":p[2]||(p[2]=v=>T(V)?V.value=v:null),location:"center",variant:"tonal",transition:"scale-transition",color:t(w),class:"text-center"},{actions:l(()=>[e(A,{color:t(w),onClick:p[1]||(p[1]=v=>V.value=!1)},{default:l(()=>p[7]||(p[7]=[U(" Close ")])),_:1},8,["color"])]),default:l(()=>[U(D(t(f))+" ",1)]),_:1},8,["modelValue","color"]),e(Ne,{modelValue:t(r),"onUpdate:modelValue":p[6]||(p[6]=v=>T(r)?r.value=v:null),class:"mt-6 disable-tab-transition",touch:!1},{default:l(()=>[e(R,{value:"account"},{default:l(()=>[e(Te,{student:t(g),onUserData:p[3]||(p[3]=v=>a(t(_),v))},null,8,["student"])]),_:1}),e(R,{value:"parents"},{default:l(()=>[e(Ye,{student:t(g),onUserData:p[4]||(p[4]=v=>a(t(_),v))},null,8,["student"])]),_:1}),e(R,{value:"others"},{default:l(()=>[e(Oe,{student:t(g),onUserData:p[5]||(p[5]=v=>a(t(_),v))},null,8,["student"])]),_:1}),e(R,{value:"roles"},{default:l(()=>[t(n)?(k(),N(ke,{key:0})):M("",!0)]),_:1}),e(R,{value:"security"},{default:l(()=>[t(n)?(k(),N(De,{key:0})):M("",!0)]),_:1})]),_:1},8,["modelValue"])]))}};export{la as default};
