import{u as Z,h as ee}from"./helpers-3fbb07dd.js";import{_ as W}from"./AppTextarea-34813e78.js";import{_ as te}from"./AppSelect-abb85e9c.js";import{_ as le}from"./AppDateTimePicker-35245e05.js";import{_ as Q}from"./AppTextField-f3519212.js";import{_ as G}from"./AppDrawerHeaderSection-e34454a8.js";import{r as v,o as k,f as C,e as o,b as e,a$ as J,n as a,aU as V,ai as I,v as f,d as t,a0 as F,j as oe,a5 as z,b5 as E,c as O,z as U,I as q,x as r,F as L,i as ae}from"./main-7487d517.js";import{P as K}from"./vue3-perfect-scrollbar.esm-4deba7f4.js";import{V as P}from"./VCard-a39876b1.js";import{V as S}from"./VCardText-5f738b43.js";import{V as X}from"./VForm-601bdd25.js";import{V as B}from"./VRow-9d945ad9.js";import{V as b}from"./VCol-fe7d94c6.js";import{V as Y}from"./VNavigationDrawer-4f23dace.js";import{V as ne}from"./VChip-2f95e3fb.js";import{V as se}from"./VNodeRenderer-4c0717a1.js";import{u as H}from"./useApi-2f2d676b.js";import{V as N}from"./VDivider-6be2b96b.js";import{V as ie}from"./VTable-2039da19.js";import"./no-profile-4221a4a6.js";import"./form-ae5f14e6.js";/* empty css                   */import"./VCounter-295b60c2.js";import"./VImg-07fecb91.js";import"./VField-66cd25e5.js";import"./easing-9f15041e.js";import"./VInput-d4c18c39.js";import"./forwardRefs-8348545e.js";import"./VSelect-ce1bc86e.js";import"./VTextField-1ea2f494.js";import"./VList-1bc1b4f4.js";import"./ssrBoot-6d306988.js";import"./VAvatar-6d04c863.js";import"./dialog-transition-30fb99f7.js";import"./VMenu-64e26677.js";import"./VOverlay-f41b538e.js";import"./lazy-d84728e0.js";import"./scopeId-a8e59773.js";import"./VCheckboxBtn-fe4983bb.js";import"./VSelectionControl-643c6274.js";import"./VSpacer-c1896b0d.js";const re={__name:"InvoiceAddPaymentDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","submit"],setup(T,{emit:_}){const A=T,g=_,y=v(),p=v(),c=v(""),m=v(),d=v(""),w=()=>{g("update:isDrawerOpen",!1),g("submit",{invoiceBalance:y.value,paymentAmount:p.value,paymentDate:c.value,paymentMethod:m.value,paymentNote:d.value})},D=n=>{g("update:isDrawerOpen",n)};return(n,s)=>{const $=G,h=Q,l=le,i=te,x=W;return k(),C(Y,{temporary:"",location:"end",width:400,"model-value":A.isDrawerOpen,class:"scrollable-content","onUpdate:modelValue":D},{default:o(()=>[e($,{title:"Add Payment",onCancel:s[0]||(s[0]=u=>n.$emit("update:isDrawerOpen",!1))}),e(a(K),{options:{wheelPropagation:!1}},{default:o(()=>[e(P,{flat:""},{default:o(()=>[e(S,null,{default:o(()=>[e(X,{onSubmit:J(w,["prevent"])},{default:o(()=>[e(B,null,{default:o(()=>[e(b,{cols:"12"},{default:o(()=>[e(h,{modelValue:a(y),"onUpdate:modelValue":s[1]||(s[1]=u=>V(y)?y.value=u:null),label:"Invoice Balance",type:"number",placeholder:"$99"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(h,{modelValue:a(p),"onUpdate:modelValue":s[2]||(s[2]=u=>V(p)?p.value=u:null),label:"Payment Amount",type:"number",placeholder:"$99"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(l,{modelValue:a(c),"onUpdate:modelValue":s[3]||(s[3]=u=>V(c)?c.value=u:null),label:"Payment Date",placeholder:"Select Date"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(i,{modelValue:a(m),"onUpdate:modelValue":s[4]||(s[4]=u=>V(m)?m.value=u:null),label:"Select Payment Method",placeholder:"Select Payment Method",items:["Cash","Bank Transfer","Debit","Credit","PayPal"]},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(x,{modelValue:a(d),"onUpdate:modelValue":s[5]||(s[5]=u=>V(d)?d.value=u:null),label:"Internal Payment Note",placeholder:"Internal Payment Note"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(I,{type:"submit",class:"me-3"},{default:o(()=>s[7]||(s[7]=[f(" Send ")])),_:1}),e(I,{type:"reset",color:"secondary",variant:"tonal",onClick:s[6]||(s[6]=u=>n.$emit("update:isDrawerOpen",!1))},{default:o(()=>s[8]||(s[8]=[f(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},de={class:"mb-6"},me={__name:"InvoiceSendInvoiceDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","submit"],setup(T,{emit:_}){const A=T,g=_,y=v("shelbyComapny@email.com"),p=v("qConsolidated@email.com"),c=v("Invoice of purchased Admin Templates"),m=v(`Dear Queen Consolidated,

Thank you for your business, always a pleasure to work with you!

We have generated a new invoice in the amount of $95.59

We would appreciate payment of this invoice by 05/11/2019`),d=()=>{g("update:isDrawerOpen",!1),g("submit",{emailFrom:y.value,emailTo:p.value,invoiceSubject:c.value,paymentMessage:m.value})},w=D=>{g("update:isDrawerOpen",D)};return(D,n)=>{const s=G,$=Q,h=W;return k(),C(Y,{temporary:"",location:"end",width:400,"model-value":A.isDrawerOpen,class:"scrollable-content","onUpdate:modelValue":w},{default:o(()=>[e(s,{title:"Send Invoice",onCancel:n[0]||(n[0]=l=>D.$emit("update:isDrawerOpen",!1))}),e(a(K),{options:{wheelPropagation:!1}},{default:o(()=>[e(P,{flat:""},{default:o(()=>[e(S,null,{default:o(()=>[e(X,{onSubmit:J(d,["prevent"])},{default:o(()=>[e(B,null,{default:o(()=>[e(b,{cols:"12"},{default:o(()=>[e($,{modelValue:a(y),"onUpdate:modelValue":n[1]||(n[1]=l=>V(y)?y.value=l:null),label:"From",placeholder:"sender@email.com"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e($,{modelValue:a(p),"onUpdate:modelValue":n[2]||(n[2]=l=>V(p)?p.value=l:null),label:"To",placeholder:"receiver@email.com"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e($,{modelValue:a(c),"onUpdate:modelValue":n[3]||(n[3]=l=>V(c)?c.value=l:null),label:"Subject",placeholder:"Invoice of purchased Admin Templates"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[e(h,{modelValue:a(m),"onUpdate:modelValue":n[4]||(n[4]=l=>V(m)?m.value=l:null),rows:"10",label:"Message",placeholder:"Thank you for your business, always a pleasure to work with you!"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:o(()=>[t("div",de,[e(ne,{label:"",color:"primary",size:"small"},{default:o(()=>[e(F,{start:"",icon:"tabler-link"}),n[6]||(n[6]=f(" Invoice Attached "))]),_:1})]),e(I,{type:"submit",class:"me-3"},{default:o(()=>n[7]||(n[7]=[f(" Send ")])),_:1}),e(I,{color:"secondary",variant:"tonal",onClick:n[5]||(n[5]=l=>D.$emit("update:isDrawerOpen",!1))},{default:o(()=>n[8]||(n[8]=[f(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const ue={key:0},pe={class:"ma-sm-4"},ce={class:"d-flex align-center mb-6"},fe={class:"font-weight-bold text-capitalize text-h4"},be={class:"mb-0"},ve={class:"my-2"},_e={class:"mb-0"},ye={class:"mt-4 ma-sm-4"},we={class:"font-weight-medium text-h5"},Ve={class:"mt-4 ma-sm-4"},De={class:"pb-1"},xe={class:"font-weight-medium"},ge={class:"pb-1"},ke={class:"pb-1"},Ae={class:"pb-1"},Se={class:"text-no-wrap"},Ie={class:"text-no-wrap"},$e={class:"text-end"},he={class:"my-2 mx-sm-4 text-base"},Ce={class:"d-flex align-center mb-1"},Pe={class:"my-2 mx-sm-4"},Te={class:"text-end"},Oe={class:"font-weight-medium text-high-emphasis"},Ne={class:"mb-0"},Ue={class:"d-flex mx-sm-4"},gt={__name:"[id]",async setup(T){let _,A;const{hasRoleAndAccess:g}=Z(),y=oe(),p=z(()=>y.params.id),c=v(!1),m=v(!1),d=v([]),w=v([]),{data:D}=([_,A]=E(()=>H(`/finances-by-invoice/${p.value}`)),_=await _,A(),_),{data:n}=([_,A]=E(()=>H("/schools")),_=await _,A(),_);//! Console Log to check the raw data from the API
console.log("Raw invoiceData from API:",D.value),d.value=D.value.data,w.value=n.value;const s=z(()=>d.value.reduce((h,l)=>h+(Number(l.amount)||0),0)),$=()=>{window.print()};return(h,l)=>a(D)?(k(),O("section",ue,[e(B,null,{default:o(()=>[e(b,{cols:"12",md:"9"},{default:o(()=>[a(p)!=="new"?(k(),C(P,{key:0},{default:o(()=>[e(S,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:o(()=>{var i,x;return[t("div",pe,[t("div",ce,[e(a(se),{nodes:a(q).app.logo,class:"me-3"},null,8,["nodes"]),t("h6",fe,r(a(q).app.title),1)]),(x=(i=a(w))==null?void 0:i.data)!=null&&x.length?(k(),O(L,{key:0},[t("p",be,[f(r(a(w).data[0].name)+" âœª ",1),t("strong",null,r(a(w).data[0].organization),1)]),t("p",ve,r(a(w).data[0].address),1),t("p",_e,[e(F,{icon:"tabler-phone",class:"me-2"}),f(" "+r(a(w).data[0].phone)+" ",1),e(F,{icon:"tabler-mail",class:"mx-2"}),f(" "+r(a(w).data[0].email),1)])],64)):U("",!0)]),t("div",ye,[t("h6",we," Invoice #"+r(a(p)),1)])]}),_:1}),e(N),e(S,{class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row print-row"},{default:o(()=>{var i,x,u,M,R,j;return[l[8]||(l[8]=t("div",{class:"ma-sm-4"},null,-1)),t("div",Ve,[l[7]||(l[7]=t("h6",{class:"text-h6 font-weight-medium mb-6"}," Invoice Details: ",-1)),t("table",null,[t("tbody",null,[t("tr",null,[l[3]||(l[3]=t("td",{class:"pe-6 pb-1"}," Date: ",-1)),t("td",De,[t("span",xe,r(a(ee)((i=a(d)[0])==null?void 0:i.date)),1)])]),t("tr",null,[l[4]||(l[4]=t("td",{class:"pe-6 pb-1"}," Vendor: ",-1)),t("td",ge,r((x=a(d)[0])==null?void 0:x.vendor),1)]),t("tr",null,[l[5]||(l[5]=t("td",{class:"pe-6 pb-1"}," Account: ",-1)),t("td",ke,r((M=(u=a(d)[0])==null?void 0:u.finance_account)==null?void 0:M.number),1)]),t("tr",null,[l[6]||(l[6]=t("td",{class:"pe-6 pb-1"}," Remark: ",-1)),t("td",Ae,r((j=(R=a(d)[0])==null?void 0:R.finance_account)==null?void 0:j.description),1)])])])])]}),_:1}),e(N),e(ie,{class:"invoice-preview-table"},{default:o(()=>[l[11]||(l[11]=t("thead",null,[t("tr",null,[t("th",{class:"d-none d-md-table-cell"}),t("th",{scope:"col"}," NO "),t("th",{scope:"col"}," DESCRIPTION "),t("th",{scope:"col",class:"text-end"}," AMOUNT "),t("th",{class:"d-none d-md-table-cell"})])],-1)),t("tbody",null,[(k(!0),O(L,null,ae(a(d),(i,x)=>(k(),O("tr",{key:x},[l[9]||(l[9]=t("td",{class:"d-none d-md-table-cell"},null,-1)),t("td",Se,r(x+1),1),t("td",Ie,r(i.description),1),t("td",$e,r(Number(i.amount).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0})),1),l[10]||(l[10]=t("td",{class:"d-none d-md-table-cell"},null,-1))]))),128))])]),_:1}),e(N,{class:"mb-2"}),e(S,{class:"d-flex justify-space-between flex-column flex-sm-row print-row"},{default:o(()=>{var i;return[t("div",he,[t("div",Ce,[l[12]||(l[12]=t("h6",{class:"text-base font-weight-medium me-1"}," Admin: ",-1)),t("span",null,r((i=a(d)[0])==null?void 0:i.admin),1)]),l[13]||(l[13]=t("p",null,"Thanks for your business",-1))]),t("div",Pe,[t("table",null,[t("tbody",null,[t("tr",Te,[l[14]||(l[14]=t("td",{class:"text-end"},[t("div",{class:"me-5"},[t("p",{class:"mb-0"}," Total: ")])],-1)),t("td",Oe,[t("p",Ne,r(Number(a(s)).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0})),1)])])])])])]}),_:1}),e(N),e(S,null,{default:o(()=>{var i;return[t("div",Ue,[l[15]||(l[15]=t("h6",{class:"text-base font-weight-medium me-1"}," Note: ",-1)),t("span",null,r((i=a(d)[0])==null?void 0:i.remark),1)])]}),_:1})]),_:1})):(k(),C(P,{key:1},{default:o(()=>[e(S,null,{default:o(()=>l[16]||(l[16]=[f(" Select the invoice you want to preview. ")])),_:1})]),_:1}))]),_:1}),e(b,{cols:"12",md:"3",class:"d-print-none"},{default:o(()=>[e(P,null,{default:o(()=>[e(S,null,{default:o(()=>[e(I,{block:"","prepend-icon":"tabler-send",class:"mb-2 d-none",onClick:l[0]||(l[0]=i=>m.value=!0)},{default:o(()=>l[17]||(l[17]=[f(" Send Invoice ")])),_:1}),e(I,{block:"",class:"mb-2",onClick:$},{default:o(()=>l[18]||(l[18]=[f(" Print ")])),_:1}),a(g)(3,"Finance").value?(k(),C(I,{key:0,block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"financial-finance-edit-id",params:{id:a(y).params.id}}},{default:o(()=>l[19]||(l[19]=[f(" Edit Invoice ")])),_:1},8,["to"])):U("",!0),e(I,{block:"",color:"secondary",variant:"tonal",to:{name:"financial-finance"}},{default:o(()=>l[20]||(l[20]=[f(" Exit ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(re,{"is-drawer-open":a(c),"onUpdate:isDrawerOpen":l[1]||(l[1]=i=>V(c)?c.value=i:null)},null,8,["is-drawer-open"]),e(me,{"is-drawer-open":a(m),"onUpdate:isDrawerOpen":l[2]||(l[2]=i=>V(m)?m.value=i:null)},null,8,["is-drawer-open"])])):U("",!0)}};export{gt as default};
