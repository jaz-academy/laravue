import{h as B,f as te}from"./helpers-dc843671.js";import{f as q,m as v,a as O}from"./fetchMemberData-e1ef8cc3.js";import{a as I}from"./no-profile-4221a4a6.js";import{H as R,n as d,o as _,f,e as s,b as t,eX as se,d as e,x as l,a0 as p,z as A,c as y,F as z,v as j,i as S,$ as ae,eY as le,aZ as ne,a5 as X,w as ie,ai as oe,j as re,aU as W}from"./main-dd895efc.js";import{V as U}from"./VImg-0d845f43.js";import{V as $}from"./VCardText-8cb57704.js";import{V as b}from"./VAvatar-c43efe20.js";import{V as T,a as F,b as E}from"./VCard-521d2f55.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{V as L,a as G,b as g}from"./VList-681543a0.js";import{_ as H}from"./MoreBtn-78fe9f54.js";import{V as de,a as ce}from"./VTimelineItem-cd9966fd.js";import{V as k}from"./VCol-5badd7d4.js";import{V as D}from"./VRow-401a9eed.js";import{f as J,e as me,a as C}from"./fetchProjectData-4338ea06.js";import{V as ue}from"./VDivider-3f5c8926.js";import{V as _e}from"./VChip-a60314c8.js";import{V as pe}from"./VTooltip-4321d03a.js";import{c as Y}from"./formatters-cd0b9b17.js";import{f as fe,s as P}from"./fetchStudentData-90e9ceb1.js";import{V as ge}from"./VRating-e567b7ac.js";import{a as ve,V as xe}from"./VTabs-c2528729.js";import{a as N,V as he}from"./VWindowItem-20571730.js";import"./useApi-d559f13e.js";import"./ssrBoot-fbb1ff66.js";import"./VMenu-6c524ca6.js";import"./VOverlay-e33c0891.js";import"./easing-9f15041e.js";import"./lazy-f6e07bc3.js";import"./scopeId-e894abda.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-d429094b.js";import"./VSlideGroup-7a872b07.js";const be={class:"d-flex h-0"},ye={class:"user-profile-info w-100 mt-16 pt-6 pt-sm-0 mt-sm-0"},$e={class:"text-h5 text-center text-sm-start font-weight-medium mb-3"},we={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},Ve={class:"d-flex flex-wrap justify-center justify-sm-start flex-grow-1 gap-4"},je={class:"d-flex"},ze={class:"text-body-1"},Te={class:"d-flex"},ke={class:"text-body-1"},Se={class:"d-flex"},Ae={class:"text-body-1"},Ce={__name:"UserProfileHeader",setup(w){return R(()=>{q()}),(m,u)=>d(v)?(_(),f(T,{key:0},{default:s(()=>[t(U,{src:d(se),"min-height":"125","max-height":"250",cover:""},null,8,["src"]),t($,{class:"d-flex align-bottom flex-sm-row flex-column justify-center gap-x-5"},{default:s(()=>{var a,i,r,n,o,c;return[e("div",be,[(a=d(v))!=null&&a.image?(_(),f(b,{key:0,rounded:"",size:"120",image:`/storage/${d(v).image}`,class:"user-profile-avatar mx-auto"},null,8,["image"])):(_(),f(b,{key:1,rounded:"",size:"120",image:d(I),class:"user-profile-avatar mx-auto"},null,8,["image"]))]),e("div",ye,[e("h5",$e,l((i=d(v))==null?void 0:i.name),1),e("div",we,[e("div",Ve,[e("span",je,[t(p,{size:"20",icon:"tabler-color-swatch",class:"me-1"}),e("span",ze,l(((r=d(v))==null?void 0:r.role)||((n=d(v))==null?void 0:n.note)),1)]),e("span",Te,[t(p,{size:"20",icon:"tabler-map-pin",class:"me-1"}),e("span",ke,l((o=d(v))==null?void 0:o.city),1)]),e("span",Se,[t(p,{size:"20",icon:"tabler-calendar",class:"me-1"}),e("span",Ae,l(d(B)((c=d(v))==null?void 0:c.birth_date)),1)])])])])]}),_:1})]),_:1})):A("",!0)}};const De={class:"d-flex align-items-center mt-4"},Be={class:"d-flex align-items-center mt-4"},Ie={class:"d-flex align-items-center mt-4"},Re={class:"d-flex align-items-center mt-4"},Me={class:"d-flex align-items-center mt-4"},Le={class:"d-flex align-items-center mt-4"},Pe={class:"d-flex align-items-center mt-4"},Ne={class:"d-flex align-items-center mt-4"},Ue={class:"d-flex align-items-center mt-4"},Fe={class:"d-flex align-items-center mt-4"},Ee={class:"d-flex align-items-center mt-4"},He={class:"d-flex align-items-center mt-4"},Oe={__name:"About",props:{data:{type:null,required:!0}},setup(w){const m=w;return(u,a)=>(_(),y(z,null,[t(T,{class:"mb-4"},{default:s(()=>[t($,null,{default:s(()=>[a[9]||(a[9]=e("p",{class:"text-xs"}," ABOUT ",-1)),t(L,{class:"card-list text-medium-emphasis"},{default:s(()=>[t(G,null,{default:s(()=>[e("div",De,[t(p,{size:"20",class:"me-2",icon:"tabler-user"}),t(g,null,{default:s(()=>[a[0]||(a[0]=e("span",{class:"font-weight-medium me-1"},"Name:",-1)),e("span",null,l(m.data.name),1)]),_:1})]),e("div",Be,[t(p,{size:"20",class:"me-2",icon:"tabler-check"}),t(g,null,{default:s(()=>[a[1]||(a[1]=e("span",{class:"font-weight-medium me-1"},"Status:",-1)),e("span",null,l(m.data.registered?"Active":"Suspend"),1)]),_:1})]),e("div",Ie,[t(p,{size:"20",class:"me-2",icon:"tabler-crown"}),t(g,null,{default:s(()=>[a[2]||(a[2]=e("span",{class:"font-weight-medium me-1"},"Gender:",-1)),e("span",null,l(m.data.gender),1)]),_:1})]),e("div",Re,[t(p,{size:"20",class:"me-2",icon:"tabler-calendar"}),t(g,null,{default:s(()=>[a[3]||(a[3]=e("span",{class:"font-weight-medium me-1"},"Birth:",-1)),e("span",null,l(d(B)(m.data.birth_date)),1)]),_:1})]),e("div",Me,[t(p,{size:"20",class:"me-2",icon:"tabler-location"}),t(g,null,{default:s(()=>[a[4]||(a[4]=e("span",{class:"font-weight-medium me-1"},"Place:",-1)),e("span",null,l(m.data.birth_place),1)]),_:1})]),e("div",Le,[t(p,{size:"20",class:"me-2",icon:"tabler-flag"}),t(g,null,{default:s(()=>a[5]||(a[5]=[e("span",{class:"font-weight-medium me-1"},"Language:",-1),e("span",null,"Indonesia",-1)])),_:1})])]),_:1})]),_:1}),a[10]||(a[10]=e("p",{class:"text-xs mt-8"}," CONTACTS ",-1)),t(L,{class:"card-list text-medium-emphasis"},{default:s(()=>[t(G,null,{default:s(()=>[e("div",Pe,[t(p,{size:"20",class:"me-2",icon:"tabler-phone"}),t(g,null,{default:s(()=>[a[6]||(a[6]=e("span",{class:"font-weight-medium me-1"},"Phone:",-1)),e("span",null,l(m.data.own_phone||m.data.phone),1)]),_:1})]),e("div",Ne,[t(p,{size:"20",class:"me-2",icon:"tabler-mail"}),t(g,null,{default:s(()=>[a[7]||(a[7]=e("span",{class:"font-weight-medium me-1"},"Email:",-1)),e("span",null,l(m.data.email),1)]),_:1})]),e("div",Ue,[t(p,{size:"20",class:"me-2",icon:"tabler-brand-instagram"}),t(g,null,{default:s(()=>[a[8]||(a[8]=e("span",{class:"font-weight-medium me-1"},"Instagram:",-1)),e("span",null,l(m.data.instagram),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),t(T,null,{default:s(()=>[t($,null,{default:s(()=>[a[14]||(a[14]=e("p",{class:"text-xs"}," OVERVIEW ",-1)),t(L,{class:"card-list text-medium-emphasis"},{default:s(()=>[e("div",Fe,[t(p,{size:"20",class:"me-2",icon:"tabler-device-gamepad-2"}),t(g,null,{default:s(()=>[a[11]||(a[11]=e("span",{class:"font-weight-medium me-1"},"Hobby:",-1)),e("span",null,l(m.data.hobby),1)]),_:1})]),e("div",Ee,[t(p,{size:"20",class:"me-2",icon:"tabler-swimming"}),t(g,null,{default:s(()=>[a[12]||(a[12]=e("span",{class:"font-weight-medium me-1"},"Sport:",-1)),e("span",null,l(m.data.sport),1)]),_:1})]),e("div",He,[t(p,{size:"20",class:"me-2",icon:"tabler-target-arrow"}),t(g,null,{default:s(()=>[a[13]||(a[13]=e("span",{class:"font-weight-medium me-1"},"Goal:",-1)),e("span",null,l(m.data.ambition),1)]),_:1})])]),_:1})]),_:1})]),_:1})],64))}},We=Z(Oe,[["__scopeId","data-v-13c1378b"]]);const Ge={class:"d-flex justify-space-between align-center flex-wrap"},Ye={class:"app-timeline-title"},qe={class:"app-timeline-meta"},Xe={class:"d-flex justify-space-between align-center flex-wrap"},Ze={class:"app-timeline-text mb-2"},Je=["href"],Ke={key:0,class:"d-flex align-center mt-3"},Qe={class:"text-sm font-weight-medium mb-1"},et={class:"app-timeline-meta"},tt={__name:"ActivityTimeline",setup(w){return console.log(O),(m,u)=>{const a=H;return _(),f(T,null,{default:s(()=>[t(F,null,{prepend:s(()=>[t(p,{icon:"tabler-timeline"})]),append:s(()=>[e("div",null,[t(a,{"menu-list":[{title:"Share timeline",value:"Share timeline"},{title:"Suggest edits",value:"Suggest edits"},{title:"Report bug",value:"Report bug"}]})])]),default:s(()=>[t(E,null,{default:s(()=>u[0]||(u[0]=[j("Activity Timeline")])),_:1})]),_:1}),t($,{class:"scrollable-card"},{default:s(()=>[t(de,{density:"compact",align:"start","truncate-line":"both",class:"v-timeline-density-compact"},{default:s(()=>[(_(!0),y(z,null,S(d(O),i=>(_(),f(ce,{key:i.id,"dot-color":i.rate>0?"primary":"secondary",size:"x-small"},{default:s(()=>{var r,n,o;return[e("div",Ge,[e("span",Ye,l(i.name),1),e("span",qe,l(d(B)(i.date)),1)]),e("div",Xe,[e("span",Ze,l((r=i.project_plan)==null?void 0:r.subject)+" - "+l(i==null?void 0:i.media)+" - "+l((n=i.project_plan)==null?void 0:n.theme),1),e("a",{href:`/?search=${i.id}`,class:"app-timeline-text"},l(i.id),9,Je)]),i.rate>0?(_(),y("div",Ke,[t(b,{size:"38",class:"me-3",image:d(I)},null,8,["image"]),e("div",null,[e("h6",Qe,l((o=i.admin_teacher)==null?void 0:o.name),1),e("p",et,l(i==null?void 0:i.review),1)])])):A("",!0)]}),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1})]),_:1})}}},st=Z(tt,[["__scopeId","data-v-ff80cc09"]]),at={__name:"index",setup(w){return R(()=>{q(),console.log("member: ",v)}),(m,u)=>d(v)?(_(),f(D,{key:0},{default:s(()=>[t(k,{md:"4",cols:"12"},{default:s(()=>[t(We,{data:d(v)},null,8,["data"])]),_:1}),t(k,{cols:"12",md:"8"},{default:s(()=>[t(D,null,{default:s(()=>[t(k,{cols:"12"},{default:s(()=>[t(st)]),_:1})]),_:1})]),_:1})]),_:1})):A("",!0)}},lt={class:"mb-0"},nt={class:"mt-n8 me-n3"},it={class:"mt-4 mb-0 clamp-text"},ot={class:"d-flex align-center justify-space-between flex-wrap gap-2"},rt={class:"text-base font-weight-medium"},dt={class:"text-body-1"},ct={class:"d-flex align-center justify-space-between flex-wrap text-sm mt-4 mb-2"},mt={class:"d-flex align-center justify-space-between flex-wrap gap-2 mt-3"},ut={class:"d-flex align-center"},_t={class:"v-avatar-group me-2"},pt={class:"text-xs"},ft={__name:"index",setup(w){const m=ae("userData");R(()=>{J()});function u(r){const n=new Map;return r.forEach(o=>{o.students.forEach(c=>{n.has(c.id)||n.set(c.id,c)})}),Array.from(n.values())}function a(r,n){return r.some(o=>o.students.some(c=>c.id===n))}const i=[{title:"View Details",value:"View Details"},{title:"Add to favorites",value:"Add to favorites"},{type:"divider",class:"my-2"},{title:"Leave Project",value:"Leave Project",class:"text-error"}];return(r,n)=>{const o=H;return _(),f(D,null,{default:s(()=>[(_(!0),y(z,null,S(d(me).filter(c=>new Date(c.end_date)>=new Date),c=>(_(),f(k,{key:c.id,cols:"12",sm:"6",lg:"4"},{default:s(()=>[t(T,null,{default:s(()=>[t(F,null,{prepend:s(()=>[t(b,{image:d(le)},null,8,["image"])]),append:s(()=>[e("div",nt,[t(o,{"item-props":"","menu-list":i})])]),default:s(()=>[t(E,null,{default:s(()=>[j(l(c.theme),1)]),_:2},1024),e("p",lt,[n[0]||(n[0]=e("span",{class:"font-weight-medium me-1"},"Subject:",-1)),e("span",null,l(c.subject),1)])]),_:2},1024),t($,null,{default:s(()=>[e("p",it,l(c.description),1)]),_:2},1024),t(ue),t($,null,{default:s(()=>[e("div",ot,[e("h6",rt,[n[1]||(n[1]=j(" Deadline: ")),e("span",dt,l(d(B)(c.end_date,"ddd d MMM yyyy")),1)]),t(_e,{label:"",color:a(c.project_task,d(m).admin_student_id??0)?"success":"error",size:"small"},{default:s(()=>[j(l(a(c.project_task,d(m).admin_student_id??0)?"I'm done":"Not doing Yet"),1)]),_:2},1032,["color"])]),e("div",ct,[n[2]||(n[2]=e("span",null,"All member doing",-1)),e("span",null,l(Math.round(u(c.project_task).length/20*100))+"%",1)]),t(ne,{rounded:"","rounded-bar":"",height:"8","model-value":u(c.project_task).length,max:20,color:"primary"},null,8,["model-value"]),e("div",mt,[e("div",ut,[e("div",_t,[(_(!0),y(z,null,S(u(c.project_task).slice(0,10),h=>(_(),f(b,{key:h.id,color:"info",size:32},{default:s(()=>[h.image?(_(),f(U,{key:0,src:`/storage/${h.image}`,cover:""},null,8,["src"])):(_(),f(U,{key:1,src:d(I)},null,8,["src"])),t(pe,{location:"top",activator:"parent"},{default:s(()=>[j(l(h.nickname),1)]),_:2},1024)]),_:2},1024))),128)),u(c.project_task).length>10?(_(),f(b,{key:0,color:"secondary",size:"32"},{default:s(()=>[e("span",pt,"+"+l(u(c.project_task).length-10),1)]),_:2},1024)):A("",!0)]),n[3]||(n[3]=e("span",{class:"text-xs"},null,-1))])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}};const gt={class:"vertical-more"},vt={class:"text-center"},xt={class:"text-h4"},ht={class:"text-h6"},bt={class:"d-flex justify-space-around"},yt={class:"text-center"},$t={class:"text-h4"},wt={class:"text-center"},Vt={class:"text-h4"},jt={class:"text-center"},zt={class:"text-h4"},Tt={class:"d-flex justify-center gap-4 mt-5"},kt={__name:"index",setup(w){R(()=>{fe(),J()});const m=i=>(C.value??[]).filter(r=>(r.students??[]).some(n=>n.id===i)).length,u=i=>{const r=(C.value??[]).filter(x=>(x.students??[]).some(V=>V.id===i)),n=r.reduce((x,V)=>x+(parseFloat(V.rate)||0),0),o=r.length?n/r.length:0,c=r.length,h=(C.value??[]).map(x=>parseFloat(x.rate)||0),K=h.length?h.reduce((x,V)=>x+V,0)/h.length:0,M=(P.value??[]).map(x=>m(x.id)),Q=M.length?Math.round(M.reduce((x,V)=>x+V,0)/M.length):1,ee=te(o,c,K,Q);return{totalRate:n,avgRate:o,n:c,score:ee}},a=X(()=>(P.value??[]).filter(i=>i.graduation===null).slice().sort((i,r)=>u(r.id).score-u(i.id).score));return ie(C,i=>{console.log("All tasks updated:",i)}),(i,r)=>{const n=H;return d(P).length?(_(),f(D,{key:0},{default:s(()=>[(_(!0),y(z,null,S(a.value,o=>(_(),f(k,{key:o.id,sm:"6",md:"4",lg:"3",cols:"12"},{default:s(()=>[t(T,null,{default:s(()=>[e("div",gt,[t(n,{"menu-list":[{title:"Share connection",value:"Share connection"},{title:"Block connection",value:"Block connection"},{type:"divider",class:"my-2"},{title:"Delete",value:"Delete",class:"text-error"}],"item-props":""})]),t(F,null,{default:s(()=>[t(E,{class:"d-flex flex-column align-center justify-center gap-y-5"},{default:s(()=>[o!=null&&o.image?(_(),f(b,{key:0,size:"100",image:`/storage/${o.image}`},null,8,["image"])):(_(),f(b,{key:1,size:"100",image:d(I)},null,8,["image"])),e("div",vt,[e("h4",xt,l(d(Y)(o.name,15,2)),1),e("h6",ht,l(o.role?d(Y)(o.role,20,2):"Content Creator"),1)])]),_:2},1024)]),_:2},1024),t($,{class:"text-center"},{default:s(()=>[t(ge,{"model-value":u(o.id).avgRate,"half-increments":"",readonly:""},null,8,["model-value"])]),_:2},1024),t($,null,{default:s(()=>{var c;return[e("div",bt,[e("div",yt,[e("h4",$t,l(m(o.id)),1),r[0]||(r[0]=e("span",{class:"text-body-1"},"Tasks",-1))]),e("div",wt,[e("h4",Vt,l(u(o.id).totalRate.toFixed(0)),1),r[1]||(r[1]=e("span",{class:"text-body-1"},"Stars",-1))]),e("div",jt,[e("h4",zt,l(u(o.id).avgRate.toFixed(1)),1),r[2]||(r[2]=e("span",{class:"text-body-1"},"Average",-1))])]),e("div",Tt,[t(oe,{"prepend-icon":"tabler-user-check",variant:(((c=d(v))==null?void 0:c.registered)??!1)===((o==null?void 0:o.registered)??!1)?"elevated":"tonal"},{default:s(()=>[j(l(o==null?void 0:o.registered),1)]),_:2},1032,["variant"])])]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):A("",!0)}}},rs={__name:"[tab]",setup(w){const m=re(),u=X({get:()=>m.params.tab,set:()=>m.params.tab}),a=[{title:"Overview",icon:"tabler-user-check",tab:"overview"},{title:"Projects",icon:"tabler-layout-grid",tab:"projects"},{title:"Stars",icon:"tabler-star-filled",tab:"stars"}];return(i,r)=>(_(),y("div",null,[t(Ce,{class:"mb-5"}),t(xe,{modelValue:d(u),"onUpdate:modelValue":r[0]||(r[0]=n=>W(u)?u.value=n:null),class:"v-tabs-pill"},{default:s(()=>[(_(),y(z,null,S(a,n=>t(ve,{key:n.icon,value:n.tab,to:{name:"profile-user-tab",params:{tab:n.tab}}},{default:s(()=>[t(p,{size:"20",start:"",icon:n.icon},null,8,["icon"]),j(" "+l(n.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"]),t(he,{modelValue:d(u),"onUpdate:modelValue":r[1]||(r[1]=n=>W(u)?u.value=n:null),class:"mt-5 disable-tab-transition",touch:!1},{default:s(()=>[t(N,{value:"overview"},{default:s(()=>[t(at)]),_:1}),t(N,{value:"projects"},{default:s(()=>[t(ft)]),_:1}),t(N,{value:"stars"},{default:s(()=>[t(kt)]),_:1})]),_:1},8,["modelValue"])]))}};export{rs as default};
