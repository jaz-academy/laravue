import{p as Ue}from"./formatters-5462a257.js";import{_ as ve}from"./AppTextField-45a4262b.js";import{_ as P}from"./AppSelect-8e74efa2.js";import{u as Se}from"./helpers-ec869078.js";import{f as ke,p as Pe,a as Ie,b as Ae}from"./fetchProjectData-589a1b8d.js";import{r as q}from"./validators-db13bebe.js";import{f as $e,t as Oe}from"./fetchTeacherData-bb09c315.js";import{$ as je,H as ge,r as f,bm as Me,w as de,o as k,f as h,e as s,b as t,n as a,aU as T,a$ as Be,d as v,ai as N,v as b,x as _,aY as qe,a5 as Y,a as ue,c as K,F as te,i as me,z as O,a0 as Z,y as Ne,s as le}from"./main-04a50ca6.js";import{_ as Fe}from"./AppDateTimePicker-e1ffdf2c.js";import{_ as ze}from"./AppTextarea-3ff55005.js";import{_ as Ye}from"./AppDrawerHeaderSection-1f0b638b.js";import{f as Le,s as Re}from"./fetchStudentData-ece356ec.js";import{P as Ee}from"./vue3-perfect-scrollbar.esm-17b1b2c1.js";import{V as L}from"./VDivider-898e64ba.js";import{V as oe}from"./VCard-bf6c9c32.js";import{V as re}from"./VCardText-ed82c887.js";import{V as He}from"./VForm-f22226d7.js";import{V as R,a as g}from"./VRow-318207f7.js";import{V as Ve}from"./VRating-ef3620cd.js";import{V as Ge}from"./VNavigationDrawer-eb9bc52b.js";import{p as We}from"./paginationMeta-4ad053a4.js";import{a as Je}from"./no-profile-4221a4a6.js";import{u as ce}from"./useApi-85aace08.js";import{_ as Qe}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Xe}from"./VAlert-f1933dc3.js";import{V as pe}from"./VChip-d9455d32.js";import{V as ee}from"./VAvatar-8d758b13.js";import{V as Ke}from"./VSpacer-b0aa14ad.js";import{V as Ze}from"./VDataTableServer-f9783b32.js";import{V as fe}from"./VImg-3709ff10.js";import{V as ea}from"./VTooltip-a9ff2c61.js";import{V as aa}from"./VMenu-c0386199.js";import{V as ta,a as se}from"./VList-2f6832d5.js";import{V as la}from"./VPagination-d06631d5.js";import"./form-785e8d25.js";import"./VTextField-f60d0c3c.js";/* empty css                   */import"./VCounter-f243149d.js";import"./VField-ad23595d.js";import"./easing-9f15041e.js";import"./VInput-0bbc3285.js";import"./forwardRefs-8348545e.js";import"./VSelect-3b4d2f0f.js";import"./dialog-transition-4323a963.js";import"./VOverlay-cca682b0.js";import"./lazy-1cca022d.js";import"./scopeId-e3a26ae2.js";import"./VCheckboxBtn-91a22adb.js";import"./VSelectionControl-b5a90591.js";import"./ssrBoot-6ffb6bf6.js";import"./VDataTable-659f9a19.js";import"./VTable-c4dce93d.js";import"./filter-77f6f9da.js";const sa={class:"d-flex justify-start"},oa={__name:"AddTasks",props:{isDrawerOpen:{type:Boolean,required:!0},mode:{type:String,default:"add"},taskData:{type:Object,default:()=>({})}},emits:["update:isDrawerOpen","taskData"],setup(ie,{emit:I}){var E;const r=ie,j=I,x=je("userData");ge(async()=>{await Le(),await ke(),await $e()});const C=f(),M=f(!1),n=Me({project_plan_id:"",student_ids:(E=x.value)!=null&&E.admin_student_id?[x.value.admin_student_id]:[],semester:"",name:"",description:"",date:"",status:"",media:"",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""});de(()=>[r.taskData,r.mode],()=>{var m;r.mode==="edit"&&r.taskData?Object.assign(n,{project_plan_id:r.taskData.project_plan_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:r.taskData.name||"",description:r.taskData.description||"",date:r.taskData.date||"",status:r.taskData.link!==""?"Completed":"In Progress",media:r.taskData.media||"",embed:r.taskData.embed||"",link:r.taskData.link||"",accepted:r.taskData.accepted||0,rate:r.taskData.rate||"",review:r.taskData.review||"",admin_teacher_id:r.taskData.admin_teacher_id||""}):r.mode==="review"&&r.taskData?Object.assign(n,{project_plan_id:r.taskData.project_plan_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:r.taskData.name||"",description:r.taskData.description||"",date:r.taskData.date||"",status:r.taskData.accepted===1?"Completed":"In Progress",media:r.taskData.media||"",embed:r.taskData.embed||"",link:r.taskData.link||"",accepted:r.taskData.accepted||0,rate:r.taskData.rate||"",review:r.taskData.review||"",admin_teacher_id:r.taskData.admin_teacher_id||""}):r.mode==="duplicate"&&r.taskData?Object.assign(n,{project_plan_id:"",admin_student_id:r.taskData.admin_student_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:"",description:r.taskData.description||"",date:new Date().toLocaleDateString("en-CA"),status:"In Progress",media:r.taskData.media||"Instagram",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""}):Object.assign(n,{project_plan_id:"",admin_student_id:((m=x.value)==null?void 0:m.admin_student_id)||"",student_ids:[],semester:"",name:"",description:"",date:new Date().toLocaleDateString("en-CA"),status:"In Progress",media:"Instagram",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""})},{immediate:!0}),de(()=>r.isDrawerOpen,m=>{var i,w;m||((i=C.value)==null||i.reset(),(w=C.value)==null||w.resetValidation())});const U=m=>{j("update:isDrawerOpen",m)},S=()=>{var m,i;(m=C.value)==null||m.reset(),(i=C.value)==null||i.resetValidation()},A=()=>{var m;(m=C.value)==null||m.validate().then(({valid:i})=>{if(r.mode!=="review"&&!i)return;const w={...n};r.mode==="edit"||r.mode==="review"?(w.id=r.taskData.id,j("taskData",{action:"update",data:w})):j("taskData",{action:"create",data:w}),j("update:isDrawerOpen",!1),qe(S)})};return(m,i)=>{const w=Ye,y=ve,D=ze,F=Fe;return k(),h(Ge,{"model-value":r.isDrawerOpen,temporary:"",location:"end",width:"370",class:"category-navigation-drawer scrollable-content","onUpdate:modelValue":U},{default:s(()=>[t(w,{title:r.mode==="edit"?"Edit Task":r.mode==="duplicate"?"Duplicate Task":r.mode==="review"?"Review Task":"Add New Task",onCancel:i[0]||(i[0]=d=>m.$emit("update:isDrawerOpen",!1))},null,8,["title"]),t(L),t(a(Ee),{options:{wheelPropagation:!1}},{default:s(()=>[t(oe,{flat:""},{default:s(()=>[t(re,null,{default:s(()=>[t(a(He),{ref_key:"refVForm",ref:C,modelValue:a(M),"onUpdate:modelValue":i[14]||(i[14]=d=>T(M)?M.value=d:null),onSubmit:Be(A,["prevent"])},{default:s(()=>[r.mode!=="review"?(k(),h(R,{key:0,class:"g-4"},{default:s(()=>[t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).project_plan_id,"onUpdate:modelValue":i[1]||(i[1]=d=>a(n).project_plan_id=d),placeholder:"Select Project Plan",label:"Project Plan",rules:["requiredValidator"in m?m.requiredValidator:a(q)],items:a(Pe).filter(d=>d.is_active&&new Date(d.end_date)>=new Date),"item-title":"theme","item-value":"id"},null,8,["modelValue","rules","items"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).student_ids,"onUpdate:modelValue":i[2]||(i[2]=d=>a(n).student_ids=d),rules:["requiredValidator"in m?m.requiredValidator:a(q)],items:a(Re),"item-title":"nickname","item-value":"id",placeholder:"Select Creators",label:"Select Creators",chips:"",multiple:"","closable-chips":""},null,8,["modelValue","rules","items"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).semester,"onUpdate:modelValue":i[3]||(i[3]=d=>a(n).semester=d),placeholder:"Select Semester",label:"Semester",rules:["requiredValidator"in m?m.requiredValidator:a(q)],items:[1,2,3,4,5,6]},null,8,["modelValue","rules"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(y,{modelValue:a(n).name,"onUpdate:modelValue":i[4]||(i[4]=d=>a(n).name=d),label:"Write Title",rules:["requiredValidator"in m?m.requiredValidator:a(q)],placeholder:"Task Title"},null,8,["modelValue","rules"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(D,{modelValue:a(n).description,"onUpdate:modelValue":i[5]||(i[5]=d=>a(n).description=d),label:"Description",placeholder:"Write Description","auto-grow":""},null,8,["modelValue"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(F,{modelValue:a(n).date,"onUpdate:modelValue":i[6]||(i[6]=d=>a(n).date=d),label:"Date",placeholder:"Select date"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).status,"onUpdate:modelValue":i[7]||(i[7]=d=>a(n).status=d),rules:["requiredValidator"in m?m.requiredValidator:a(q)],placeholder:"Select Status",label:"Status",items:["In Progress","On Hold","Completed"]},null,8,["modelValue","rules"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).media,"onUpdate:modelValue":i[8]||(i[8]=d=>a(n).media=d),rules:["requiredValidator"in m?m.requiredValidator:a(q)],placeholder:"Select Media",label:"Media",items:["Instagram","TikTok","YouTube","Google Drive"]},null,8,["modelValue","rules"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(D,{modelValue:a(n).link,"onUpdate:modelValue":i[9]||(i[9]=d=>a(n).link=d),label:"Link",placeholder:"Paste Link","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})):(k(),h(R,{key:1},{default:s(()=>[t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).admin_teacher_id,"onUpdate:modelValue":i[10]||(i[10]=d=>a(n).admin_teacher_id=d),label:"Mentor",placeholder:"Select Mentor",items:"teachers"in m?m.teachers:a(Oe),"item-title":"nickname","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(g,{cols:"12"},{default:s(()=>[t(P,{modelValue:a(n).accepted,"onUpdate:modelValue":i[11]||(i[11]=d=>a(n).accepted=d),label:"Accepted",placeholder:"Not Accepted",items:[{text:"Accepted",value:1},{text:"Not Accepted",value:0}],"item-title":"text","item-value":"value"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",class:"text-center"},{default:s(()=>[t(Ve,{modelValue:a(n).rate,"onUpdate:modelValue":i[12]||(i[12]=d=>a(n).rate=d),"half-increments":"",hover:""},null,8,["modelValue"]),t(D,{modelValue:a(n).review,"onUpdate:modelValue":i[13]||(i[13]=d=>a(n).review=d),placeholder:"Write your review...",rows:3},null,8,["modelValue"])]),_:1})]),_:1})),t(R,{class:"mt-4"},{default:s(()=>[t(g,{cols:"12"},{default:s(()=>[v("div",sa,[t(N,{type:"submit",color:"primary",class:"me-4"},{default:s(()=>[b(_(r.mode==="edit"?"Update":"Add"),1)]),_:1}),t(N,{color:"error",variant:"tonal",onClick:S},{default:s(()=>i[15]||(i[15]=[b(" Discard ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const ra={class:"d-flex flex-column gap-y-1"},ia={class:"text-body-1 font-weight-medium text-capitalize"},na={class:"text-h4 my-1"},da={class:"d-flex"},ua={class:"me-2 text-disabled text-no-wrap"},ma={class:"d-flex flex-wrap gap-4 mx-5"},ca={class:"d-flex align-center"},pa={class:"d-flex gap-4 flex-wrap align-center"},fa={class:"d-flex align-center gap-x-2"},va={class:"d-flex flex-column"},ka={class:"text-body-1 font-weight-medium"},ga={class:"text-sm text-disabled"},Va={class:"v-avatar-group me-2"},_a={class:"text-xs"},ba={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},ya={class:"text-sm text-medium-emphasis mb-0"},Da={__name:"tasks",setup(ie){const{hasRole:I,currentUser:r,hasRoleOrTeacher:j}=Se();ge(async()=>{await ke()});const x=f(!1),C=f(""),M=f("primary"),n=(l,e="primary")=>{C.value=l,M.value=e,x.value=!0,setTimeout(()=>{x.value=!1},1e4)},U=f(!1),S=f("add"),A=f({}),E=l=>{A.value={...l},S.value="edit",U.value=!0},m=l=>{A.value={...l},S.value="review",U.value=!0},i=l=>{A.value=l,S.value="duplicate",U.value=!0},w=Y(()=>{const l=Y(()=>Ie.value||[]);return[{title:"Instagram",value:l.value.filter(e=>e.media==="Instagram").length,icon:"tabler-brand-instagram",desc:`${l.value.filter(e=>e.media==="Instagram"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media==="Instagram").length,c=l.value.filter(u=>u.media==="Instagram"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"TikTok",value:l.value.filter(e=>e.media=="TikTok").length,icon:"tabler-brand-tiktok",desc:`${l.value.filter(e=>e.media=="TikTok"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media=="TikTok").length,c=l.value.filter(u=>u.media=="TikTok"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"YouTube",value:l.value.filter(e=>e.media==="YouTube").length,icon:"tabler-brand-youtube",desc:`${l.value.filter(e=>e.media==="YouTube"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media==="YouTube").length,c=l.value.filter(u=>u.media==="YouTube"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"Others",value:l.value.filter(e=>e.media!=="Instagram"&&e.media!=="TikTok"&&e.media!=="YouTube").length,icon:"tabler-world",desc:`${l.value.filter(e=>e.media!=="Instagram"&&e.media!=="TikTok"&&e.media!=="YouTube"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media!=="Instagram"&&u.media!=="TikTok"&&u.media!=="YouTube").length,c=l.value.filter(u=>u.media!=="Instagram"&&u.media!=="TikTok"&&u.media!=="YouTube"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()}]}),y=f(10),D=f(1),F=f(),d=f(),H=f([]),G=f(),W=f(),J=f(),Q=f(""),_e=l=>{var e;D.value=l.page,y.value=l.itemsPerPage,(e=l.sortBy)!=null&&e.length?(F.value=l.sortBy[0].key,d.value=l.sortBy[0].order):(F.value=null,d.value=null),$()},$=async()=>{var e;const l={admin_student_id:((e=r.value)==null?void 0:e.admin_student_id)||"",search:Q.value||"",status:G.value||"",media:W.value||"",accepted:J.value||"",perPage:y.value,page:D.value,sortBy:F.value||"",orderBy:d.value||""};try{const c=await Ae(l);console.log("ðŸ“¦ FETCHING with:",l,c),H.value=c}catch(c){console.error("Error fetching tasks:",c.message)}},be=Y(()=>{var l;return((l=H.value)==null?void 0:l.tasks)||[]}),X=Y(()=>{var l;return((l=H.value)==null?void 0:l.totalTasks)||0}),ye=Y(()=>{var c,u;const l=((u=(c=H.value)==null?void 0:c.tasks)==null?void 0:u.map(V=>V.media))||[];return[...new Set(l.filter(Boolean))].map(V=>({title:V,value:V}))}),De=f([{title:"Completed",value:"Completed"},{title:"In Progress",value:"In Progress"},{title:"On Hold",value:"On Hold"}]),he=f([{title:"Accepted",value:"1"},{title:"Unchecked",value:"0"}]),we=[{title:"Task",key:"name"},{title:"Creators",key:"students",sortable:!1},{title:"Stars",key:"rate"},{title:"SMT",key:"semester"},{title:"ID",key:"id"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ne=l=>l=="Instagram"?{color:"primary",icon:"tabler-brand-instagram"}:l=="TikTok"?{color:"info",icon:"tabler-brand-tiktok"}:l=="YouTube"?{color:"error",icon:"tabler-brand-youtube"}:l=="Google Drive"?{color:"warning",icon:"tabler-brand-google"}:{color:"primary",icon:"tabler-world"},Te=l=>{if(l==="Completed")return{text:"Completed",color:"primary"};if(l==="In Progress")return{text:"In Progress",color:"warning"};if(l==="On Hold")return{text:"On Hold",color:"error"}},xe=async({action:l,data:e})=>{var u;const c={...e,accepted:e.accepted===""?"0":!!Number(e.accepted),rate:e.rate===""?0:Number(e.rate),admin_teacher_id:e.admin_teacher_id===""?null:Number(e.admin_teacher_id)};console.log("Sending taskData:",c,"action:",l);try{let V="/tasks",z="POST";l==="update"&&e.id&&(V=`/tasks/${e.id}`,z="PUT");const{data:o,response:p}=await ce(V,{method:z,body:JSON.stringify(c),headers:{"Content-Type":"application/json",Accept:"application/json"}});p.value.ok?(n(l==="create"?"Data berhasil ditambahkan":"Data berhasil diperbarui","success"),console.log("Task response:",o),$()):n(p.value.statusText||"Gagal menyimpan data","error")}catch(V){console.error("Task save error:",((u=V==null?void 0:V.data)==null?void 0:u.errors)||V),n(V.message||"Gagal menyimpan data","error")}},Ce=async l=>{try{confirm("Apakah kamu yakin ingin menghapus data ini?")&&(console.log("Deleting task with ID:",l),await ce(`/tasks/${l}`,{method:"DELETE"}),n("Data berhasil dihapus","success"),$())}catch(e){n(e.message||"Gagal menghapus data","error"),console.error(e)}};function ae(l){const e=l.reduce((c,u)=>(c.has(u.id)||c.set(u.id,u),c),new Map);return Array.from(e.values())}return(l,e)=>{const c=P,u=ve,V=ue("RouterLink"),z=ue("IconBtn");return k(),K("div",null,[t(oe,{class:"mb-6"},{default:s(()=>[t(re,null,{default:s(()=>[t(R,null,{default:s(()=>[(k(!0),K(te,null,me(a(w),(o,p)=>(k(),K(te,{key:p},[t(g,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:s(()=>[v("div",{class:Ne(["d-flex justify-space-between",l.$vuetify.display.xs||l.$vuetify.display.sm&&p<2?"product-widget":""])},[v("div",ra,[v("div",ia,_(o.title),1),v("h4",na,_(o.value),1),v("div",da,[v("div",ua,_(o.desc),1),o.change?(k(),h(pe,{key:0,label:"",color:o.change==100?"success":"error"},{default:s(()=>[b(_(("prefixWithPlus"in l?l.prefixWithPlus:a(Ue))(o.change))+"% ",1)]),_:2},1032,["color"])):O("",!0)])]),t(ee,{variant:"tonal",rounded:"",size:"38"},{default:s(()=>[t(Z,{icon:o.icon,size:"28"},null,8,["icon"])]),_:2},1024)],2)]),_:2},1024),(l.$vuetify.display.mdAndUp?p!==a(w).length-1:l.$vuetify.display.smAndUp&&p%2===0)?(k(),h(L,{key:0,vertical:"",inset:"",length:"95"})):O("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),t(Xe,{modelValue:a(x),"onUpdate:modelValue":e[0]||(e[0]=o=>T(x)?x.value=o:null),closable:"","close-label":"Close Alert",class:"mb-6",color:a(M)},{default:s(()=>[b(_(a(C)),1)]),_:1},8,["modelValue","color"]),t(oe,{title:"Filters",class:"mb-6"},{default:s(()=>[t(re,null,{default:s(()=>[t(R,null,{default:s(()=>[t(g,{cols:"12",sm:"4"},{default:s(()=>[t(c,{modelValue:a(G),"onUpdate:modelValue":[e[1]||(e[1]=o=>T(G)?G.value=o:null),$],placeholder:"Status",items:a(De),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(g,{cols:"12",sm:"4"},{default:s(()=>[t(c,{modelValue:a(W),"onUpdate:modelValue":[e[2]||(e[2]=o=>T(W)?W.value=o:null),$],placeholder:"Media",items:a(ye),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(g,{cols:"12",sm:"4"},{default:s(()=>[t(c,{modelValue:a(J),"onUpdate:modelValue":[e[3]||(e[3]=o=>T(J)?J.value=o:null),$],placeholder:"Checked",items:a(he),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(L,{class:"my-4"}),v("div",ma,[v("div",ca,[t(u,{modelValue:a(Q),"onUpdate:modelValue":e[4]||(e[4]=o=>T(Q)?Q.value=o:null),placeholder:"Search Tasks",density:"compact",style:{"inline-size":"200px"},class:"me-3",onInput:$},null,8,["modelValue"])]),t(Ke),v("div",pa,[t(c,{modelValue:a(y),"onUpdate:modelValue":e[5]||(e[5]=o=>T(y)?y.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),t(N,{variant:"tonal",color:"secondary","prepend-icon":"tabler-upload"},{default:s(()=>e[11]||(e[11]=[b(" Export ")])),_:1}),a(I)(2).value?(k(),h(N,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[6]||(e[6]=()=>{S.value="add",A.value={},U.value=!0})},{default:s(()=>e[12]||(e[12]=[b(" Add New Task ")])),_:1})):O("",!0)])]),t(L,{class:"mt-4"}),t(a(Ze),{"items-per-page":a(y),"onUpdate:itemsPerPage":e[8]||(e[8]=o=>T(y)?y.value=o:null),page:a(D),"onUpdate:page":e[9]||(e[9]=o=>T(D)?D.value=o:null),headers:we,"show-select":"",items:a(be),"items-length":a(X),class:"text-no-wrap","onUpdate:options":_e},{"item.name":s(({item:o})=>{var p;return[v("div",fa,[t(ee,{size:"30",variant:"tonal",color:(p=ne(o.media))==null?void 0:p.color,class:"me-2",rounded:""},{default:s(()=>{var B;return[t(Z,{icon:(B=ne(o.media))==null?void 0:B.icon,size:"18"},null,8,["icon"])]}),_:2},1032,["color"]),v("div",va,[v("span",ka,_(o.name.substring(0,30)),1),v("span",ga,_(o.project_plan.theme)+" @ "+_(o.media),1)])])]}),"item.students":s(({item:o})=>[v("div",Va,[(k(!0),K(te,null,me(ae(o.students).slice(0,3),p=>(k(),h(ee,{key:p.id,color:"info",size:"32"},{default:s(()=>[p.image?(k(),h(fe,{key:0,cover:"",src:`/storage/${p.image}`},null,8,["src"])):(k(),h(fe,{key:1,src:a(Je)},null,8,["src"])),t(ea,{location:"top",activator:"parent"},{default:s(()=>[b(_(p.nickname),1)]),_:2},1024)]),_:2},1024))),128)),ae(o.students).length>3?(k(),h(ee,{key:0,color:"secondary",size:"32"},{default:s(()=>[v("span",_a,"+"+_(ae(o.students).length-3),1)]),_:2},1024)):O("",!0)])]),"item.rate":s(({item:o})=>[t(Ve,{modelValue:o.rate,"onUpdate:modelValue":p=>o.rate=p,size:"x-small",density:"compact","half-increments":"",color:o.rate==0?"secondary":"warning",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),"item.semester":s(({item:o})=>[b(_(o.semester),1)]),"item.id":s(({item:o})=>[t(V,{to:"/?search="+o.id,target:"_blank"},{default:s(()=>[b(_(o.id),1)]),_:2},1032,["to"])]),"item.status":s(({item:o})=>[t(pe,le(Te(o.status),{density:"default",label:""}),null,16)]),"item.actions":s(({item:o})=>[t(z,{disabled:!a(I)(2).value,color:a(I)(2).value?"primary":"secondary",onClick:p=>E(o)},{default:s(()=>[t(Z,{icon:"tabler-edit"})]),_:2},1032,["disabled","color","onClick"]),t(z,null,{default:s(()=>[t(Z,{icon:"tabler-dots-vertical"}),t(aa,{activator:"parent"},{default:s(()=>[t(ta,null,{default:s(()=>{var p;return[a(j)(4,((p=a(r).value)==null?void 0:p.admin_teacher_id)??"X").value?(k(),h(se,{key:0,value:"review","prepend-icon":"tabler-circle-check",onClick:B=>m(o)},{default:s(()=>e[13]||(e[13]=[b(" Review ")])),_:2},1032,["onClick"])):O("",!0),a(I)(4).value?(k(),h(se,{key:1,value:"delete","prepend-icon":"tabler-trash",onClick:B=>Ce(o.id)},{default:s(()=>e[14]||(e[14]=[b(" Delete ")])),_:2},1032,["onClick"])):O("",!0),a(I)(2).value?(k(),h(se,{key:2,value:"duplicate","prepend-icon":"tabler-copy",onClick:B=>i(o)},{default:s(()=>e[15]||(e[15]=[b(" Duplicate ")])),_:2},1032,["onClick"])):O("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[t(L),v("div",ba,[v("p",ya,_(a(We)({page:a(D),itemsPerPage:a(y)},a(X))),1),t(la,{modelValue:a(D),"onUpdate:modelValue":e[7]||(e[7]=o=>T(D)?D.value=o:null),length:Math.min(Math.ceil(a(X)/a(y)),5),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(a(X)/a(y)),5)},{prev:s(o=>[t(N,le({variant:"tonal",color:"default"},o,{icon:!1}),{default:s(()=>e[16]||(e[16]=[b(" Previous ")])),_:2},1040)]),next:s(o=>[t(N,le({variant:"tonal",color:"default"},o,{icon:!1}),{default:s(()=>e[17]||(e[17]=[b(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(oa,{"is-drawer-open":a(U),"onUpdate:isDrawerOpen":e[10]||(e[10]=o=>T(U)?U.value=o:null),mode:a(S),"task-data":a(A),onTaskData:xe},null,8,["is-drawer-open","mode","task-data"])])}}},Dt=Qe(Da,[["__scopeId","data-v-d6cadb88"]]);export{Dt as default};
