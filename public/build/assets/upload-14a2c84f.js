import{a as x}from"./formatters-a579ec9f.js";import{u as w,f as A,d as B}from"./fetchProjectData-68a7cbad.js";import{N as H,F as D}from"./front-page-navbar-c77e0fd3.js";import{_ as E}from"./PostingCard-9fe4d5ab.js";import{r as i,H as M,d7 as z,f9 as P,a as U,o,c as n,b as a,d as $,e as r,F as f,i as T,f as p,x as c,n as q,v,z as O}from"./main-4f88f0ef.js";import{a as N,V as R}from"./VRow-f91e85cc.js";import{V as W}from"./VCard-63e71bf1.js";import{V as Y,b as G,c as J,a as K}from"./VList-feb05806.js";import{V as Q}from"./VAvatar-e5a31aae.js";import{V as X}from"./VImg-68e835e8.js";import{V as Z}from"./VDivider-b9cb0238.js";import"./helpers-86b04518.js";import"./no-profile-4221a4a6.js";import"./useApi-e555f480.js";import"./AppTextField-0a702a89.js";import"./form-c8cd72fd.js";import"./VTextField-4fe060dc.js";/* empty css                   */import"./VCounter-04ac2a91.js";import"./VField-cac243f5.js";import"./easing-9f15041e.js";import"./VInput-55c72d65.js";import"./forwardRefs-8348545e.js";import"./VNodeRenderer-73a08832.js";import"./useGenerateImageVariant-b18e3e22.js";import"./VForm-8272ee06.js";import"./VChip-fdf96eb5.js";import"./VContainer-c5c24486.js";import"./NavbarThemeSwitcher-6f425a14.js";import"./VTooltip-5ebf368b.js";import"./VOverlay-323f114c.js";import"./lazy-a29a8712.js";import"./scopeId-7cb11928.js";import"./VMenu-ce97e0a3.js";import"./dialog-transition-2ef940ae.js";import"./ssrBoot-78ccd235.js";import"./VNavigationDrawer-fc355904.js";import"./VToolbar-cfb1ebb9.js";import"./VSpacer-087c8f6f.js";import"./AppTextarea-dc54ff33.js";import"./AppSelect-0e01f2b7.js";import"./VSelect-7d289760.js";import"./VCheckboxBtn-ec3e0aa2.js";import"./VSelectionControl-c713929d.js";import"./GDriveEmbed-a63b6ac5.js";import"./InstagramEmbed-aeabf438.js";import"./fetchTeacherData-72ab198b.js";import"./api-9abf3ce1.js";import"./index-de6040c1.js";import"./index-9c720871.js";import"./VCardText-9f2226ac.js";import"./VRating-d9728d33.js";import"./VAlert-72287be2.js";const ee={class:"landing-page-wrapper"},te={class:"upload-card"},ae={key:1},rt={__name:"upload",setup(re){const m=i(null),_=i([]),u=i(!1),k=i(2);console.log("uploadTask:",w.value),M(async()=>{var t;await A(),m.value=(t=w.value)==null?void 0:t.data,m.value&&h(),window.addEventListener("scroll",L)});const L=async()=>{var d;const t=window.scrollY+window.innerHeight,s=document.documentElement.scrollHeight-10;if(t>=s&&!u.value){u.value=!0;const e=await B(k.value++);(d=e.data)!=null&&d.length&&(m.value.push(...e.data),h()),u.value=!1}};function h(){_.value=[{type:"subheader",title:"Best of the Week"},...m.value.filter(t=>t.rate>=4).flatMap(t=>{var s;return[{prependAvatar:z,title:((s=t.admin_student)==null?void 0:s.name)||"Unknown Student",subtitle:t.name||"No Task Name"},{type:"divider",inset:!0}]})]}const g=i(),S=i(),j=i(),C=i(),F=i(),I=i();return P([S,j,C,F,I],([{isIntersecting:t,target:s}])=>{t&&(g.value=s.id)},{threshold:.25}),(t,s)=>{const d=U("VSubheader");return o(),n("div",ee,[a(H,{"active-id":g.value},null,8,["active-id"]),$("div",te,[a(R,{class:"m-0 p-0"},{default:r(()=>[a(N,{class:"d-none d-lg-block",cols:"12",lg:"3"},{default:r(()=>[a(W,{style:{position:"sticky","inset-block-start":"6rem"}},{default:r(()=>[a(Y,{lines:"three"},{default:r(()=>[(o(!0),n(f,null,T(_.value,(e,l)=>(o(),n(f,{key:l},[e.prependAvatar?(o(),p(K,{key:0,class:"custom-list-item"},{prepend:r(()=>[a(Q,{size:"34",variant:"tonal",color:"primary",class:"me-3"},{default:r(()=>[t.avatar?(o(),p(X,{key:0,src:t.avatar},null,8,["src"])):(o(),n("span",ae,c(("avatarText"in t?t.avatarText:q(x))(e.title)),1))]),_:2},1024)]),default:r(()=>[a(G,null,{default:r(()=>[v(c(e.title),1)]),_:2},1024),a(J,null,{default:r(()=>[v(c(e.subtitle),1)]),_:2},1024)]),_:2},1024)):e.type==="divider"?(o(),p(Z,{key:`divider-${l}`,inset:""})):e.type==="subheader"?(o(),p(d,{key:2,class:"ps-3 mb-2 font-weight-medium text-primary"},{default:r(()=>[v(c(e.title),1)]),_:2},1024)):O("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),a(N,{cols:"12",lg:"9"},{default:r(()=>[(o(!0),n(f,null,T(m.value,e=>{var l,y,V,b;return o(),n("div",{key:e.id},[a(E,{"task-id":e.id,"task-name":e.name,description:e.description,subject:e.project_plan.subject,theme:e.project_plan.theme,stars:e.rate,media:e.media,"post-id":((y=(l=e.link)==null?void 0:l.match(/\/d\/(.*?)\//))==null?void 0:y[1])||"N/A","student-name":e.admin_student.name,nickname:e.admin_student.nickname,email:e.admin_student.email,teacher:e.admin_teacher?{id:e.admin_teacher.id,name:e.admin_teacher.nickname}:"Not Accepted","student-img":(V=e.admin_student)==null?void 0:V.image,"teacher-img":(b=e.admin_teacher)==null?void 0:b.image,accepted:e.accepted,review:(e==null?void 0:e.review)||null},null,8,["task-id","task-name","description","subject","theme","stars","media","post-id","student-name","nickname","email","teacher","student-img","teacher-img","accepted","review"])])}),128))]),_:1})]),_:1})]),a(D)])}}};export{rt as default};
