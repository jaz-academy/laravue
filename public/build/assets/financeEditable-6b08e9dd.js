import{_ as T}from"./AppSelect-3e238d9d.js";import{_ as H}from"./AppDateTimePicker-828009d3.js";import{_ as b}from"./AppTextField-862a83a4.js";import{V as L}from"./VNodeRenderer-75612b94.js";import{r as w,be as k,w as x,aY as F,a as M,o as h,f as R,e as s,d,b as e,n as c,a0 as C,H as O,c as A,I as z,x as v,v as y,z as W,F as Y,i as G,ai as J}from"./main-ee7c17de.js";import{V as S}from"./VRow-271260dd.js";import{V as _}from"./VCol-cfb71e73.js";import{V as q}from"./VCard-cba44afa.js";import{u as j}from"./useApi-ee5b865a.js";import{V as B}from"./VCardText-6be2f581.js";import{V as D}from"./VDivider-5a8f189b.js";const K={class:"pa-5 flex-grow-1"},Q={class:"d-flex flex-column justify-space-between border-s pa-1"},X={__name:"financeItemEdit",props:{id:{type:Number,required:!0},data:{type:Object,required:!0}},emits:["remove","update:data"],setup(U,{emit:I}){const i=U,p=I,a=w(structuredClone(k(i.data)));let m=!1;x(a,n=>{m||p("update:data",n)},{deep:!0}),x(()=>i.data,n=>{m=!0,a.value=structuredClone(k(n)),F(()=>{m=!1})},{deep:!0});const N=()=>{p("remove",i.id)};return(n,u)=>{const g=M("IconBtn");return h(),R(q,{flat:"",border:"",class:"d-flex flex-row"},{default:s(()=>[d("div",K,[e(S,null,{default:s(()=>[e(_,{cols:"12",sm:"8"},{default:s(()=>[e(b,{modelValue:c(a).description,"onUpdate:modelValue":u[0]||(u[0]=V=>c(a).description=V),label:"Description",placeholder:"Write Description"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"4"},{default:s(()=>[e(b,{modelValue:c(a).amount,"onUpdate:modelValue":u[1]||(u[1]=V=>c(a).amount=V),label:"Amount",placeholder:"Amount"},null,8,["modelValue"])]),_:1})]),_:1})]),d("div",Q,[e(g,{onClick:N},{default:s(()=>[e(C,{size:"20",icon:"tabler-x"})]),_:1}),e(g,null,{default:s(()=>[e(C,{size:"20",icon:"tabler-settings"})]),_:1})])]),_:1})}}},Z={key:0,class:"ma-sm-4"},ee={class:"d-flex align-center mb-6"},ae={class:"font-weight-bold text-capitalize text-h4"},te={class:"mb-0"},le={class:"my-2"},oe={class:"mb-0"},se={class:"mt-4 ma-sm-4"},ne={class:"d-flex align-center font-weight-medium justify-sm-end text-xl mb-3"},de={class:"mt-6 ms-sm-4"},be={__name:"financeEditable",props:{invoiceNumber:String,data:{type:null,required:!0}},emits:["push","remove","update:data"],setup(U,{emit:I}){const i=U,p=I,a=w(structuredClone(k(i.data)));let m=!1;x(a,o=>{m||p("update:data",o)},{deep:!0}),x(()=>i.data,o=>{m=!0,a.value=structuredClone(k(o)),F(()=>{m=!1})},{deep:!0});const N=(o,t)=>{a.value.financeItem[o]=t},n=w([]),u=w([]),g=async()=>{const{data:o,error:t}=await j("/schools");t.value?console.log(t.value):n.value=o.value},V=async()=>{const{data:o,error:t}=await j("/accounts");t.value?console.log(t.value):u.value=o.value.data.filter(f=>f.unit==="Pengeluaran")};O(()=>{V(),g()}),x(()=>a.value.header.finance_account_id,(o,t)=>{if(!(o===t&&a.value.header.remark)&&o){const f=u.value.find(l=>l.id===o);f&&(a.value.header.remark=f.description)}});const E=()=>{p("push")},P=o=>{p("remove",o)};return(o,t)=>{const f=T;return h(),R(q,null,{default:s(()=>[e(B,{class:"d-flex flex-wrap justify-space-between gap-y-5 flex-column flex-sm-row"},{default:s(()=>{var l,r;return[(r=(l=n.value)==null?void 0:l.data)!=null&&r.length?(h(),A("div",Z,[d("div",ee,[e(c(L),{nodes:c(z).app.logo,class:"me-3"},null,8,["nodes"]),d("h6",ae,v(c(z).app.title),1)]),d("p",te,[y(v(n.value.data[0].name)+" âœª ",1),d("strong",null,v(n.value.data[0].organization),1)]),d("p",le,v(n.value.data[0].address),1),d("p",oe,[e(C,{icon:"tabler-phone",class:"me-2"}),y(" "+v(n.value.data[0].phone)+" ",1),e(C,{icon:"tabler-mail",class:"mx-2"}),y(" "+v(n.value.data[0].email),1)])])):W("",!0),d("div",se,[d("h6",ne,[d("span",null,[e(b,{"model-value":i.invoiceNumber,disabled:"",prefix:"#",density:"compact",style:{"inline-size":"9.5rem"}},null,8,["model-value"])])])])]}),_:1}),e(D),e(B,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:s(()=>[e(S,null,{default:s(()=>[e(_,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(H,{modelValue:a.value.header.date,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.header.date=l),label:"Date",density:"compact"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(b,{modelValue:a.value.header.vendor,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.header.vendor=l),label:"Vendor",density:"compact"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(f,{modelValue:a.value.header.finance_account_id,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.header.finance_account_id=l),items:u.value,"item-title":l=>{const r=u.value.find($=>$.id===(l.id||l));return r?`${r.number} - ${r.description}`:l.id||l},"item-value":"id",label:"Account"},null,8,["modelValue","items","item-title"])]),_:1}),e(_,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(b,{modelValue:a.value.header.remark,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.header.remark=l),label:"Remark",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D),e(B,{class:"add-products-form"},{default:s(()=>[(h(!0),A(Y,null,G(a.value.financeItem,(l,r)=>(h(),A("div",{key:r,class:"my-4 ma-sm-4"},[e(X,{id:r,data:l,"onUpdate:data":$=>N(r,$),onRemove:P},null,8,["id","data","onUpdate:data"])]))),128)),d("div",de,[e(J,{onClick:E},{default:s(()=>t[4]||(t[4]=[y(" Add Item ")])),_:1})])]),_:1}),e(D)]),_:1})}}};export{be as _};
