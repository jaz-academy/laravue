import{m as pe,V as ee}from"./VTextField-d2aea9dd.js";import{a2 as E,a3 as se,ax as J,a9 as re,w as G,aa as Q,b as s,F as O,s as H,a5 as j,a6 as I,r as M,b0 as he,bb as ge,cF as ye,a7 as le,aq as Ve,bL as Se,aB as be,$ as we,c6 as ke,a8 as W,H as xe,cq as Ce,bC as Pe,aG as Ie,bD as Te,aH as te,cp as Re,a1 as ae,bH as De,v as Be,cC as Le,cz as ne}from"./main-4585feec.js";import{a as _e}from"./form-075a7c7b.js";import{f as Ae}from"./forwardRefs-8348545e.js";import{m as Fe,u as He,V as Me,a as oe}from"./VList-4b4f9347.js";import{m as Oe}from"./VImg-02cfc59c.js";import{V as Ee}from"./dialog-transition-a9ebe0dc.js";import{V as Ue}from"./VMenu-dc1c4301.js";import{g as ze}from"./VOverlay-27dbbcf8.js";import{V as Ke}from"./VCheckboxBtn-42d04193.js";import{V as $e}from"./VChip-aabda9ce.js";const qe=E({renderless:Boolean,...se()},"VVirtualScrollItem"),Ne=J()({name:"VVirtualScrollItem",inheritAttrs:!1,props:qe(),emits:{"update:height":e=>!0},setup(e,f){let{attrs:l,emit:m,slots:r}=f;const{resizeRef:c,contentRect:h}=re(void 0,"border");G(()=>{var n;return(n=h.value)==null?void 0:n.height},n=>{n!=null&&m("update:height",n)}),Q(()=>{var n,o;return e.renderless?s(O,null,[(n=r.default)==null?void 0:n.call(r,{itemRef:c})]):s("div",H({ref:c,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(o=r.default)==null?void 0:o.call(r)])})}}),ue=-1,ie=1,We=E({itemHeight:{type:[Number,String],default:48}},"virtual");function je(e,f,l){const m=j(0),r=j(e.itemHeight),c=I({get:()=>parseInt(r.value??0,10),set(d){r.value=d}}),h=M(),{resizeRef:n,contentRect:o}=re();he(()=>{n.value=h.value});const y=ge(),k=new Map;let b=Array.from({length:f.value.length});const a=I(()=>{const d=(!o.value||h.value===document.documentElement?y.height.value:o.value.height)-((l==null?void 0:l.value)??0);return Math.ceil(d/c.value*1.7+1)});function p(d,v){c.value=Math.max(c.value,v),b[d]=v,k.set(f.value[d],v)}function T(d){return b.slice(0,d).reduce((v,V)=>v+(V||c.value),0)}function x(d){const v=f.value.length;let V=0,D=0;for(;D<d&&V<v;)D+=b[V++]||c.value;return V-1}let A=0;function F(){if(!h.value||!o.value)return;const d=o.value.height-56,v=h.value.scrollTop,V=v<A?ue:ie,D=x(v+d/2),_=Math.round(a.value/3),K=D-_,$=m.value+_*2-1;V===ue&&D<=$?m.value=le(K,0,f.value.length):V===ie&&D>=$&&(m.value=le(K,0,f.value.length-a.value)),A=v}function U(d){if(!h.value)return;const v=T(d);h.value.scrollTop=v}const B=I(()=>Math.min(f.value.length,m.value+a.value)),z=I(()=>f.value.slice(m.value,B.value).map((d,v)=>({raw:d,index:v+m.value}))),L=I(()=>T(m.value)),Y=I(()=>T(f.value.length)-T(B.value));return G(()=>f.value.length,()=>{b=ye(f.value.length).map(()=>c.value),k.forEach((d,v)=>{const V=f.value.indexOf(v);V===-1?k.delete(v):b[V]=d})}),{containerRef:h,computedItems:z,itemHeight:c,paddingTop:L,paddingBottom:Y,scrollToIndex:U,handleScroll:F,handleItemResize:p}}const Ge=E({items:{type:Array,default:()=>[]},renderless:Boolean,...We(),...se(),...Ve()},"VVirtualScroll"),Ye=J()({name:"VVirtualScroll",props:Ge(),setup(e,f){let{slots:l}=f;const m=Se("VVirtualScroll"),{dimensionStyles:r}=be(e),{containerRef:c,handleScroll:h,handleItemResize:n,scrollToIndex:o,paddingTop:y,paddingBottom:k,computedItems:b}=je(e,we(e,"items"));return ke(()=>e.renderless,()=>{xe(()=>{var a;c.value=ze(m.vnode.el,!0),(a=c.value)==null||a.addEventListener("scroll",h)}),Ce(()=>{var a;(a=c.value)==null||a.removeEventListener("scroll",h)})}),Q(()=>{const a=b.value.map(p=>s(Ne,{key:p.index,renderless:e.renderless,"onUpdate:height":T=>n(p.index,T)},{default:T=>{var x;return(x=l.default)==null?void 0:x.call(l,{item:p.raw,index:p.index,...T})}}));return e.renderless?s(O,null,[s("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:W(y.value)}},null),a,s("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:W(k.value)}},null)]):s("div",{ref:c,class:["v-virtual-scroll",e.class],onScroll:h,style:[r.value,e.style]},[s("div",{class:"v-virtual-scroll__container",style:{paddingTop:W(y.value),paddingBottom:W(k.value)}},[a])])}),{scrollToIndex:o}}});function Je(e,f){const l=j(!1);let m;function r(n){cancelAnimationFrame(m),l.value=!0,m=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{l.value=!1})})}async function c(){await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>{if(l.value){const o=G(l,()=>{o(),n()})}else n()})}async function h(n){var k,b;if(n.key==="Tab"&&((k=f.value)==null||k.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const o=(b=e.value)==null?void 0:b.$el;if(!o)return;(n.key==="Home"||n.key==="End")&&o.scrollTo({top:n.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await c();const y=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(n.key==="PageDown"||n.key==="Home"){const a=o.getBoundingClientRect().top;for(const p of y)if(p.getBoundingClientRect().top>=a){p.focus();break}}else{const a=o.getBoundingClientRect().bottom;for(const p of[...y].reverse())if(p.getBoundingClientRect().bottom<=a){p.focus();break}}}return{onListScroll:r,onListKeydown:h}}const Qe=E({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Fe({itemChildren:!1})},"Select"),Xe=E({...Qe(),...Ie(pe({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Oe({transition:{component:Ee}})},"VSelect"),cl=J()({name:"VSelect",props:Xe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:l}=f;const{t:m}=Te(),r=M(),c=M(),h=M(),n=te(e,"menu"),o=I({get:()=>n.value,set:t=>{var u;n.value&&!t&&((u=c.value)!=null&&u.Î¨openChildren)||(n.value=t)}}),{items:y,transformIn:k,transformOut:b}=He(e),a=te(e,"modelValue",[],t=>k(t===null?[null]:Le(t)),t=>{const u=b(t);return e.multiple?u:u[0]??null}),p=_e(),T=I(()=>a.value.map(t=>t.value)),x=j(!1),A=I(()=>o.value?e.closeText:e.openText);let F="",U;const B=I(()=>e.hideSelected?y.value.filter(t=>!a.value.some(u=>u===t)):y.value),z=I(()=>e.hideNoData&&!y.value.length||e.readonly||(p==null?void 0:p.isReadonly.value)),L=M(),{onListScroll:Y,onListKeydown:d}=Je(L,r);function v(t){e.openOnClear&&(o.value=!0)}function V(){z.value||(o.value=!o.value)}function D(t){var i,w;if(!t.key||e.readonly||p!=null&&p.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(o.value=!0),["Escape","Tab"].includes(t.key)&&(o.value=!1),t.key==="Home"?(i=L.value)==null||i.focus("first"):t.key==="End"&&((w=L.value)==null||w.focus("last"));const u=1e3;function S(g){const R=g.key.length===1,C=!g.ctrlKey&&!g.metaKey&&!g.altKey;return R&&C}if(e.multiple||!S(t))return;const q=performance.now();q-U>u&&(F=""),F+=t.key.toLowerCase(),U=q;const N=y.value.find(g=>g.title.toLowerCase().startsWith(F));N!==void 0&&(a.value=[N])}function _(t){if(e.multiple){const u=a.value.findIndex(S=>e.valueComparator(S.value,t.value));if(u===-1)a.value=[...a.value,t];else{const S=[...a.value];S.splice(u,1),a.value=S}}else a.value=[t],o.value=!1}function K(t){var u;(u=L.value)!=null&&u.$el.contains(t.relatedTarget)||(o.value=!1)}function $(){var t;x.value&&((t=r.value)==null||t.focus())}function ce(t){x.value=!0}function de(t){if(t==null)a.value=[];else if(ne(r.value,":autofill")||ne(r.value,":-webkit-autofill")){const u=y.value.find(S=>S.title===t);u&&_(u)}else r.value&&(r.value.value="")}return G(o,()=>{if(!e.hideSelected&&o.value&&a.value.length){const t=B.value.findIndex(u=>a.value.some(S=>e.valueComparator(S.value,u.value)));Re&&window.requestAnimationFrame(()=>{var u;t>=0&&((u=h.value)==null||u.scrollToIndex(t))})}}),Q(()=>{const t=!!(e.chips||l.chip),u=!!(!e.hideNoData||B.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),S=a.value.length>0,[q]=ee.filterProps(e),N=S||!x.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(ee,H({ref:r},q,{modelValue:a.value.map(i=>i.props.value).join(", "),"onUpdate:modelValue":de,focused:x.value,"onUpdate:focused":i=>x.value=i,validationValue:a.externalValue,counterValue:a.value.length,dirty:S,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":a.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:N,"onClick:clear":v,"onMousedown:control":V,onBlur:K,onKeydown:D,"aria-label":m(A.value),title:m(A.value)}),{...l,default:()=>s(O,null,[s(Ue,H({ref:c,modelValue:o.value,"onUpdate:modelValue":i=>o.value=i,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:$},e.menuProps),{default:()=>[u&&s(Me,{ref:L,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:d,onFocusin:ce,onScrollPassive:Y,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var i,w,g;return[(i=l["prepend-item"])==null?void 0:i.call(l),!B.value.length&&!e.hideNoData&&(((w=l["no-data"])==null?void 0:w.call(l))??s(oe,{title:m(e.noDataText)},null)),s(Ye,{ref:h,renderless:!0,items:B.value},{default:R=>{var Z;let{item:C,index:P,itemRef:ve}=R;const X=H(C.props,{ref:ve,key:P,onClick:()=>_(C)});return((Z=l.item)==null?void 0:Z.call(l,{item:C,index:P,props:X}))??s(oe,X,{prepend:fe=>{let{isSelected:me}=fe;return s(O,null,[e.multiple&&!e.hideSelected?s(Ke,{key:C.value,modelValue:me,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependIcon&&s(ae,{icon:C.props.prependIcon},null)])}})}}),(g=l["append-item"])==null?void 0:g.call(l)]}})]}),a.value.map((i,w)=>{var C;function g(P){P.stopPropagation(),P.preventDefault(),_(i)}const R={"onClick:close":g,onMousedown(P){P.preventDefault(),P.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:i.value,class:"v-select__selection"},[t?l.chip?s(De,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:i.title}}},{default:()=>{var P;return[(P=l.chip)==null?void 0:P.call(l,{item:i,index:w,props:R})]}}):s($e,H({key:"chip",closable:e.closableChips,size:"small",text:i.title,disabled:i.props.disabled},R),null):((C=l.selection)==null?void 0:C.call(l,{item:i,index:w}))??s("span",{class:"v-select__selection-text"},[i.title,e.multiple&&w<a.value.length-1&&s("span",{class:"v-select__selection-comma"},[Be(",")])])])})]),"append-inner":function(){var R;for(var i=arguments.length,w=new Array(i),g=0;g<i;g++)w[g]=arguments[g];return s(O,null,[(R=l["append-inner"])==null?void 0:R.call(l,...w),e.menuIcon?s(ae,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ae({isFocused:x,menu:o,select:_},r)}});export{cl as V,Ye as a,Qe as m,Je as u};
