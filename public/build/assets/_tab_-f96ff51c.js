import{u as W}from"./helpers-3fbb07dd.js";import{u as G}from"./useApi-2f2d676b.js";import{_ as ie}from"./ConfirmDialog-feb7142e.js";import{_ as X}from"./AppSelect-abb85e9c.js";import{_ as se}from"./AppDateTimePicker-35245e05.js";import{_ as Y}from"./AppTextField-f3519212.js";import{r as _,w as Z,a5 as B,o as k,c as E,b as e,e as l,n as o,f as w,d as U,ai as A,a0 as F,z as R,a$ as H,v as h,F as re,b5 as de,a as oe,aU as T,x as D,s as q,j as me,H as pe,i as ce}from"./main-7487d517.js";import{a as ne}from"./no-profile-4221a4a6.js";import{V as u}from"./VCol-fe7d94c6.js";import{V as z}from"./VCard-a39876b1.js";import{V as M}from"./VCardText-5f738b43.js";import{V as Q}from"./VAvatar-6d04c863.js";import{V as ee}from"./VForm-601bdd25.js";import{V as L}from"./VDivider-6be2b96b.js";import{V as $}from"./VRow-9d945ad9.js";import{a as fe}from"./formatters-d7d4be2a.js";import{_ as ve}from"./MoreBtn-1891c99e.js";import{p as Ve}from"./paginationMeta-4ad053a4.js";import{c as be}from"./createUrl-52f7cd19.js";import{$ as ge}from"./api-c3363c72.js";import{V as ye}from"./VSpacer-c1896b0d.js";import{V as _e}from"./VDataTableServer-cc0b57e7.js";import{V as Se}from"./VTooltip-92e8887a.js";import{V as Ue}from"./VImg-07fecb91.js";import{V as xe}from"./VChip-2f95e3fb.js";import{V as he}from"./VPagination-c0465f31.js";import{_ as ke,A as De}from"./AccountSettingsSecurity-30e9907c.js";import{a as Pe,V as Ae}from"./VTabs-b6095b63.js";import{V as we}from"./VSnackbar-1e4937a9.js";import{a as j,V as Ne}from"./VWindowItem-0e9b2898.js";import"./VDialog-93f6154c.js";import"./VOverlay-f41b538e.js";import"./easing-9f15041e.js";import"./lazy-d84728e0.js";import"./scopeId-a8e59773.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-30fb99f7.js";import"./form-ae5f14e6.js";import"./VSelect-ce1bc86e.js";import"./VTextField-1ea2f494.js";/* empty css                   */import"./VCounter-295b60c2.js";import"./VField-66cd25e5.js";import"./VInput-d4c18c39.js";import"./VList-1bc1b4f4.js";import"./ssrBoot-6d306988.js";import"./VMenu-64e26677.js";import"./VCheckboxBtn-fe4983bb.js";import"./VSelectionControl-643c6274.js";import"./index-9c720871.js";import"./index-59ef0f34.js";import"./VDataTable-cd5b8663.js";import"./VTable-2039da19.js";import"./filter-45a14996.js";import"./fetchUserData-df02ae08.js";import"./VAlert-8e3645cb.js";import"./VCheckbox-1c68f6f1.js";import"./TwoFactorAuthDialog-22b508bf.js";import"./DialogCloseBtn-f5d2513b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VSlideGroup-32c55a80.js";const Ce={class:"d-flex flex-column justify-center gap-4"},Te={class:"d-flex flex-wrap gap-2"},Ie={__name:"AccountSettingsAccount",props:{student:Object},emits:["userData"],setup(N,{emit:P}){const C=P,{hasRole:d,hasRoleOrStudent:p}=W(),x=_(),S=_(null),g=_(),i=_(!1),t=_({});Z(()=>N.student,b=>{if(b){const a=JSON.parse(JSON.stringify(b));if(typeof a.skills=="string")try{const s=JSON.parse(a.skills);a.skills=Array.isArray(s)?s:[]}catch{a.skills=a.skills.split(",").map(f=>f.trim())}t.value=a}},{immediate:!0});const y=B(()=>{var a;const b=(a=t.value)==null?void 0:a.image;return b?`/storage/${b}`:ne}),v=()=>{t.value=JSON.parse(JSON.stringify(N.student))},V=b=>{const a=new FileReader,{files:s}=b.target;s&&s.length&&(a.readAsDataURL(s[0]),a.onload=()=>{typeof a.result=="string"&&(y.value=a.result,O())},S.value=s[0])},I=()=>{y.value=ne},J=()=>{var b;(b=x.value)==null||b.validate().then(({valid:a})=>{a&&(console.log("SUBMIT PAYLOAD",t.value),C("userData",{...t.value}))})},O=async()=>{if(!S.value)return;const b=new FormData;b.append("image",S.value),b.append("_method","PUT");try{const a=await G("/user/profile",{method:"POST",body:b}),s=a.data.image,f=a.data.url;y.value=f,t.value.image=s,userData.value.image=s,console.log("Upload success",a)}catch(a){console.error("Upload failed",a)}};return(b,a)=>{const s=Y,f=se,m=X,c=ie;return k(),E(re,null,[e($,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(z,{title:"Profile Student Details"},{default:l(()=>[o(d)(2).value?(k(),w(M,{key:0,class:"d-flex"},{default:l(()=>[e(Q,{rounded:"",size:"100",class:"me-6",image:o(y)},null,8,["image"]),U("div",Ce,[U("div",Te,[e(A,{color:"primary",onClick:a[0]||(a[0]=r=>{var K;return(K=g.value)==null?void 0:K.click()})},{default:l(()=>[e(F,{icon:"tabler-cloud-upload",class:"d-sm-none"}),a[19]||(a[19]=U("span",{class:"d-none d-sm-block"},"Upload new photo",-1))]),_:1}),U("input",{ref_key:"refInputEl",ref:g,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:V},null,544),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:I},{default:l(()=>[a[20]||(a[20]=U("span",{class:"d-none d-sm-block"},"Reset",-1)),e(F,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),a[21]||(a[21]=U("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),_:1})):R("",!0),e(ee,{ref_key:"refForm",ref:x,onSubmit:H(J,["prevent"])},{default:l(()=>[e(L,{class:"my-4"}),e(M,{class:"pt-2"},{default:l(()=>[e($,null,{default:l(()=>[e(u,{md:"4",cols:"12"},{default:l(()=>[e(s,{modelValue:t.value.nis,"onUpdate:modelValue":a[1]||(a[1]=r=>t.value.nis=r),placeholder:"201122",label:"Nomor Induk",disabled:!o(d)(4).value},null,8,["modelValue","disabled"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(s,{modelValue:t.value.name,"onUpdate:modelValue":a[2]||(a[2]=r=>t.value.name=r),placeholder:"John",label:"Nama Lengkap"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(s,{modelValue:t.value.nickname,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.nickname=r),placeholder:"Doe",label:"Panggilan"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.birth_place,"onUpdate:modelValue":a[4]||(a[4]=r=>t.value.birth_place=r),label:"Tempat Lahir",placeholder:"Enter your birth place"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(f,{modelValue:t.value.birth_date,"onUpdate:modelValue":a[5]||(a[5]=r=>t.value.birth_date=r),label:"Tanggal Lahir",placeholder:"Select Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.ownPhone,"onUpdate:modelValue":a[6]||(a[6]=r=>t.value.ownPhone=r),label:"Nomor Handphone",placeholder:"+62 888 1234 5678"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.address,"onUpdate:modelValue":a[7]||(a[7]=r=>t.value.address=r),label:"Alamat",placeholder:"Jln. Sirot No. 123"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.hamlet,"onUpdate:modelValue":a[8]||(a[8]=r=>t.value.hamlet=r),label:"Desa",placeholder:"Desa Mustaqim"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.village,"onUpdate:modelValue":a[9]||(a[9]=r=>t.value.village=r),label:"Kecamatan",placeholder:"Kelurahan / Kec. Jannah"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.city,"onUpdate:modelValue":a[10]||(a[10]=r=>t.value.city=r),label:"Kota",placeholder:"Kota / Kabupaten Firdaus"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.district,"onUpdate:modelValue":a[11]||(a[11]=r=>t.value.district=r),label:"Provinsi",placeholder:"Prop. Firdaus"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.postal_code,"onUpdate:modelValue":a[12]||(a[12]=r=>t.value.postal_code=r),label:"Kodepos",placeholder:"10001"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{class:"mt-4"}),e(M,{class:"pt-2 mt-6"},{default:l(()=>[e($,null,{default:l(()=>[e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.hobby,"onUpdate:modelValue":a[13]||(a[13]=r=>t.value.hobby=r),label:"Hobi (selain olahraga)",placeholder:"What do you like to do?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.sport,"onUpdate:modelValue":a[14]||(a[14]=r=>t.value.sport=r),label:"Olahraga yang disukai",placeholder:"What is your favorite sport?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(s,{modelValue:t.value.ambition,"onUpdate:modelValue":a[15]||(a[15]=r=>t.value.ambition=r),label:"Cita-cita",placeholder:"What do you want to be?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(m,{modelValue:t.value.role,"onUpdate:modelValue":a[16]||(a[16]=r=>t.value.role=r),label:"Peran",items:["Content Creator","Entrepreneur","Influencer","Developer"],placeholder:"Select Role"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"8"},{default:l(()=>[e(m,{modelValue:t.value.skills,"onUpdate:modelValue":a[17]||(a[17]=r=>t.value.skills=r),label:"Keahlian",placeholder:"Select Skills",multiple:"",items:["Design","Editing","Copywriting","Photography","HTML","CSS","JavaScript","React","NodeJS","MongoDB","MySQL","Python"]},null,8,["modelValue"])]),_:1}),o(p)(4,t.value.id).value?(k(),w(u,{key:0,cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>a[22]||(a[22]=[h(" Save changes ")])),_:1}),e(A,{color:"secondary",variant:"tonal",type:"reset",onClick:H(v,["prevent"])},{default:l(()=>a[23]||(a[23]=[h(" Reset ")])),_:1})]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(c,{"is-dialog-visible":i.value,"onUpdate:isDialogVisible":a[18]||(a[18]=r=>i.value=r),"confirmation-question":"Are you sure you want to deactivate your account?","confirm-title":"Deactivated!","confirm-msg":"Your account has been deactivated successfully.","cancel-title":"Cancelled","cancel-msg":"Account Deactivation Cancelled!"},null,8,["is-dialog-visible"])],64)}}},Oe={__name:"AccountSettingsOthers",props:{student:Object},emits:["userData"],setup(N,{emit:P}){const C=P,{hasRoleAndAccess:d}=W(),p=_({}),x=_();Z(()=>N.student,i=>{i&&(p.value=JSON.parse(JSON.stringify(i)))},{immediate:!0});const S=()=>{p.value=JSON.parse(JSON.stringify(N.student))},g=()=>{var i;d(3,"Profile")&&((i=x.value)==null||i.validate().then(({valid:t})=>{t&&(console.log("SUBMIT PAYLOAD",p.value),C("userData",{...p.value}))}))};return(i,t)=>{const y=Y;return k(),w(ee,{ref_key:"refForm",ref:x,onSubmit:H(g,["prevent"])},{default:l(()=>[e($,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Registration Data"},{default:l(()=>[e(M,null,{default:l(()=>[t[8]||(t[8]=U("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e($,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).registered,"onUpdate:modelValue":t[0]||(t[0]=v=>o(p).registered=v),placeholder:"2000",label:"Registered"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).email,"onUpdate:modelValue":t[1]||(t[1]=v=>o(p).email=v),placeholder:"john.doe@example.com",label:"Email"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).instagram,"onUpdate:modelValue":t[2]||(t[2]=v=>o(p).instagram=v),placeholder:"@john.doe",label:"Instagram"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).payment_category,"onUpdate:modelValue":t[3]||(t[3]=v=>o(p).payment_category=v),placeholder:"@john.doe",label:"Payment"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Graduation Data"},{default:l(()=>[e(M,null,{default:l(()=>[t[9]||(t[9]=U("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e($,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).graduation,"onUpdate:modelValue":t[4]||(t[4]=v=>o(p).graduation=v),placeholder:"2000",label:"Graduated"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).next_school,"onUpdate:modelValue":t[5]||(t[5]=v=>o(p).next_school=v),placeholder:"Oxford University",label:"Next Place"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).next_school_address,"onUpdate:modelValue":t[6]||(t[6]=v=>o(p).next_school_address=v),placeholder:"United Kingdom",label:"Next Place Address"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(y,{modelValue:o(p).note,"onUpdate:modelValue":t[7]||(t[7]=v=>o(p).note=v),placeholder:"-",label:"Note"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(d)(3,"Profile").value?(k(),w(u,{key:0,class:"d-flex flex-wrap gap-4 mt-4",cols:"12"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>t[10]||(t[10]=[h(" Save changes ")])),_:1}),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:S},{default:l(()=>t[11]||(t[11]=[h(" Reset ")])),_:1})]),_:1})):R("",!0)]),_:1},512)}}};const $e={class:"d-flex align-end flex-wrap gap-3"},Fe={class:"invoice-list-search"},Be={class:"invoice-list-status"},Me={class:"mb-0"},Re={class:"mb-0"},Je={class:"mb-0"},je={class:"d-flex align-center"},Le={key:1},Ee={class:"d-flex flex-column"},ze={class:"text-sm text-disabled"},Ke={key:1},Ge={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},He={class:"text-sm text-disabled mb-0"},We={__name:"BillingHistoryTable",async setup(N){let P,C;const d=_(""),p=_(),x=_([]),S=_(10),g=_(1),i=_(),t=_(),y=m=>{var c,r;g.value=m.page,i.value=(c=m.sortBy[0])==null?void 0:c.key,t.value=(r=m.sortBy[0])==null?void 0:r.order},v=[{title:"#ID",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:V,execute:I}=([P,C]=de(()=>G(be("/apps/invoice",{query:{q:d,status:p,itemsPerPage:S,page:g,sortBy:i,orderBy:t}}))),P=await P,C(),P),J=B(()=>{var m;return(m=V.value)==null?void 0:m.invoices}),O=B(()=>{var m;return(m=V.value)==null?void 0:m.totalInvoices}),b=(m,c)=>m===c?{status:"Unpaid",chip:{color:"error"}}:m===0?{status:"Paid",chip:{color:"success"}}:{status:m,chip:{variant:"text"}},a=m=>m==="Partial Payment"?{variant:"warning",icon:"tabler-circle-half-2"}:m==="Paid"?{variant:"success",icon:"tabler-circle-check"}:m==="Downloaded"?{variant:"info",icon:"tabler-download"}:m==="Draft"?{variant:"secondary",icon:"tabler-device-floppy"}:m==="Sent"?{variant:"primary",icon:"tabler-mail"}:m==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},s=B(()=>m=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:m}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),f=async m=>{await ge(`/apps/invoice/${m}`,{method:"DELETE"}),I()};return(m,c)=>{const r=X,K=Y,le=oe("RouterLink"),ae=oe("IconBtn"),ue=ve;return o(J)?(k(),w(z,{key:0,id:"invoice-list"},{default:l(()=>[e(M,{class:"d-flex align-center flex-wrap gap-3"},{default:l(()=>[e(A,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"},class:"me-3"},{default:l(()=>c[7]||(c[7]=[h(" Create invoice ")])),_:1}),e(r,{modelValue:o(S),"onUpdate:modelValue":c[0]||(c[0]=n=>T(S)?S.value=n:null),items:[5,10,20,25,50],style:{"max-inline-size":"6.25rem"}},null,8,["modelValue"]),e(ye),U("div",$e,[U("div",Fe,[e(K,{modelValue:o(d),"onUpdate:modelValue":c[1]||(c[1]=n=>T(d)?d.value=n:null),placeholder:"Search Invoice",density:"compact",class:"me-3"},null,8,["modelValue"])]),U("div",Be,[e(r,{modelValue:o(p),"onUpdate:modelValue":c[2]||(c[2]=n=>T(p)?p.value=n:null),density:"compact",placeholder:"Select Status",clearable:"","clear-icon":"tabler-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"],style:{"inline-size":"12rem"}},null,8,["modelValue"])])])]),_:1}),e(L),e(o(_e),{modelValue:o(x),"onUpdate:modelValue":c[4]||(c[4]=n=>T(x)?x.value=n:null),"items-per-page":o(S),"onUpdate:itemsPerPage":c[5]||(c[5]=n=>T(S)?S.value=n:null),page:o(g),"onUpdate:page":c[6]||(c[6]=n=>T(g)?g.value=n:null),"show-select":"","items-length":o(O),headers:v,items:o(J),class:"text-no-wrap","onUpdate:options":y},{"column.trending":l(()=>[e(F,{size:"22",icon:"tabler-trending-up"})]),"item.id":l(({item:n})=>[e(le,{to:{name:"apps-invoice-preview-id",params:{id:n.id}}},{default:l(()=>[h(" #"+D(n.id),1)]),_:2},1032,["to"])]),"item.trending":l(({item:n})=>[e(Se,null,{activator:l(({props:te})=>[e(Q,q({size:30},te,{color:a(n.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e(F,{size:20,icon:a(n.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[U("p",Me,D(n.invoiceStatus),1),U("p",Re," Balance: "+D(n.balance),1),U("p",Je," Due date: "+D(n.dueDate),1)]),_:2},1024)]),"item.client":l(({item:n})=>[U("div",je,[e(Q,{size:"38",color:n.avatar.length?void 0:a(n.invoiceStatus).variant,variant:n.avatar.length?void 0:"tonal",class:"me-3"},{default:l(()=>[n.avatar.length?(k(),w(Ue,{key:0,src:n.avatar},null,8,["src"])):(k(),E("span",Le,D(("avatarText"in m?m.avatarText:o(fe))(n.client.name)),1))]),_:2},1032,["color","variant"]),U("div",Ee,[e(le,{class:"font-weight-medium mb-0 text-link",to:{name:"pages-user-profile-tab",params:{tab:"profile"}}},{default:l(()=>[h(D(n.client.name),1)]),_:2},1024),U("span",ze,D(n.client.companyEmail),1)])])]),"item.total":l(({item:n})=>[h(" $"+D(n.total),1)]),"item.date":l(({item:n})=>[h(D(n.issuedDate),1)]),"item.balance":l(({item:n})=>[typeof b(n.balance,n.total).status=="string"?(k(),w(xe,{key:0,color:b(n.balance,n.total).chip.color,size:"small",label:""},{default:l(()=>[h(D(b(n.balance,n.total).status),1)]),_:2},1032,["color"])):(k(),E("span",Ke,D(Number(b(n.balance,n.total).status)>0?`$${b(n.balance,n.total).status}`:`-$${Math.abs(Number(b(n.balance,n.total).status))}`),1))]),"item.actions":l(({item:n})=>[e(ae,{onClick:te=>f(n.id)},{default:l(()=>[e(F,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(ae,{to:{name:"apps-invoice-preview-id",params:{id:n.id}}},{default:l(()=>[e(F,{icon:"tabler-eye"})]),_:2},1032,["to"]),e(ue,{"menu-list":o(s)(n.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:l(()=>[e(L),U("div",Ge,[U("p",He,D(o(Ve)({page:o(g),itemsPerPage:o(S)},o(O))),1),e(he,{modelValue:o(g),"onUpdate:modelValue":c[3]||(c[3]=n=>T(g)?g.value=n:null),length:Math.ceil(o(O)/o(S)),"total-visible":m.$vuetify.display.xs?1:Math.ceil(o(O)/o(S))},{prev:l(n=>[e(A,q({variant:"tonal",color:"default"},n,{icon:!1}),{default:l(()=>c[8]||(c[8]=[h(" Previous ")])),_:2},1040)]),next:l(n=>[e(A,q({variant:"tonal",color:"default"},n,{icon:!1}),{default:l(()=>c[9]||(c[9]=[h(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["modelValue","items-per-page","page","items-length","items"]),e(L)]),_:1})):R("",!0)}}};const Ye={__name:"AccountSettingsParents",props:{student:Object},emits:["userData"],setup(N,{emit:P}){const C=P;W();const d=_({}),p=_();Z(()=>N.student,g=>{g&&(d.value=JSON.parse(JSON.stringify(g)))},{immediate:!0}),_(),_(!1);const x=()=>{d.value=JSON.parse(JSON.stringify(N.student))},S=()=>{var g;(g=p.value)==null||g.validate().then(({valid:i})=>{i&&(console.log("SUBMIT PAYLOAD",d.value),C("userData",{...d.value}))})};return(g,i)=>{const t=Y,y=se,v=X;return k(),w($,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(z,{title:"Parents Data"},{default:l(()=>[e(M,null,{default:l(()=>[e(ee,{ref_key:"refForm",ref:p,onSubmit:H(S,["prevent"])},{default:l(()=>[e($,null,{default:l(()=>[e(u,{md:"4",cols:"12"},{default:l(()=>[e(t,{modelValue:o(d).father,"onUpdate:modelValue":i[0]||(i[0]=V=>o(d).father=V),placeholder:"John Doe",label:"Father Name"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(y,{modelValue:o(d).father_birth,"onUpdate:modelValue":i[1]||(i[1]=V=>o(d).father_birth=V),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(v,{modelValue:o(d).father_note,"onUpdate:modelValue":i[2]||(i[2]=V=>o(d).father_note=V),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(t,{modelValue:o(d).mother,"onUpdate:modelValue":i[3]||(i[3]=V=>o(d).mother=V),placeholder:"Maemunah",label:"Mother Name"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(y,{modelValue:o(d).mother_birth,"onUpdate:modelValue":i[4]||(i[4]=V=>o(d).mother_birth=V),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(v,{modelValue:o(d).mother_note,"onUpdate:modelValue":i[5]||(i[5]=V=>o(d).mother_note=V),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(t,{modelValue:o(d).phone,"onUpdate:modelValue":i[6]||(i[6]=V=>o(d).phone=V),placeholder:"+62 888 1234 5678",label:"Phone Number"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(t,{modelValue:o(d).job,"onUpdate:modelValue":i[7]||(i[7]=V=>o(d).job=V),placeholder:"Software Engineer",label:"Job Title"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(v,{modelValue:o(d).income,"onUpdate:modelValue":i[8]||(i[8]=V=>o(d).income=V),label:"Income",items:["< 5 juta","5 - 10 juta","10 - 20 juta","20 juta >"],placeholder:"Select Income"},null,8,["modelValue"])]),_:1}),g.hasRoleOrTeacher(4,o(d).id).value?(k(),w(u,{key:0,cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(A,{type:"submit"},{default:l(()=>i[9]||(i[9]=[h(" Save changes ")])),_:1}),e(A,{type:"reset",color:"secondary",variant:"tonal",onClick:x},{default:l(()=>i[10]||(i[10]=[h(" Reset ")])),_:1})]),_:1})):R("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(We)]),_:1})]),_:1})}}},ta={__name:"[tab]",setup(N){const{currentUser:P,hasRoleOrStudent:C}=W(),d=me(),p=B({get:()=>d.params.tab,set:()=>d.params.tab}),x=B(()=>d.params.id),S=_(null),g=_(!1),i=_(null),t=B(()=>{var a;return x.value==((a=P.value)==null?void 0:a.admin_student_id)}),y=_(!1),v=_(""),V=_("primary"),I=(a,s="primary")=>{v.value=a,V.value=s,y.value=!0,setTimeout(()=>{y.value=!1},1e4)};pe(async()=>{g.value=!0,i.value=null;try{const a=await G(`/public/student/${x.value}`);S.value=a.data.value.data??null}catch(a){i.value=a,console.error("Failed to fetch student:",a)}finally{g.value=!1}});const O=[{title:"Account",icon:"tabler-users",tab:"account"},{title:"Parents",icon:"tabler-file-text",tab:"parents"},{title:"Others data",icon:"tabler-link",tab:"others"},{title:"Roles",icon:"tabler-bell",tab:"roles"},{title:"Security",icon:"tabler-lock",tab:"security"}],b=async(a,s)=>{var f;if(!C(4,a).value){I("You are not authorized to update this student","error");return}try{const{data:m,response:c}=await G(`/students/${a}`,{method:"PATCH",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Accept:"application/json"}});c.value.ok?I("Data berhasil diperbarui","success"):(I(c.value.statusText||"Gagal memperbarui data","error"),console.error("Update error response:",c.value))}catch(m){console.error("Update student error:",((f=m==null?void 0:m.data)==null?void 0:f.errors)||m),I(m.message||"Gagal memperbarui data","error")}};return(a,s)=>(k(),E("div",null,[e(Ae,{modelValue:o(p),"onUpdate:modelValue":s[0]||(s[0]=f=>T(p)?p.value=f:null),class:"v-tabs-pill"},{default:l(()=>[(k(),E(re,null,ce(O,f=>e(Pe,{key:f.icon,value:f.tab,to:{name:"profile-student-id-tab",params:{tab:f.tab}}},{default:l(()=>[e(F,{size:"20",start:"",icon:f.icon},null,8,["icon"]),h(" "+D(f.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"]),e(we,{modelValue:o(y),"onUpdate:modelValue":s[2]||(s[2]=f=>T(y)?y.value=f:null),location:"center",variant:"tonal",transition:"scale-transition",color:o(V),class:"text-center"},{actions:l(()=>[e(A,{color:o(V),onClick:s[1]||(s[1]=f=>y.value=!1)},{default:l(()=>s[7]||(s[7]=[h(" Close ")])),_:1},8,["color"])]),default:l(()=>[h(D(o(v))+" ",1)]),_:1},8,["modelValue","color"]),e(Ne,{modelValue:o(p),"onUpdate:modelValue":s[6]||(s[6]=f=>T(p)?p.value=f:null),class:"mt-6 disable-tab-transition",touch:!1},{default:l(()=>[e(j,{value:"account"},{default:l(()=>[e(Ie,{student:o(S),onUserData:s[3]||(s[3]=f=>b(o(x),f))},null,8,["student"])]),_:1}),e(j,{value:"parents"},{default:l(()=>[e(Ye,{student:o(S),onUserData:s[4]||(s[4]=f=>b(o(x),f))},null,8,["student"])]),_:1}),e(j,{value:"others"},{default:l(()=>[e(Oe,{student:o(S),onUserData:s[5]||(s[5]=f=>b(o(x),f))},null,8,["student"])]),_:1}),e(j,{value:"roles"},{default:l(()=>[o(t)?(k(),w(ke,{key:0})):R("",!0)]),_:1}),e(j,{value:"security"},{default:l(()=>[o(t)?(k(),w(De,{key:0})):R("",!0)]),_:1})]),_:1},8,["modelValue"])]))}};export{ta as default};
