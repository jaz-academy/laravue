import{_ as T}from"./AppSelect-0bbe1a5c.js";import{_ as H}from"./AppDateTimePicker-a90ff731.js";import{_ as h}from"./AppTextField-3c315d47.js";import{V as L}from"./VNodeRenderer-55b91c89.js";import{r as w,be as k,w as x,aY as j,a as M,o as b,f as F,e as o,d,b as e,n as i,a0 as C,H as O,c as A,I as z,x as _,v as g,z as W,F as Y,i as G,ai as J}from"./main-dd895efc.js";import{V as R}from"./VRow-401a9eed.js";import{V as v}from"./VCol-5badd7d4.js";import{V as S}from"./VCard-521d2f55.js";import{u as $}from"./useApi-d559f13e.js";import{V as B}from"./VCardText-8cb57704.js";import{V as D}from"./VDivider-3f5c8926.js";const K={class:"pa-5 flex-grow-1"},Q={class:"d-flex flex-column justify-space-between border-s pa-1"},X={__name:"financeItemEdit",props:{id:{type:Number,required:!0},data:{type:Object,required:!0}},emits:["remove","update:data"],setup(U,{emit:I}){const u=U,c=I,a=w(structuredClone(k(u.data)));let m=!1;x(a,n=>{m||c("update:data",n)},{deep:!0}),x(()=>u.data,n=>{m=!0,a.value=structuredClone(k(n)),j(()=>{m=!1})},{deep:!0});const N=()=>{c("remove",u.id)};return(n,r)=>{const y=M("IconBtn");return b(),F(S,{flat:"",border:"",class:"d-flex flex-row"},{default:o(()=>[d("div",K,[e(R,null,{default:o(()=>[e(v,{cols:"12",sm:"8"},{default:o(()=>[e(h,{modelValue:i(a).description,"onUpdate:modelValue":r[0]||(r[0]=V=>i(a).description=V),label:"Description",placeholder:"Write Description"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"4"},{default:o(()=>[e(h,{modelValue:i(a).amount,"onUpdate:modelValue":r[1]||(r[1]=V=>i(a).amount=V),label:"Amount",placeholder:"Amount"},null,8,["modelValue"])]),_:1})]),_:1})]),d("div",Q,[e(y,{onClick:N},{default:o(()=>[e(C,{size:"20",icon:"tabler-x"})]),_:1}),e(y,null,{default:o(()=>[e(C,{size:"20",icon:"tabler-settings"})]),_:1})])]),_:1})}}},Z={key:0,class:"ma-sm-4"},ee={class:"d-flex align-center mb-6"},ae={class:"font-weight-bold text-capitalize text-h4"},te={class:"mb-0"},le={class:"my-2"},oe={class:"mb-0"},se={class:"mt-4 ma-sm-4"},ne={class:"d-flex align-center font-weight-medium justify-sm-end text-xl mb-3"},de={class:"mt-6 ms-sm-4"},he={__name:"financeEditable",props:{invoiceNumber:String,data:{type:null,required:!0}},emits:["push","remove","update:data"],setup(U,{emit:I}){const u=U,c=I,a=w(structuredClone(k(u.data)));let m=!1;x(a,l=>{m||c("update:data",l)},{deep:!0}),x(()=>u.data,l=>{m=!0,a.value=structuredClone(k(l)),j(()=>{m=!1})},{deep:!0});const N=(l,t)=>{a.value.financeItem[l]=t},n=w([]),r=w([]),y=async()=>{const{data:l,error:t}=await $("/schools");t.value?console.log(t.value):n.value=l.value},V=async()=>{const{data:l,error:t}=await $("/accounts");t.value?console.log(t.value):r.value=l.value.data.filter(p=>p.unit!=="Pembayaran")};O(()=>{V(),y()}),x(()=>a.value.header.finance_account_id,(l,t)=>{if(!(l===t&&a.value.header.remark)&&l){const p=r.value.find(s=>s.id===l);p&&(a.value.header.remark=p.description)}});const q=()=>{c("push")},E=l=>{c("remove",l)};return(l,t)=>{const p=T;return b(),F(S,null,{default:o(()=>[e(B,{class:"d-flex flex-wrap justify-space-between gap-y-5 flex-column flex-sm-row"},{default:o(()=>{var s,f;return[(f=(s=n.value)==null?void 0:s.data)!=null&&f.length?(b(),A("div",Z,[d("div",ee,[e(i(L),{nodes:i(z).app.logo,class:"me-3"},null,8,["nodes"]),d("h6",ae,_(i(z).app.title),1)]),d("p",te,[g(_(n.value.data[0].name)+" âœª ",1),d("strong",null,_(n.value.data[0].organization),1)]),d("p",le,_(n.value.data[0].address),1),d("p",oe,[e(C,{icon:"tabler-phone",class:"me-2"}),g(" "+_(n.value.data[0].phone)+" ",1),e(C,{icon:"tabler-mail",class:"mx-2"}),g(" "+_(n.value.data[0].email),1)])])):W("",!0),d("div",se,[d("h6",ne,[d("span",null,[e(h,{"model-value":u.invoiceNumber,disabled:"",prefix:"#",density:"compact",style:{"inline-size":"9.5rem"}},null,8,["model-value"])])])])]}),_:1}),e(D),e(B,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:o(()=>[e(R,null,{default:o(()=>[e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(H,{modelValue:a.value.header.date,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.header.date=s),label:"Date",density:"compact"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(h,{modelValue:a.value.header.vendor,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.header.vendor=s),label:"Vendor",density:"compact"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{modelValue:a.value.header.finance_account_id,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.header.finance_account_id=s),items:r.value,"item-title":"number","item-value":"id",label:"Account"},null,8,["modelValue","items"])]),_:1}),e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(h,{modelValue:a.value.header.remark,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.header.remark=s),label:"Remark",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D),e(B,{class:"add-products-form"},{default:o(()=>[(b(!0),A(Y,null,G(a.value.financeItem,(s,f)=>(b(),A("div",{key:f,class:"my-4 ma-sm-4"},[e(X,{id:f,data:s,"onUpdate:data":P=>N(f,P),onRemove:E},null,8,["id","data","onUpdate:data"])]))),128)),d("div",de,[e(J,{onClick:q},{default:o(()=>t[4]||(t[4]=[g(" Add Item ")])),_:1})])]),_:1}),e(D)]),_:1})}}};export{he as _};
