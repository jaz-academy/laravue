import{p as Se}from"./formatters-62ab02fc.js";import{_ as ve}from"./AppTextField-f5d6ff2c.js";import{_ as P}from"./AppSelect-14d7844a.js";import{u as Ue}from"./helpers-6d9b37dc.js";import{f as ke,p as Pe,a as Ie,b as Ae}from"./fetchProjectData-964db793.js";import{r as q}from"./validators-d3014da7.js";import{f as Oe,t as $e}from"./fetchTeacherData-9da471a2.js";import{$ as je,H as ge,r as f,bc as Me,w as ne,o as k,f as y,e as s,b as a,n as t,aU as T,a$ as Be,d as v,ai as N,v as b,x as _,aY as qe,a5 as Y,a as de,c as te,F as ue,i as me,z as $,a0 as K,y as Ne,s as ae}from"./main-2161dd16.js";import{_ as Fe}from"./AppDateTimePicker-672425ef.js";import{_ as ze}from"./AppTextarea-17f4cf4f.js";import{_ as Ye}from"./AppDrawerHeaderSection-a5ed1e86.js";import{f as Le,s as Re}from"./fetchStudentData-545559e8.js";import{P as Ee}from"./vue3-perfect-scrollbar.esm-9b1bba6a.js";import{V as L}from"./VDivider-d54b4fba.js";import{V as se}from"./VCard-79d2de72.js";import{V as oe}from"./VCardText-285783bc.js";import{V as He}from"./VForm-5e089130.js";import{V as R}from"./VRow-cdbc520d.js";import{V as g}from"./VCol-b6fcabf3.js";import{V as Ve}from"./VRating-42764a83.js";import{V as Ge}from"./VNavigationDrawer-e97496f7.js";import{p as We}from"./paginationMeta-4ad053a4.js";import{a as Je}from"./no-profile-4221a4a6.js";import{u as ce}from"./useApi-86e1ac25.js";import{_ as Qe}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Xe}from"./VAlert-9cd60a31.js";import{V as pe}from"./VChip-e9cc1678.js";import{V as Z}from"./VAvatar-b27cc665.js";import{V as Ke}from"./VSpacer-dfbd9535.js";import{V as Ze}from"./VDataTableServer-fbd893ba.js";import{V as fe}from"./VImg-4ff19814.js";import{V as et}from"./VTooltip-faa2bbd0.js";import{V as tt}from"./VMenu-3fd806c1.js";import{V as at,a as le}from"./VList-1c9f4772.js";import{V as lt}from"./VPagination-6b4a0230.js";import"./form-2a954a63.js";import"./VTextField-26cefffb.js";/* empty css                   */import"./VCounter-3b8f1b94.js";import"./VField-1461cc01.js";import"./easing-9f15041e.js";import"./VInput-1e0d7c59.js";import"./forwardRefs-8348545e.js";import"./VSelect-3578ba37.js";import"./dialog-transition-d45d256d.js";import"./VOverlay-f2354874.js";import"./lazy-ac5cead8.js";import"./scopeId-56a18a60.js";import"./VCheckboxBtn-2e361082.js";import"./VSelectionControl-b935b5f8.js";import"./ssrBoot-ee409192.js";import"./VDataTable-6895ccff.js";import"./VTable-8e175740.js";import"./filter-f609f4be.js";const st={class:"d-flex justify-start"},ot={__name:"AddTasks",props:{isDrawerOpen:{type:Boolean,required:!0},mode:{type:String,default:"add"},taskData:{type:Object,default:()=>({})}},emits:["update:isDrawerOpen","taskData"],setup(re,{emit:I}){var E;const r=re,j=I,x=je("userData");ge(async()=>{await Le(),await ke(),await Oe()});const C=f(),M=f(!1),n=Me({project_plan_id:"",student_ids:(E=x.value)!=null&&E.admin_student_id?[x.value.admin_student_id]:[],semester:"",name:"",description:"",date:"",status:"",media:"",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""});ne(()=>[r.taskData,r.mode],()=>{var m;r.mode==="edit"&&r.taskData?Object.assign(n,{project_plan_id:r.taskData.project_plan_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:r.taskData.name||"",description:r.taskData.description||"",date:r.taskData.date||"",status:r.taskData.link!==""?"Completed":"In Progress",media:r.taskData.media||"",embed:r.taskData.embed||"",link:r.taskData.link||"",accepted:r.taskData.accepted||0,rate:r.taskData.rate||"",review:r.taskData.review||"",admin_teacher_id:r.taskData.admin_teacher_id||""}):r.mode==="review"&&r.taskData?Object.assign(n,{project_plan_id:r.taskData.project_plan_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:r.taskData.name||"",description:r.taskData.description||"",date:r.taskData.date||"",status:r.taskData.accepted===1?"Completed":"In Progress",media:r.taskData.media||"",embed:r.taskData.embed||"",link:r.taskData.link||"",accepted:r.taskData.accepted||0,rate:r.taskData.rate||"",review:r.taskData.review||"",admin_teacher_id:r.taskData.admin_teacher_id||""}):r.mode==="duplicate"&&r.taskData?Object.assign(n,{project_plan_id:"",admin_student_id:r.taskData.admin_student_id||"",student_ids:r.taskData.students.map(i=>i.id),semester:r.taskData.semester||"",name:"",description:r.taskData.description||"",date:new Date().toLocaleDateString("en-CA"),status:"In Progress",media:r.taskData.media||"Instagram",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""}):Object.assign(n,{project_plan_id:"",admin_student_id:((m=x.value)==null?void 0:m.admin_student_id)||"",student_ids:[],semester:"",name:"",description:"",date:new Date().toLocaleDateString("en-CA"),status:"In Progress",media:"Instagram",embed:"",link:"",accepted:0,rate:"",review:"",admin_teacher_id:""})},{immediate:!0}),ne(()=>r.isDrawerOpen,m=>{var i,w;m||((i=C.value)==null||i.reset(),(w=C.value)==null||w.resetValidation())});const S=m=>{j("update:isDrawerOpen",m)},U=()=>{var m,i;(m=C.value)==null||m.reset(),(i=C.value)==null||i.resetValidation()},A=()=>{var m;(m=C.value)==null||m.validate().then(({valid:i})=>{if(r.mode!=="review"&&!i)return;const w={...n};r.mode==="edit"||r.mode==="review"?(w.id=r.taskData.id,j("taskData",{action:"update",data:w})):j("taskData",{action:"create",data:w}),j("update:isDrawerOpen",!1),qe(U)})};return(m,i)=>{const w=Ye,D=ve,h=ze,F=Fe;return k(),y(Ge,{"model-value":r.isDrawerOpen,temporary:"",location:"end",width:"370",class:"category-navigation-drawer scrollable-content","onUpdate:modelValue":S},{default:s(()=>[a(w,{title:r.mode==="edit"?"Edit Task":r.mode==="duplicate"?"Duplicate Task":r.mode==="review"?"Review Task":"Add New Task",onCancel:i[0]||(i[0]=d=>m.$emit("update:isDrawerOpen",!1))},null,8,["title"]),a(L),a(t(Ee),{options:{wheelPropagation:!1}},{default:s(()=>[a(se,{flat:""},{default:s(()=>[a(oe,null,{default:s(()=>[a(t(He),{ref_key:"refVForm",ref:C,modelValue:t(M),"onUpdate:modelValue":i[14]||(i[14]=d=>T(M)?M.value=d:null),onSubmit:Be(A,["prevent"])},{default:s(()=>[r.mode!=="review"?(k(),y(R,{key:0,class:"g-4"},{default:s(()=>[a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).project_plan_id,"onUpdate:modelValue":i[1]||(i[1]=d=>t(n).project_plan_id=d),placeholder:"Select Project Plan",label:"Project Plan",rules:["requiredValidator"in m?m.requiredValidator:t(q)],items:t(Pe).filter(d=>d.is_active&&new Date(d.end_date)>=new Date),"item-title":"theme","item-value":"id"},null,8,["modelValue","rules","items"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).student_ids,"onUpdate:modelValue":i[2]||(i[2]=d=>t(n).student_ids=d),rules:["requiredValidator"in m?m.requiredValidator:t(q)],items:t(Re),"item-title":"nickname","item-value":"id",placeholder:"Select Creators",label:"Select Creators",chips:"",multiple:"","closable-chips":""},null,8,["modelValue","rules","items"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).semester,"onUpdate:modelValue":i[3]||(i[3]=d=>t(n).semester=d),placeholder:"Select Semester",label:"Semester",rules:["requiredValidator"in m?m.requiredValidator:t(q)],items:[1,2,3,4,5,6]},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(D,{modelValue:t(n).name,"onUpdate:modelValue":i[4]||(i[4]=d=>t(n).name=d),label:"Write Title",rules:["requiredValidator"in m?m.requiredValidator:t(q)],placeholder:"Task Title"},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(h,{modelValue:t(n).description,"onUpdate:modelValue":i[5]||(i[5]=d=>t(n).description=d),label:"Description",placeholder:"Write Description","auto-grow":""},null,8,["modelValue"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(F,{modelValue:t(n).date,"onUpdate:modelValue":i[6]||(i[6]=d=>t(n).date=d),label:"Date",placeholder:"Select date"},null,8,["modelValue"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).status,"onUpdate:modelValue":i[7]||(i[7]=d=>t(n).status=d),rules:["requiredValidator"in m?m.requiredValidator:t(q)],placeholder:"Select Status",label:"Status",items:["In Progress","On Hold","Completed"]},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).media,"onUpdate:modelValue":i[8]||(i[8]=d=>t(n).media=d),rules:["requiredValidator"in m?m.requiredValidator:t(q)],placeholder:"Select Media",label:"Media",items:["Instagram","TikTok","YouTube","Google Drive"]},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(h,{modelValue:t(n).link,"onUpdate:modelValue":i[9]||(i[9]=d=>t(n).link=d),label:"Link",placeholder:"Paste Link","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})):(k(),y(R,{key:1},{default:s(()=>[a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).admin_teacher_id,"onUpdate:modelValue":i[10]||(i[10]=d=>t(n).admin_teacher_id=d),label:"Mentor",placeholder:"Select Mentor",items:"teachers"in m?m.teachers:t($e),"item-title":"nickname","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(P,{modelValue:t(n).accepted,"onUpdate:modelValue":i[11]||(i[11]=d=>t(n).accepted=d),label:"Accepted",placeholder:"Not Accepted",items:[{text:"Accepted",value:1},{text:"Not Accepted",value:0}],"item-title":"text","item-value":"value"},null,8,["modelValue"])]),_:1}),a(g,{cols:"12",class:"text-center"},{default:s(()=>[a(Ve,{modelValue:t(n).rate,"onUpdate:modelValue":i[12]||(i[12]=d=>t(n).rate=d),"half-increments":"",hover:""},null,8,["modelValue"]),a(h,{modelValue:t(n).review,"onUpdate:modelValue":i[13]||(i[13]=d=>t(n).review=d),placeholder:"Write your review...",rows:3},null,8,["modelValue"])]),_:1})]),_:1})),a(R,{class:"mt-4"},{default:s(()=>[a(g,{cols:"12"},{default:s(()=>[v("div",st,[a(N,{type:"submit",color:"primary",class:"me-4"},{default:s(()=>[b(_(r.mode==="edit"?"Update":"Add"),1)]),_:1}),a(N,{color:"error",variant:"tonal",onClick:U},{default:s(()=>i[15]||(i[15]=[b(" Discard ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const rt={class:"d-flex flex-column gap-y-1"},it={class:"text-body-1 font-weight-medium text-capitalize"},nt={class:"text-h4 my-1"},dt={class:"d-flex"},ut={class:"me-2 text-disabled text-no-wrap"},mt={class:"d-flex flex-wrap gap-4 mx-5"},ct={class:"d-flex align-center"},pt={class:"d-flex gap-4 flex-wrap align-center"},ft={class:"d-flex align-center gap-x-2"},vt={class:"d-flex flex-column"},kt={class:"text-body-1 font-weight-medium"},gt={class:"text-sm text-disabled"},Vt={class:"v-avatar-group me-2"},_t={class:"text-xs"},bt={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},yt={class:"text-sm text-medium-emphasis mb-0"},Dt={__name:"tasks",setup(re){const{hasRole:I,currentUser:r,hasRoleOrTeacher:j}=Ue();ge(async()=>{await ke()});const x=f(!1),C=f(""),M=f("primary"),n=(l,e="primary")=>{C.value=l,M.value=e,x.value=!0,setTimeout(()=>{x.value=!1},1e4)},S=f(!1),U=f("add"),A=f({}),E=l=>{A.value={...l},U.value="edit",S.value=!0},m=l=>{A.value={...l},U.value="review",S.value=!0},i=l=>{A.value=l,U.value="duplicate",S.value=!0},w=Y(()=>{const l=Y(()=>Ie.value||[]);return[{title:"Instagram",value:l.value.filter(e=>e.media==="Instagram").length,icon:"tabler-brand-instagram",desc:`${l.value.filter(e=>e.media==="Instagram"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media==="Instagram").length,c=l.value.filter(u=>u.media==="Instagram"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"TikTok",value:l.value.filter(e=>e.media=="TikTok").length,icon:"tabler-brand-tiktok",desc:`${l.value.filter(e=>e.media=="TikTok"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media=="TikTok").length,c=l.value.filter(u=>u.media=="TikTok"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"YouTube",value:l.value.filter(e=>e.media==="YouTube").length,icon:"tabler-brand-youtube",desc:`${l.value.filter(e=>e.media==="YouTube"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media==="YouTube").length,c=l.value.filter(u=>u.media==="YouTube"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()},{title:"Others",value:l.value.filter(e=>e.media!=="Instagram"&&e.media!=="TikTok"&&e.media!=="YouTube").length,icon:"tabler-world",desc:`${l.value.filter(e=>e.media!=="Instagram"&&e.media!=="TikTok"&&e.media!=="YouTube"&&e.accepted=="0").length} unchecked`,change:(()=>{const e=l.value.filter(u=>u.media!=="Instagram"&&u.media!=="TikTok"&&u.media!=="YouTube").length,c=l.value.filter(u=>u.media!=="Instagram"&&u.media!=="TikTok"&&u.media!=="YouTube"&&u.accepted=="1").length;return e?(c/e*100).toFixed(1):0})()}]}),D=f(10),h=f(1),F=f(),d=f(),H=f([]),G=f(),W=f(),J=f(),Q=f(""),_e=l=>{var e;h.value=l.page,D.value=l.itemsPerPage,(e=l.sortBy)!=null&&e.length?(F.value=l.sortBy[0].key,d.value=l.sortBy[0].order):(F.value=null,d.value=null),O()},O=async()=>{var e;const l={admin_student_id:((e=r.value)==null?void 0:e.admin_student_id)||"",search:Q.value||"",status:G.value||"",media:W.value||"",accepted:J.value||"",perPage:D.value,page:h.value,sortBy:F.value||"",orderBy:d.value||""};try{const c=await Ae(l);console.log("ðŸ“¦ FETCHING with:",l,c),H.value=c}catch(c){console.error("Error fetching tasks:",c.message)}},be=Y(()=>{var l;return((l=H.value)==null?void 0:l.tasks)||[]}),X=Y(()=>{var l;return((l=H.value)==null?void 0:l.totalTasks)||0}),ye=Y(()=>{var c,u;const l=((u=(c=H.value)==null?void 0:c.tasks)==null?void 0:u.map(V=>V.media))||[];return[...new Set(l.filter(Boolean))].map(V=>({title:V,value:V}))}),De=f([{title:"Completed",value:"Completed"},{title:"In Progress",value:"In Progress"},{title:"On Hold",value:"On Hold"}]),he=f([{title:"Accepted",value:"1"},{title:"Unchecked",value:"0"}]),we=[{title:"Task",key:"name"},{title:"Creators",key:"students",sortable:!1},{title:"Stars",key:"rate"},{title:"SMT",key:"semester"},{title:"ID",key:"id"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ie=l=>l=="Instagram"?{color:"primary",icon:"tabler-brand-instagram"}:l=="TikTok"?{color:"info",icon:"tabler-brand-tiktok"}:l=="YouTube"?{color:"error",icon:"tabler-brand-youtube"}:l=="Google Drive"?{color:"warning",icon:"tabler-brand-google"}:{color:"primary",icon:"tabler-world"},Te=l=>{if(l==="Completed")return{text:"Completed",color:"primary"};if(l==="In Progress")return{text:"In Progress",color:"warning"};if(l==="On Hold")return{text:"On Hold",color:"error"}},xe=async({action:l,data:e})=>{var u;const c={...e,accepted:e.accepted===""?"0":!!Number(e.accepted),rate:e.rate===""?0:Number(e.rate),admin_teacher_id:e.admin_teacher_id===""?null:Number(e.admin_teacher_id)};console.log("Sending taskData:",c,"action:",l);try{let V="/tasks",z="POST";l==="update"&&e.id&&(V=`/tasks/${e.id}`,z="PUT");const{data:o,response:p}=await ce(V,{method:z,body:JSON.stringify(c),headers:{"Content-Type":"application/json",Accept:"application/json"}});p.value.ok?(n(l==="create"?"Data berhasil ditambahkan":"Data berhasil diperbarui","success"),console.log("Task response:",o),O()):n(p.value.statusText||"Gagal menyimpan data","error")}catch(V){console.error("Task save error:",((u=V==null?void 0:V.data)==null?void 0:u.errors)||V),n(V.message||"Gagal menyimpan data","error")}},Ce=async l=>{try{confirm("Apakah kamu yakin ingin menghapus data ini?")&&(console.log("Deleting task with ID:",l),await ce(`/tasks/${l}`,{method:"DELETE"}),n("Data berhasil dihapus","success"),O())}catch(e){n(e.message||"Gagal menghapus data","error"),console.error(e)}};function ee(l){const e=l.reduce((c,u)=>(c.has(u.id)||c.set(u.id,u),c),new Map);return Array.from(e.values())}return(l,e)=>{const c=P,u=ve,V=de("RouterLink"),z=de("IconBtn");return k(),te("div",null,[a(se,{class:"mb-6"},{default:s(()=>[a(oe,null,{default:s(()=>[a(R,null,{default:s(()=>[(k(!0),te(ue,null,me(t(w),(o,p)=>(k(),y(g,{key:p,cols:"12",sm:"6",md:"3",class:"px-6 position-relative"},{default:s(()=>[v("div",{class:Ne(["d-flex justify-space-between",l.$vuetify.display.xs||l.$vuetify.display.sm&&p<2?"product-widget":""])},[v("div",rt,[v("div",it,_(o.title),1),v("h4",nt,_(o.value),1),v("div",dt,[v("div",ut,_(o.desc),1),o.change?(k(),y(pe,{key:0,label:"",color:o.change>0?"success":"error"},{default:s(()=>[b(_(("prefixWithPlus"in l?l.prefixWithPlus:t(Se))(o.change))+"% ",1)]),_:2},1032,["color"])):$("",!0)])]),a(Z,{variant:"tonal",rounded:"",size:"38"},{default:s(()=>[a(K,{icon:o.icon,size:"28"},null,8,["icon"])]),_:2},1024)],2),l.$vuetify.display.mdAndUp&&p<t(w).length-1||l.$vuetify.display.smOnly&&p%2===0?(k(),y(L,{key:0,vertical:"",inset:"",class:"position-absolute",style:{"block-size":"70%","inset-block-start":"50%","inset-inline-end":"0",transform:"translateY(-50%)"}})):$("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(Xe,{modelValue:t(x),"onUpdate:modelValue":e[0]||(e[0]=o=>T(x)?x.value=o:null),closable:"","close-label":"Close Alert",class:"mb-6",color:t(M)},{default:s(()=>[b(_(t(C)),1)]),_:1},8,["modelValue","color"]),a(se,{title:"Filters",class:"mb-6"},{default:s(()=>[a(oe,null,{default:s(()=>[a(R,null,{default:s(()=>[a(g,{cols:"12",sm:"4"},{default:s(()=>[a(c,{modelValue:t(G),"onUpdate:modelValue":[e[1]||(e[1]=o=>T(G)?G.value=o:null),O],placeholder:"Status",items:t(De),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),a(g,{cols:"12",sm:"4"},{default:s(()=>[a(c,{modelValue:t(W),"onUpdate:modelValue":[e[2]||(e[2]=o=>T(W)?W.value=o:null),O],placeholder:"Media",items:t(ye),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),a(g,{cols:"12",sm:"4"},{default:s(()=>[a(c,{modelValue:t(J),"onUpdate:modelValue":[e[3]||(e[3]=o=>T(J)?J.value=o:null),O],placeholder:"Checked",items:t(he),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),a(L,{class:"my-4"}),v("div",mt,[v("div",ct,[a(u,{modelValue:t(Q),"onUpdate:modelValue":e[4]||(e[4]=o=>T(Q)?Q.value=o:null),placeholder:"Search Tasks",density:"compact",style:{"inline-size":"200px"},class:"me-3",onInput:O},null,8,["modelValue"])]),a(Ke),v("div",pt,[a(c,{modelValue:t(D),"onUpdate:modelValue":e[5]||(e[5]=o=>T(D)?D.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),a(N,{variant:"tonal",color:"secondary","prepend-icon":"tabler-upload"},{default:s(()=>e[11]||(e[11]=[b(" Export ")])),_:1}),t(I)(2).value?(k(),y(N,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[6]||(e[6]=()=>{U.value="add",A.value={},S.value=!0})},{default:s(()=>e[12]||(e[12]=[b(" Add New Task ")])),_:1})):$("",!0)])]),a(L,{class:"mt-4"}),a(t(Ze),{"items-per-page":t(D),"onUpdate:itemsPerPage":e[8]||(e[8]=o=>T(D)?D.value=o:null),page:t(h),"onUpdate:page":e[9]||(e[9]=o=>T(h)?h.value=o:null),headers:we,"show-select":"",items:t(be),"items-length":t(X),class:"text-no-wrap","onUpdate:options":_e},{"item.name":s(({item:o})=>{var p;return[v("div",ft,[a(Z,{size:"30",variant:"tonal",color:(p=ie(o.media))==null?void 0:p.color,class:"me-2",rounded:""},{default:s(()=>{var B;return[a(K,{icon:(B=ie(o.media))==null?void 0:B.icon,size:"18"},null,8,["icon"])]}),_:2},1032,["color"]),v("div",vt,[v("span",kt,_(o.name.substring(0,30)),1),v("span",gt,_(o.project_plan.theme)+" @ "+_(o.media),1)])])]}),"item.students":s(({item:o})=>[v("div",Vt,[(k(!0),te(ue,null,me(ee(o.students).slice(0,3),p=>(k(),y(Z,{key:p.id,color:"info",size:"32"},{default:s(()=>[p.image?(k(),y(fe,{key:0,cover:"",src:`/storage/${p.image}`},null,8,["src"])):(k(),y(fe,{key:1,src:t(Je)},null,8,["src"])),a(et,{location:"top",activator:"parent"},{default:s(()=>[b(_(p.nickname),1)]),_:2},1024)]),_:2},1024))),128)),ee(o.students).length>3?(k(),y(Z,{key:0,color:"secondary",size:"32"},{default:s(()=>[v("span",_t,"+"+_(ee(o.students).length-3),1)]),_:2},1024)):$("",!0)])]),"item.rate":s(({item:o})=>[a(Ve,{modelValue:o.rate,"onUpdate:modelValue":p=>o.rate=p,size:"x-small",density:"compact","half-increments":"",color:o.rate==0?"secondary":"warning",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),"item.semester":s(({item:o})=>[b(_(o.semester),1)]),"item.id":s(({item:o})=>[a(V,{to:"/?search="+o.id,target:"_blank"},{default:s(()=>[b(_(o.id),1)]),_:2},1032,["to"])]),"item.status":s(({item:o})=>[a(pe,ae(Te(o.status),{density:"default",label:""}),null,16)]),"item.actions":s(({item:o})=>[a(z,{disabled:!t(I)(2).value,color:t(I)(2).value?"primary":"secondary",onClick:p=>E(o)},{default:s(()=>[a(K,{icon:"tabler-edit"})]),_:2},1032,["disabled","color","onClick"]),a(z,null,{default:s(()=>[a(K,{icon:"tabler-dots-vertical"}),a(tt,{activator:"parent"},{default:s(()=>[a(at,null,{default:s(()=>{var p;return[t(j)(4,((p=t(r).value)==null?void 0:p.admin_teacher_id)??"X").value?(k(),y(le,{key:0,value:"review","prepend-icon":"tabler-circle-check",onClick:B=>m(o)},{default:s(()=>e[13]||(e[13]=[b(" Review ")])),_:2},1032,["onClick"])):$("",!0),t(I)(4).value?(k(),y(le,{key:1,value:"delete","prepend-icon":"tabler-trash",onClick:B=>Ce(o.id)},{default:s(()=>e[14]||(e[14]=[b(" Delete ")])),_:2},1032,["onClick"])):$("",!0),t(I)(2).value?(k(),y(le,{key:2,value:"duplicate","prepend-icon":"tabler-copy",onClick:B=>i(o)},{default:s(()=>e[15]||(e[15]=[b(" Duplicate ")])),_:2},1032,["onClick"])):$("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[a(L),v("div",bt,[v("p",yt,_(t(We)({page:t(h),itemsPerPage:t(D)},t(X))),1),a(lt,{modelValue:t(h),"onUpdate:modelValue":e[7]||(e[7]=o=>T(h)?h.value=o:null),length:Math.min(Math.ceil(t(X)/t(D)),5),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(t(X)/t(D)),5)},{prev:s(o=>[a(N,ae({variant:"tonal",color:"default"},o,{icon:!1}),{default:s(()=>e[16]||(e[16]=[b(" Previous ")])),_:2},1040)]),next:s(o=>[a(N,ae({variant:"tonal",color:"default"},o,{icon:!1}),{default:s(()=>e[17]||(e[17]=[b(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),a(ot,{"is-drawer-open":t(S),"onUpdate:isDrawerOpen":e[10]||(e[10]=o=>T(S)?S.value=o:null),mode:t(U),"task-data":t(A),onTaskData:xe},null,8,["is-drawer-open","mode","task-data"])])}}},ha=Qe(Dt,[["__scopeId","data-v-1d630ec6"]]);export{ha as default};
