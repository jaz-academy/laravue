import{u as W}from"./useApi-86e1ac25.js";import{_ as L}from"./MoreBtn-dc3c4fe2.js";import{a as O,V as M,b as me}from"./VCard-79d2de72.js";import{V as fe}from"./VDivider-d54b4fba.js";import{V as le}from"./VTable-8e175740.js";import{V as H}from"./VAvatar-b27cc665.js";import{a5 as A,o as h,f as k,e as t,b as e,d as a,c as $,F as z,i as T,x as m,a0 as P,v as F,aZ as re,z as B,ai as U,r as w,n as p,aU as q,J as ie,y as K,be as Z,w as _e,a$ as he,cK as ve,cL as ge,H as ce}from"./main-2161dd16.js";import{V as te}from"./VChip-e9cc1678.js";import{m as ue}from"./vue3-apexcharts-afd8c402.js";import{V as E}from"./VCardText-285783bc.js";import{h as j,s as be}from"./helpers-6d9b37dc.js";import{V as ye,a as xe}from"./VTabs-2aa4387b.js";import{V as Ve,a as Y}from"./VWindowItem-1cb16d96.js";import{V as G,a as X}from"./VTimelineItem-2a61ecd3.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{V as we,a as de,b as ke,c as De}from"./VList-1c9f4772.js";import{r as oe}from"./validators-d3014da7.js";import{_ as Ce}from"./AppTextField-f5d6ff2c.js";import{_ as $e}from"./DialogCloseBtn-5f8ff65f.js";import{_ as ae}from"./AppSelect-14d7844a.js";import{V as Ne}from"./VForm-5e089130.js";import{V as ee}from"./VRow-cdbc520d.js";import{V as C}from"./VCol-b6fcabf3.js";import{V as Se}from"./VDialog-a941a15c.js";import{V as Ae}from"./VSnackbar-c4ee510a.js";import"./VMenu-3fd806c1.js";import"./VOverlay-f2354874.js";import"./easing-9f15041e.js";import"./lazy-ac5cead8.js";import"./scopeId-56a18a60.js";import"./VImg-4ff19814.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-d45d256d.js";import"./no-profile-4221a4a6.js";import"./VSlideGroup-27a8dea1.js";import"./ssrBoot-ee409192.js";import"./form-2a954a63.js";import"./VTextField-26cefffb.js";/* empty css                   */import"./VCounter-3b8f1b94.js";import"./VField-1461cc01.js";import"./VInput-1e0d7c59.js";import"./VSelect-3578ba37.js";import"./VCheckboxBtn-2e361082.js";import"./VSelectionControl-b935b5f8.js";const Fe={class:"d-flex align-center"},Ie={class:"text-body-2 text-high-emphasis font-weight-medium"},ze={class:"d-flex align-center gap-x-4",style:{"min-inline-size":"200px"}},Te={class:"w-100"},Me={class:"text-body-2"},Pe={class:"text-body-1 bg-var-theme-background"},Ee={class:"font-weight-medium"},Oe={__name:"AllocationTable",props:{data:{type:Array,default:()=>[]}},setup(D){const i=D,c=[{title:"ACCOUNT",key:"description"},{title:"PAYMENT",key:"payment"},{title:"EXPENSES",key:"amount"},{title:"BALANCE",key:"balance"},{title:"REMAIN",key:"percentage"}],u=o=>typeof o!="number"?o:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),v=o=>o>0?"success":o<0?"error":"warning",b=o=>o>95?"error":o>85?"warning":"primary",d=A(()=>i.data.reduce((o,l)=>o+l.balance,0));return(o,l)=>{const n=L;return i.data.length?(h(),k(M,{key:0},{default:t(()=>[e(O,{title:"Allocation"},{append:t(()=>[e(n)]),_:1}),e(fe),e(le,{class:"text-no-wrap"},{default:t(()=>[a("thead",null,[a("tr",null,[(h(),$(z,null,T(c,r=>a("th",{key:r.key,scope:"col",class:"text-uppercase"},m(r.title),1)),64))])]),a("tbody",null,[(h(!0),$(z,null,T(i.data,r=>(h(),$("tr",{key:r.allocation},[a("td",null,[a("div",Fe,[e(H,{color:r.allocation===""?"error":"primary",variant:"tonal",class:"me-2",size:"34"},{default:t(()=>[e(P,{icon:r.allocation===""?"tabler-wallet":"tabler-building-bank",size:"22"},null,8,["icon"])]),_:2},1032,["color"]),a("span",Ie,m(r.allocation||"No Allocated"),1)])]),a("td",null,m(u(Number(r.payment))),1),a("td",null,m(u(Number(r.amount))),1),a("td",null,[e(te,{color:v(r.balance),label:""},{default:t(()=>[F(m(u(r.balance)),1)]),_:2},1032,["color"])]),a("td",null,[a("div",ze,[a("div",Te,[e(re,{"model-value":r.remain,rounded:"",color:b(r.remain),height:6},null,8,["model-value","color"])]),a("div",Me,m(Number(r.remain))+"% ",1)])])]))),128))]),a("tfoot",null,[a("tr",Pe,[l[0]||(l[0]=a("th",{colspan:"3",scope:"row",class:"text-end text-high-emphasis"}," Total Balance ",-1)),a("td",Ee,[e(te,{color:v(d.value),label:""},{default:t(()=>[F(m(u(d.value)),1)]),_:1},8,["color"])]),l[1]||(l[1]=a("td",null,null,-1))])])]),_:1})]),_:1})):B("",!0)}}};const Be="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",ne="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",We="rgba(var(--v-border-color), var(--v-border-opacity))",Ue={__name:"ExpenseStatistics",props:{data:{type:Array,default:()=>[]}},setup(D){const i=D,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=A(()=>{const o=[],l=[],n=[];return i.data.forEach(r=>{const[V,y]=r.month.split("-");o.push(`${c[parseInt(y)-1]}-${V}`),l.push(Number(r.official)),n.push(Number(r.non_official))}),{bulan:o,official:l,non_official:n}});console.log("chartData: ",u.value);const v={line:{series1:"#FFB400",series2:"#9055FD",series3:"#7367f029"}},b=A(()=>[{name:"Kitchen",type:"column",data:u.value.official},{name:"Household",type:"line",data:u.value.non_official}]),d=A(()=>({chart:{type:"line",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},markers:{size:5,colors:"#fff",strokeColors:v.line.series2,hover:{size:6},borderRadius:4},stroke:{curve:"smooth",width:[0,3],lineCap:"round"},legend:{show:!0,position:"bottom",markers:{width:8,height:8,offsetX:-3},height:40,itemMargin:{horizontal:10,vertical:0},fontSize:"15px",fontFamily:"Open Sans",fontWeight:400,labels:{colors:Be,useSeriesColors:!1},offsetY:10},grid:{strokeDashArray:8,borderColor:We},colors:[v.line.series1,v.line.series2],fill:{opacity:[1,1]},plotOptions:{bar:{columnWidth:"30%",startingShape:"rounded",endingShape:"rounded",borderRadius:4}},dataLabels:{enabled:!1},xaxis:{tickAmount:10,categories:u.value.bulan,labels:{style:{colors:ne,fontSize:"13px",fontWeight:400}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{tickAmount:4,labels:{style:{colors:ne,fontSize:"13px",fontWeight:400},formatter(o){return o>=1e6?`${(o/1e6).toFixed(0)} jt`:(o==null?void 0:o.toLocaleString("id-ID"))||0}}},responsive:[{breakpoint:1400,options:{chart:{height:320},xaxis:{labels:{style:{fontSize:"10px"}}},legend:{itemMargin:{vertical:0,horizontal:10},fontSize:"13px",offsetY:12}}},{breakpoint:1025,options:{chart:{height:415},plotOptions:{bar:{columnWidth:"50%"}}}},{breakpoint:982,options:{plotOptions:{bar:{columnWidth:"30%"}}}},{breakpoint:480,options:{chart:{height:250},legend:{offsetY:7}}}]}));return(o,l)=>{const n=ue;return h(),k(M,null,{default:t(()=>[e(O,{title:"Expense statistics",subtitle:"Monthly expenses"},{append:t(()=>[e(U,{variant:"tonal","append-icon":"tabler-chevron-down"},{default:t(()=>l[0]||(l[0]=[F(" January ")])),_:1})]),_:1}),e(E,null,{default:t(()=>[e(n,{id:"shipment-statistics",type:"line",height:"320",options:d.value,series:b.value},null,8,["options","series"])]),_:1})]),_:1})}}};const Le={class:"text-caption text-uppercase text-success"},Re={class:"app-timeline-title"},je={class:"app-timeline-text"},He={class:"text-caption text-uppercase text-warning"},qe={class:"app-timeline-title"},Ke={class:"app-timeline-text"},Je={class:"text-caption text-uppercase text-error"},Ye={class:"app-timeline-title"},Ge={class:"app-timeline-text"},Xe={__name:"FinanceHistory",props:{data:{type:Object,default:()=>({expenses:[],outgoings:[],inputs:[]})}},setup(D){const i=D,c=w("Input"),u=["Input","Outgoing","Expenses"];return(v,b)=>{const d=L;return h(),k(M,{class:"country-order-card"},{default:t(()=>[e(O,{title:"Payment History",subtitle:"Transactions"},{append:t(()=>[e(d)]),_:1}),e(ye,{modelValue:p(c),"onUpdate:modelValue":b[0]||(b[0]=o=>q(c)?c.value=o:null),grow:"",class:"disable-tab-transition"},{default:t(()=>[(h(),$(z,null,T(u,(o,l)=>e(xe,{key:l},{default:t(()=>[F(m(o),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(E,null,{default:t(()=>[e(Ve,{modelValue:p(c),"onUpdate:modelValue":b[1]||(b[1]=o=>q(c)?c.value=o:null)},{default:t(()=>[e(Y,null,{default:t(()=>[a("div",null,[i.data.inputs.length?(h(),k(G,{key:0,align:"start","truncate-line":"both",side:"end",density:"compact","line-thickness":"1",class:"table-container"},{default:t(()=>[(h(!0),$(z,null,T(i.data.inputs,(o,l)=>(h(),k(X,{key:l,icon:"tabler-circle-check","dot-color":"rgba(var(--v-theme-surface))","icon-color":"success","fill-dot":"",size:"22",elevation:0,class:"text-no-wrap"},{default:t(()=>[a("div",Le,m(o.remark),1),a("div",Re,m(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o.amount)),1),a("div",je,m(p(j)(o.date)),1)]),_:2},1024))),128))]),_:1})):B("",!0)])]),_:1}),e(Y,null,{default:t(()=>[a("div",null,[i.data.outgoings.length?(h(),k(G,{key:0,align:"start","truncate-line":"both",side:"end",density:"compact","line-thickness":"1",class:"table-container"},{default:t(()=>[(h(!0),$(z,null,T(i.data.outgoings,(o,l)=>(h(),k(X,{key:l,icon:"tabler-arrow-up-right","dot-color":"rgba(var(--v-theme-surface))","icon-color":"warning","fill-dot":"",size:"22",elevation:0,class:"text-no-wrap"},{default:t(()=>[a("div",He,m(o.remark),1),a("div",qe,m(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o.amount)),1),a("div",Ke,m(p(j)(o.date)),1)]),_:2},1024))),128))]),_:1})):B("",!0)])]),_:1}),e(Y,null,{default:t(()=>[a("div",null,[i.data.expenses.length?(h(),k(G,{key:0,align:"start","truncate-line":"both",side:"end",density:"compact","line-thickness":"1",class:"table-container"},{default:t(()=>[(h(!0),$(z,null,T(i.data.expenses,(o,l)=>(h(),k(X,{key:l,icon:"tabler-arrow-up-right-circle","dot-color":"rgba(var(--v-theme-surface))","icon-color":"error","fill-dot":"",size:"22",elevation:0,class:"text-no-wrap"},{default:t(()=>[a("div",Je,m(o.remark),1),a("div",Ye,m(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o.amount)),1),a("div",Ge,m(p(j)(o.date)),1)]),_:2},1024))),128))]),_:1})):B("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};const Ze={key:0,class:"d-flex mb-8"},Qe={class:"vehicle-progress-label position-relative mb-4 text-body-1 d-none d-sm-block text-truncate"},et={class:"table-container"},tt={width:"70%"},ot={class:"text-body-1 text-high-emphasis"},at={class:"text-end"},nt={class:"font-weight-medium text-body-1 text-high-emphasis"},st={class:"text-end"},lt={class:"text-body-1"},rt={__name:"NonKitchenOverview",props:{data:{type:Array,required:!0}},setup(D){const i=D,c=A(()=>{const o=Array.isArray(i.data)?i.data:[],l=o.reduce((n,r)=>n+Number(r.amount||0),0);return o.map(n=>{var r,V;return{icon:d((r=n.finance_account)==null?void 0:r.description),title:((V=n.finance_account)==null?void 0:V.description)||"Unknown",amount:Number(n.amount||0),time:Number(n.amount||0).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),percentage:l>0?Number(n.amount||0)/l*100:0}})}),u=A(()=>{const o=c.value.slice().sort((y,N)=>N.amount-y.amount);if(o.length===0)return[];if(o.length<=4){const N=100/o.reduce((f,s)=>f+s.percentage,0);return o.map(f=>({...f,percentage:parseFloat((f.percentage*N).toFixed(1))}))}const l=o.slice(0,3),r=o.slice(3).reduce((y,N)=>y+N.percentage,0),V={title:"Lain-lain",percentage:parseFloat(r.toFixed(1)),icon:"tabler-dots"};return[...l.map(y=>({...y,percentage:parseFloat(y.percentage.toFixed(1))})),V]}),v=["rgba(var(--v-theme-on-surface), var(--v-hover-opacity))","rgb(var(--v-theme-primary))","rgb(var(--v-theme-info))","#212121"],b=o=>v[o%v.length],d=o=>({"Sewa Gedung":"tabler-building","Internet & Tools":"tabler-wifi","Gaji Karyawan":"tabler-users","Gaji Guru":"tabler-school"})[o]||"tabler-receipt-2";return(o,l)=>{const n=L;return h(),k(M,null,{default:t(()=>[e(O,{title:"Non Kitchen overview"},{append:t(()=>[e(n)]),_:1}),e(E,null,{default:t(()=>[u.value.length?(h(),$("div",Ze,[(h(!0),$(z,null,T(u.value,(r,V)=>(h(),$("div",{key:r.title,style:ie({"inline-size":`${r.percentage}%`})},[a("div",Qe,m(r.title),1),e(p(re),{color:b(V),"model-value":"100",height:"46",class:K({"rounded-s-0":V>0&&u.value.length>1,"rounded-e-0":V<u.value.length-1,"rounded-sm":u.value.length===1})},{default:t(()=>[a("strong",{class:K(["vehicle-progress-text",V>0?"text-white":""])},m(r.percentage)+"%",3)]),_:2},1032,["color","class"])],4))),128))])):B("",!0),a("div",et,[e(le,{class:"text-no-wrap"},{default:t(()=>[a("tbody",null,[(h(!0),$(z,null,T(c.value,(r,V)=>(h(),$("tr",{key:V},[a("td",tt,[e(P,{icon:r.icon,size:"24",class:"me-2"},null,8,["icon"]),a("span",ot,m(r.title),1)]),a("td",at,[a("div",nt,m(r.time),1)]),a("td",st,[a("span",lt,m(r.percentage.toFixed(1))+"%",1)])]))),128))])]),_:1})])]),_:1})]),_:1})}}},it=Q(rt,[["__scopeId","data-v-a8ff2595"]]),se="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",ct="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",ut={__name:"PaymentDelivery",props:{data:{type:Object,default:()=>({text:[],value:[]})}},setup(D){const i=D,c={donut:{series1:"#56ca00",series2:"#56ca00cc",series3:"#56ca0099",series4:"#56ca0066"}},u=A(()=>{const o=Z(i.data.value)||[];return o.length?o.reduce((l,n)=>l+Number(n),0)/o.length:0}),v=A(()=>{var o,l;return(l=(o=i.data)==null?void 0:o.value)!=null&&l.length?i.data.value.map(n=>Number(n)||0):[0]}),b={chart:{animations:{enabled:!1}},colors:[c.donut.series1,c.donut.series2,c.donut.series3,c.donut.series4],stroke:{width:0},dataLabels:{enabled:!1,formatter(o){return`${Number.parseInt(o)}%`}},legend:{show:!0,position:"bottom",offsetY:10,markers:{width:8,height:8,offsetX:-3},itemMargin:{horizontal:15,vertical:5},fontSize:"13px",fontWeight:400,labels:{colors:se,useSeriesColors:!1}},tooltip:{theme:!1},grid:{padding:{top:15}},plotOptions:{pie:{donut:{size:"75%",labels:{show:!0,value:{fontSize:"26px",color:se,fontWeight:500,offsetY:-15,formatter(o){return`${Number.parseInt(o)}%`}},name:{offsetY:30},total:{show:!0,fontSize:"0.75rem",fontWeight:400,label:"AVG. Total",color:ct,formatter:()=>`${Number.parseInt(u.value)}%`}}}}},responsive:[{breakpoint:420,options:{chart:{height:400}}}]},d=A(()=>{var o,l;return{...b,labels:(l=(o=i.data)==null?void 0:o.text)!=null&&l.length?i.data.text:["No Data"]}});return(o,l)=>{const n=L,r=ue;return h(),k(M,null,{default:t(()=>[e(O,{title:"Payment Delivery"},{append:t(()=>[e(n)]),_:1}),e(E,null,{default:t(()=>[e(r,{type:"donut",height:"400",options:d.value,series:v.value},null,8,["options","series"])]),_:1})]),_:1})}}};const dt={class:"table-container"},pt={class:"text-high-emphasis text-body-1 font-weight-medium"},mt={__name:"PaymentPerformance",props:{students:{type:Array,required:!0},payments:{type:Array,required:!0}},setup(D){const i=D,c=A(()=>!i.students||i.students.length===0?[]:i.students.map(u=>{const v=i.payments.filter(d=>d.admin_student_id===u.id),b=v.length>0;return{title:u.name,length:v.length,date:b?j(v[0].date)||v[0].date:"-",billing:b?v[0].billing:"Waiting",icon:b?"tabler-circle-check":"tabler-circle-x",color:b?v.length>=3?"success":"primary":"warning"}}));return(u,v)=>{const b=L;return h(),k(M,null,{default:t(()=>[e(O,{title:"Monthly overview",subtitle:"Payment delivery"},{append:t(()=>[e(b)]),_:1}),e(E,null,{default:t(()=>[a("div",dt,[e(we,{class:"card-list text-no-wrap"},{default:t(()=>[(h(!0),$(z,null,T(c.value,(d,o)=>(h(),k(de,{key:o},{prepend:t(()=>[e(H,{color:d.color,variant:"tonal",rounded:"",size:"38"},{default:t(()=>[e(P,{icon:d.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])]),append:t(()=>[a("span",pt,m(d.date),1)]),default:t(()=>[e(ke,null,{default:t(()=>[F(m(p(be)(d.title)),1)]),_:2},1024),e(De,null,{default:t(()=>[a("div",{class:K([d.billing=="Waiting"?"text-secondary":d.length>=3?"text-success":"text-primary","d-flex align-center"])},[e(P,{icon:d.billing=="Waiting"?"tabler-chevron-down":d.length>=3?"tabler-chevrons-up":"tabler-chevron-up",class:"me-1"},null,8,["icon"]),a("span",null,m(d.billing),1)],2)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}}},ft=Q(mt,[["__scopeId","data-v-810f2bb2"]]),_t={__name:"AddDepositDialog",props:{mode:{type:String,required:!0},selectedData:{type:Object,required:!1,default:()=>({id:null,title:"",amount:0,icon:"",color:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","delete","update:isDialogVisible"],setup(D,{emit:i}){const c=D,u=i,v=w(),b=A(()=>c.mode==="add"?"Add Deposit":"Edit Deposit"),d=A(()=>c.mode==="add"?"Submit":"Update"),o=[{label:"Bank",value:"tabler-building-bank"},{label:"Piggy Bank",value:"tabler-pig-money"},{label:"Wallet",value:"tabler-wallet"},{label:"Credit Card",value:"tabler-credit-card"},{label:"Cash",value:"tabler-cash"}],l=[{text:"Primary",value:"primary"},{text:"Warning",value:"warning"},{text:"Info",value:"info"},{text:"Success",value:"success"},{text:"Error",value:"error"},{text:"Secondary",value:"secondary"}],n=w(structuredClone(Z(c.selectedData)));_e(()=>c.isDialogVisible,f=>{f&&(n.value=structuredClone(Z(c.selectedData)))});const r=()=>{var f;(f=v.value)==null||f.validate().then(({valid:s})=>{s&&(u("update:isDialogVisible",!1),u("submit",{mode:c.mode,data:n.value}))})},V=()=>{u("update:isDialogVisible",!1)},y=()=>{n.value.id&&u("delete",n.value.id)},N=f=>{u("update:isDialogVisible",f)};return(f,s)=>{const g=$e,S=Ce;return h(),k(Se,{width:f.$vuetify.display.smAndDown?"auto":420,"model-value":c.isDialogVisible,"onUpdate:modelValue":N},{default:t(()=>[e(g,{onClick:s[0]||(s[0]=_=>N(!1))}),e(M,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(O,{class:"text-center"},{default:t(()=>[e(me,{class:"text-h3 mb-3"},{default:t(()=>[F(m(p(b)),1)]),_:1}),s[5]||(s[5]=a("p",{class:"mb-0"}," Tambahkan Deposit Saldo baru. ",-1))]),_:1}),e(E,null,{default:t(()=>[e(Ne,{ref_key:"refForm",ref:v,class:"mt-4",onSubmit:he(r,["prevent"])},{default:t(()=>[e(ee,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(S,{modelValue:p(n).title,"onUpdate:modelValue":s[1]||(s[1]=_=>p(n).title=_),rules:["requiredValidator"in f?f.requiredValidator:p(oe)],label:"Title",placeholder:"Deposit Account"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(S,{modelValue:p(n).amount,"onUpdate:modelValue":s[2]||(s[2]=_=>p(n).amount=_),rules:["requiredValidator"in f?f.requiredValidator:p(oe)],label:"amount",placeholder:"Deposit Amount",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(ae,{modelValue:p(n).icon,"onUpdate:modelValue":s[3]||(s[3]=_=>p(n).icon=_),label:"Deposit Icon",placeholder:"Deposit Icon",items:o,"item-title":"label","item-value":"value"},{item:t(({props:_,item:x})=>[e(de,ve(ge(_)),{default:t(()=>[e(P,{icon:x.raw.value,class:"me-2"},null,8,["icon"]),a("span",null,m(x.raw.label),1)]),_:2},1040)]),selection:t(({item:_})=>[e(P,{icon:_.raw.value,class:"me-2"},null,8,["icon"]),a("span",null,m(_.raw.label),1)]),_:1},8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(ae,{modelValue:p(n).color,"onUpdate:modelValue":s[4]||(s[4]=_=>p(n).color=_),label:"Deposit Color",placeholder:"Deposit Color",items:l,"item-title":"text","item-value":"value"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",class:"d-flex flex-wrap justify-center gap-4 mt-6"},{default:t(()=>[e(U,{type:"submit"},{default:t(()=>[F(m(p(d)),1)]),_:1}),e(U,{color:"secondary",variant:"tonal",onClick:V},{default:t(()=>s[6]||(s[6]=[F(" Cancel ")])),_:1}),c.mode==="edit"?(h(),k(U,{key:0,color:"error",variant:"tonal",onClick:y},{default:t(()=>s[7]||(s[7]=[F(" Delete ")])),_:1})):B("",!0)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}};const ht={class:"d-flex align-center gap-x-4 mb-2"},vt={class:"text-h5 font-weight-medium"},gt={class:"text-body-1"},bt={class:"d-flex gap-x-2"},yt={class:"text-h6 font-weight-medium"},xt={class:"d-flex align-center gap-x-4 mb-2"},Vt={__name:"SaldoCardStatistics",setup(D){const i=w([]),c=w(!1),u=w("add"),v=w({}),b=async()=>{var f;try{const{data:s}=await W("/deposits"),g=((f=s.value)==null?void 0:f.data)||[],S=g.reduce((_,x)=>_+x.amount,0);i.value=g.map(_=>({..._,value:new Intl.NumberFormat("id-ID").format(_.amount),change:S>0?parseFloat((_.amount/S*100).toFixed(0)):0,isHover:!1}))}catch(s){n("Failed to fetch deposits.","error"),console.error(s)}};ce(b);const d=w(!1),o=w(""),l=w("primary"),n=(f,s="primary")=>{o.value=f,l.value=s,d.value=!0,setTimeout(()=>{d.value=!1},1e4)},r=()=>{u.value="add",v.value={title:"",amount:0,icon:"tabler-building-bank",color:"primary"},c.value=!0},V=f=>{u.value="edit",v.value=JSON.parse(JSON.stringify(f)),c.value=!0},y=async f=>{var S;const{mode:s,data:g}=f;try{let _;if(s==="add"?_=await W("/deposits",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Accept:"application/json"}}):_=await W(`/deposits/${g.id}`,{method:"PUT",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Accept:"application/json"}}),(S=_.response.value)!=null&&S.ok)n(`Deposit ${s==="add"?"added":"updated"} successfully.`,"success"),b();else{const x=_.data.value,I=x!=null&&x.errors?Object.values(x.errors).flat().join(`
`):(x==null?void 0:x.message)||`Failed to ${s} deposit.`;n(I,"error")}}catch(_){n(`Failed to ${s} deposit.`,"error"),console.error(_)}},N=async f=>{try{await W(`/deposits/${f}`,{method:"DELETE"}),n("Deposit deleted successfully.","success"),b()}catch(s){n("Failed to delete deposit.","error"),console.error(s)}c.value=!1};return(f,s)=>(h(),k(ee,null,{default:t(()=>[e(Ae,{modelValue:p(d),"onUpdate:modelValue":s[1]||(s[1]=g=>q(d)?d.value=g:null),location:"center",variant:"tonal",transition:"scale-transition",color:p(l),class:"text-center"},{actions:t(()=>[e(U,{color:p(l),onClick:s[0]||(s[0]=g=>d.value=!1)},{default:t(()=>s[3]||(s[3]=[F(" Close ")])),_:1},8,["color"])]),default:t(()=>[F(m(p(o))+" ",1)]),_:1},8,["modelValue","color"]),(h(!0),$(z,null,T(p(i),(g,S)=>(h(),k(C,{key:S,cols:"12",md:p(i).length<=2?6:p(i).length<=4?3:p(i).length<=6?2:6,sm:"6"},{default:t(()=>[a("div",null,[e(M,{class:"logistics-card-statistics cursor-pointer",style:ie(g.isHover?{"border-block-end":`2px solid rgba(var(--v-theme-${g.color}))`}:{"border-block-end":`2px solid rgba(var(--v-theme-${g.color}), var(--v-disabled-opacity))`}),onClick:_=>V(g),onMouseenter:_=>g.isHover=!0,onMouseleave:_=>g.isHover=!1},{default:t(()=>[e(E,null,{default:t(()=>[a("div",ht,[e(H,{variant:"tonal",class:"avatar-hover",color:g.color,rounded:""},{default:t(()=>[e(P,{icon:g.icon,size:"28"},null,8,["icon"])]),_:2},1032,["color"]),a("h5",vt,m(g.value),1)]),a("div",gt,m(g.title),1),a("div",bt,[a("h6",yt,m(g.change>0?"+":"")+" "+m(g.change)+"% ",1),s[4]||(s[4]=a("span",{class:"text-disabled"},"from Total",-1))])]),_:2},1024)]),_:2},1032,["style","onClick","onMouseenter","onMouseleave"])])]),_:2},1032,["md"]))),128)),e(C,{cols:"12",md:p(i).length<=2?6:p(i).length<=4?3:p(i).length<=6?2:6,class:K(p(i).length%2===0?"d-none":""),sm:"6",onClick:r},{default:t(()=>[a("div",null,[e(M,{class:"logistics-card-statistics cursor-pointer"},{default:t(()=>[e(E,null,{default:t(()=>[a("div",xt,[e(H,{variant:"tonal",class:"avatar-hover",rounded:"",size:"85"},{default:t(()=>[e(P,{size:"42",icon:"tabler-plus"})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["md","class"]),e(_t,{"is-dialog-visible":p(c),"onUpdate:isDialogVisible":s[2]||(s[2]=g=>q(c)?c.value=g:null),mode:p(u),"selected-data":p(v),onSubmit:y,onDelete:N},null,8,["is-dialog-visible","mode","selected-data"])]),_:1}))}},wt=Q(Vt,[["__scopeId","data-v-f65b7dfe"]]),ho={__name:"finance",setup(D){const i=w([]),c=w([]),u=w([]),v=w([]),b=w([]),d=w([]),o=w([]),l=w({text:[],value:[]}),n=w([]);async function r(){var S,_;const y=(await W("/dashboard-finance")).data.value;if(!y)return;i.value=y.nonKitchen||[],c.value=y.houseHold||[],u.value=y.students||[],v.value=y.expenses||[],b.value=y.outgoings||[],d.value=y.inputs||[],o.value=y.payCurrentMonth||[];const N=y.payDelivery||[];l.value={text:N.map(x=>x.billing),value:N.map(x=>x.amount>0?Math.round(Number(x.paidAmount)/x.amount*100):0)};const f=((S=y.allocation)==null?void 0:S.finances)||[],s=((_=y.allocation)==null?void 0:_.payments)||[],g=f.reduce((x,I)=>x+Number(I.amount),0);n.value=f.map(x=>{const I=s.find(pe=>pe.number===x.allocation),J=Number((I==null?void 0:I.amount)||0),R=Number(x.amount);return{...x,payment:J,allocation:(I==null?void 0:I.description)||"",balance:J-R,percentage:g>0?R/g*100:0,remain:100-Math.round((J-R)/R*100)}})}return ce(r),console.log("allocation: ",n.value),(V,y)=>(h(),k(ee,{class:"match-height"},{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(wt)]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[e(it,{data:i.value},null,8,["data"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[e(Ue,{data:c.value},null,8,["data"])]),_:1}),e(C,{cols:"12",md:"4"},{default:t(()=>[e(ft,{payments:o.value,students:u.value},null,8,["payments","students"])]),_:1}),e(C,{cols:"12",md:"4"},{default:t(()=>[e(ut,{data:l.value},null,8,["data"])]),_:1}),e(C,{cols:"12",md:"4"},{default:t(()=>[e(Xe,{data:{expenses:v.value,outgoings:b.value,inputs:d.value}},null,8,["data"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(Oe,{data:n.value},null,8,["data"])]),_:1})]),_:1}))}};export{ho as default};
