import{u as G}from"./useApi-e86a5383.js";import{_ as ue}from"./ConfirmDialog-59ad77dc.js";import{_ as Z}from"./AppSelect-596fd622.js";import{_ as W}from"./AppTextField-8792b8bb.js";import{r as y,w as X,a6 as M,o as A,c as E,b as e,e as l,n as a,d as x,aj as C,a1 as F,a$ as H,v as k,F as se,a0 as q,f as O,z as K,b5 as ie,a as oe,aV as T,x as h,s as Y,j as de,H as me,i as pe}from"./main-b871c247.js";import{a as ne}from"./no-profile-29bc384c.js";import{a as u,V as B}from"./VRow-6fcd1b0a.js";import{V as z}from"./VCard-b2c7daaa.js";import{V as j}from"./VCardText-de098736.js";import{V as Q}from"./VAvatar-8e3ed6ed.js";import{V as ee}from"./VForm-804f51cb.js";import{V as L}from"./VDivider-adb1395f.js";import{_ as ce}from"./AppDateTimePicker-23bd7343.js";import{a as fe}from"./formatters-6300d5fa.js";import{_ as ve}from"./MoreBtn-be69bb08.js";import{p as Ve}from"./paginationMeta-4ad053a4.js";import{c as be}from"./createUrl-97ba0e59.js";import{$ as ge}from"./api-4f18cc3a.js";import{V as ye}from"./VSpacer-acf0b0f1.js";import{V as _e}from"./VDataTableServer-abada779.js";import{V as Se}from"./VTooltip-33e7a5fa.js";import{V as xe}from"./VImg-8fc3d1b5.js";import{V as De}from"./VChip-294e7624.js";import{V as Ue}from"./VPagination-778a8738.js";import{A as ke,_ as he}from"./AccountSettingsSecurity-5eba803c.js";import{a as Pe,V as we}from"./VTabs-7132b7ab.js";import{V as Ae}from"./VSnackbar-eb126748.js";import{a as R,V as Ne}from"./VWindowItem-1c49a1ad.js";import"./VDialog-66ae99e1.js";import"./VOverlay-6dc4db6e.js";import"./easing-9f15041e.js";import"./lazy-b1156225.js";import"./scopeId-bd2d2045.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-d47abf0e.js";import"./form-7cc48b0d.js";import"./VSelect-9561332e.js";import"./VTextField-51610683.js";/* empty css                   */import"./VCounter-4d3eaf5c.js";import"./VField-3696a4fc.js";import"./VInput-8e497f2d.js";import"./VList-5ecced89.js";import"./ssrBoot-f3061ed5.js";import"./VMenu-8c238fe7.js";import"./VCheckboxBtn-9057ced3.js";import"./VSelectionControl-780f9710.js";import"./helpers-29c4dea8.js";import"./index-9c720871.js";import"./index-42b50782.js";import"./VDataTable-67e51235.js";import"./VTable-fd133ee3.js";import"./filter-2153fd22.js";import"./fetchUserData-12c38800.js";import"./VAlert-c640a60b.js";import"./VCheckbox-cb38a8f7.js";import"./TwoFactorAuthDialog-0d5b148b.js";import"./DialogCloseBtn-1d029ed0.js";import"./VSlideGroup-fab3fc11.js";const Ce={class:"d-flex flex-column justify-center gap-4"},Ie={class:"d-flex flex-wrap gap-2"},Te={__name:"AccountSettingsAccount",props:{student:Object},emits:["userData"],setup(I,{emit:D}){const N=D,d=y(),p=y(null),U=y(),_=y(!1),o=y({});X(()=>I.student,S=>{if(S){const t=JSON.parse(JSON.stringify(S));if(typeof t.skills=="string")try{const c=JSON.parse(t.skills);t.skills=Array.isArray(c)?c:[]}catch{t.skills=t.skills.split(",").map(V=>V.trim())}o.value=t}},{immediate:!0});const i=M(()=>{var t;const S=(t=o.value)==null?void 0:t.image;return S?`/storage/${S}`:ne}),m=()=>{o.value=JSON.parse(JSON.stringify(I.student))},g=S=>{const t=new FileReader,{files:c}=S.target;c&&c.length&&(t.readAsDataURL(c[0]),t.onload=()=>{typeof t.result=="string"&&(i.value=t.result,$())},p.value=c[0])},P=()=>{i.value=ne},r=()=>{var S;(S=d.value)==null||S.validate().then(({valid:t})=>{t&&(console.log("SUBMIT PAYLOAD",o.value),N("userData",{...o.value}))})},$=async()=>{if(!p.value)return;const S=new FormData;S.append("image",p.value),S.append("_method","PUT");try{const t=await G("/user/profile",{method:"POST",body:S}),c=t.data.image,V=t.data.url;i.value=V,o.value.image=c,userData.value.image=c,console.log("Upload success",t)}catch(t){console.error("Upload failed",t)}};return(S,t)=>{const c=W,V=Z,b=ue;return A(),E(se,null,[e(B,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(z,{title:"Profile Details"},{default:l(()=>[e(j,{class:"d-flex"},{default:l(()=>[e(Q,{rounded:"",size:"100",class:"me-6",image:a(i)},null,8,["image"]),x("div",Ce,[x("div",Ie,[e(C,{color:"primary",onClick:t[0]||(t[0]=n=>{var f;return(f=U.value)==null?void 0:f.click()})},{default:l(()=>[e(F,{icon:"tabler-cloud-upload",class:"d-sm-none"}),t[19]||(t[19]=x("span",{class:"d-none d-sm-block"},"Upload new photo",-1))]),_:1}),x("input",{ref_key:"refInputEl",ref:U,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:g},null,544),e(C,{type:"reset",color:"secondary",variant:"tonal",onClick:P},{default:l(()=>[t[20]||(t[20]=x("span",{class:"d-none d-sm-block"},"Reset",-1)),e(F,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),t[21]||(t[21]=x("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),_:1}),e(ee,{ref_key:"refForm",ref:d,onSubmit:H(r,["prevent"])},{default:l(()=>[e(L,{class:"my-4"}),e(j,{class:"pt-2"},{default:l(()=>[e(B,null,{default:l(()=>[e(u,{md:"4",cols:"12"},{default:l(()=>[e(c,{modelValue:o.value.nis,"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.nis=n),placeholder:"201122",label:"NIS"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(c,{modelValue:o.value.name,"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.name=n),placeholder:"John",label:"Name"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(c,{modelValue:o.value.nickname,"onUpdate:modelValue":t[3]||(t[3]=n=>o.value.nickname=n),placeholder:"Doe",label:"Nickname"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.birth_place,"onUpdate:modelValue":t[4]||(t[4]=n=>o.value.birth_place=n),label:"Birth Place",placeholder:"Enter your birth place"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.birth_date,"onUpdate:modelValue":t[5]||(t[5]=n=>o.value.birth_date=n),label:"Birth Date",placeholder:"Select Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.ownPhone,"onUpdate:modelValue":t[6]||(t[6]=n=>o.value.ownPhone=n),label:"Phone Number",placeholder:"+62 888 1234 5678"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.address,"onUpdate:modelValue":t[7]||(t[7]=n=>o.value.address=n),label:"Address",placeholder:"Jln. Sirot No. 123"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.hamlet,"onUpdate:modelValue":t[8]||(t[8]=n=>o.value.hamlet=n),label:"Hamlet",placeholder:"Dusun Mustaqim"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.village,"onUpdate:modelValue":t[9]||(t[9]=n=>o.value.village=n),label:"Village",placeholder:"Desa / Kec. Jannah"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.city,"onUpdate:modelValue":t[10]||(t[10]=n=>o.value.city=n),label:"City / Regency",placeholder:"Kota / Kabupaten Firdaus"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.district,"onUpdate:modelValue":t[11]||(t[11]=n=>o.value.district=n),label:"Province",placeholder:"Prop. Firdaus"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.postal_code,"onUpdate:modelValue":t[12]||(t[12]=n=>o.value.postal_code=n),label:"Zip Code",placeholder:"10001"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{class:"mt-4"}),e(j,{class:"pt-2 mt-6"},{default:l(()=>[e(B,null,{default:l(()=>[e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.hobby,"onUpdate:modelValue":t[13]||(t[13]=n=>o.value.hobby=n),label:"Hobby",placeholder:"What do you like to do?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.sport,"onUpdate:modelValue":t[14]||(t[14]=n=>o.value.sport=n),label:"Sport",placeholder:"What is your favorite sport?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.ambition,"onUpdate:modelValue":t[15]||(t[15]=n=>o.value.ambition=n),label:"Ambition",placeholder:"What do you want to be?"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(V,{modelValue:o.value.role,"onUpdate:modelValue":t[16]||(t[16]=n=>o.value.role=n),label:"Role",items:["Content Creator","Entrepreneur","Influencer","Developer"],placeholder:"Select Role"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"8"},{default:l(()=>[e(V,{modelValue:o.value.skills,"onUpdate:modelValue":t[17]||(t[17]=n=>o.value.skills=n),label:"Skills",placeholder:"Select Skills",multiple:"",items:["Design","Editing","Copywriting","Photography","HTML","CSS","JavaScript","React","NodeJS","MongoDB","MySQL","Python"]},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(C,{type:"submit"},{default:l(()=>t[22]||(t[22]=[k(" Save changes ")])),_:1}),e(C,{color:"secondary",variant:"tonal",type:"reset",onClick:H(m,["prevent"])},{default:l(()=>t[23]||(t[23]=[k(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(b,{"is-dialog-visible":_.value,"onUpdate:isDialogVisible":t[18]||(t[18]=n=>_.value=n),"confirmation-question":"Are you sure you want to deactivate your account?","confirm-title":"Deactivated!","confirm-msg":"Your account has been deactivated successfully.","cancel-title":"Cancelled","cancel-msg":"Account Deactivation Cancelled!"},null,8,["is-dialog-visible"])],64)}}},$e={__name:"AccountSettingsOthers",props:{student:Object},emits:["userData"],setup(I,{emit:D}){const N=D,d=q("userData"),p=y({}),U=y();X(()=>I.student,i=>{i&&(p.value=JSON.parse(JSON.stringify(i)))},{immediate:!0});const _=()=>{p.value=JSON.parse(JSON.stringify(I.student))},o=()=>{var i,m;((i=d.value)==null?void 0:i.role)>=4&&((m=U.value)==null||m.validate().then(({valid:g})=>{g&&(console.log("SUBMIT PAYLOAD",p.value),N("userData",{...p.value}))}))};return(i,m)=>{const g=W;return A(),O(ee,{ref_key:"refForm",ref:U,onSubmit:H(o,["prevent"])},{default:l(()=>{var P;return[e(B,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Registration Data"},{default:l(()=>[e(j,null,{default:l(()=>[m[8]||(m[8]=x("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e(B,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).registered,"onUpdate:modelValue":m[0]||(m[0]=r=>a(p).registered=r),placeholder:"2000",label:"Registered"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).email,"onUpdate:modelValue":m[1]||(m[1]=r=>a(p).email=r),placeholder:"john.doe@example.com",label:"Email"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).instagram,"onUpdate:modelValue":m[2]||(m[2]=r=>a(p).instagram=r),placeholder:"@john.doe",label:"Instagram"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).payment_category,"onUpdate:modelValue":m[3]||(m[3]=r=>a(p).payment_category=r),placeholder:"@john.doe",label:"Payment"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(z,{title:"Graduation Data"},{default:l(()=>[e(j,null,{default:l(()=>[m[9]||(m[9]=x("p",{class:"mt-n4 mb-6 text-sm"}," Can only be changed by the admin ",-1)),e(B,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).graduation,"onUpdate:modelValue":m[4]||(m[4]=r=>a(p).graduation=r),placeholder:"2000",label:"Graduated"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).next_school,"onUpdate:modelValue":m[5]||(m[5]=r=>a(p).next_school=r),placeholder:"Oxford University",label:"Next Place"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).next_school_address,"onUpdate:modelValue":m[6]||(m[6]=r=>a(p).next_school_address=r),placeholder:"United Kingdom",label:"Next Place Address"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(p).note,"onUpdate:modelValue":m[7]||(m[7]=r=>a(p).note=r),placeholder:"-",label:"Note"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),((P=a(d).value)==null?void 0:P.role)>=4?(A(),O(u,{key:0,cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(C,{type:"submit"},{default:l(()=>m[10]||(m[10]=[k(" Save changes ")])),_:1}),e(C,{type:"reset",color:"secondary",variant:"tonal",onClick:_},{default:l(()=>m[11]||(m[11]=[k(" Reset ")])),_:1})]),_:1})):K("",!0)]}),_:1},512)}}};const Oe={class:"d-flex align-end flex-wrap gap-3"},Be={class:"invoice-list-search"},Fe={class:"invoice-list-status"},Me={class:"mb-0"},je={class:"mb-0"},Je={class:"mb-0"},Re={class:"d-flex align-center"},Le={key:1},Ee={class:"d-flex flex-column"},ze={class:"text-sm text-disabled"},Ge={key:1},He={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Ke={class:"text-sm text-disabled mb-0"},We={__name:"BillingHistoryTable",async setup(I){let D,N;const d=y(""),p=y(),U=y([]),_=y(10),o=y(1),i=y(),m=y(),g=f=>{var v,w;o.value=f.page,i.value=(v=f.sortBy[0])==null?void 0:v.key,m.value=(w=f.sortBy[0])==null?void 0:w.order},P=[{title:"#ID",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:r,execute:$}=([D,N]=ie(()=>G(be("/apps/invoice",{query:{q:d,status:p,itemsPerPage:_,page:o,sortBy:i,orderBy:m}}))),D=await D,N(),D),S=M(()=>{var f;return(f=r.value)==null?void 0:f.invoices}),t=M(()=>{var f;return(f=r.value)==null?void 0:f.totalInvoices}),c=(f,v)=>f===v?{status:"Unpaid",chip:{color:"error"}}:f===0?{status:"Paid",chip:{color:"success"}}:{status:f,chip:{variant:"text"}},V=f=>f==="Partial Payment"?{variant:"warning",icon:"tabler-circle-half-2"}:f==="Paid"?{variant:"success",icon:"tabler-circle-check"}:f==="Downloaded"?{variant:"info",icon:"tabler-download"}:f==="Draft"?{variant:"secondary",icon:"tabler-device-floppy"}:f==="Sent"?{variant:"primary",icon:"tabler-mail"}:f==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},b=M(()=>f=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:f}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),n=async f=>{await ge(`/apps/invoice/${f}`,{method:"DELETE"}),$()};return(f,v)=>{const w=Z,J=W,le=oe("RouterLink"),te=oe("IconBtn"),re=ve;return a(S)?(A(),O(z,{key:0,id:"invoice-list"},{default:l(()=>[e(j,{class:"d-flex align-center flex-wrap gap-3"},{default:l(()=>[e(C,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"},class:"me-3"},{default:l(()=>v[7]||(v[7]=[k(" Create invoice ")])),_:1}),e(w,{modelValue:a(_),"onUpdate:modelValue":v[0]||(v[0]=s=>T(_)?_.value=s:null),items:[5,10,20,25,50],style:{"max-inline-size":"6.25rem"}},null,8,["modelValue"]),e(ye),x("div",Oe,[x("div",Be,[e(J,{modelValue:a(d),"onUpdate:modelValue":v[1]||(v[1]=s=>T(d)?d.value=s:null),placeholder:"Search Invoice",density:"compact",class:"me-3"},null,8,["modelValue"])]),x("div",Fe,[e(w,{modelValue:a(p),"onUpdate:modelValue":v[2]||(v[2]=s=>T(p)?p.value=s:null),density:"compact",placeholder:"Select Status",clearable:"","clear-icon":"tabler-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"],style:{"inline-size":"12rem"}},null,8,["modelValue"])])])]),_:1}),e(L),e(a(_e),{modelValue:a(U),"onUpdate:modelValue":v[4]||(v[4]=s=>T(U)?U.value=s:null),"items-per-page":a(_),"onUpdate:itemsPerPage":v[5]||(v[5]=s=>T(_)?_.value=s:null),page:a(o),"onUpdate:page":v[6]||(v[6]=s=>T(o)?o.value=s:null),"show-select":"","items-length":a(t),headers:P,items:a(S),class:"text-no-wrap","onUpdate:options":g},{"column.trending":l(()=>[e(F,{size:"22",icon:"tabler-trending-up"})]),"item.id":l(({item:s})=>[e(le,{to:{name:"apps-invoice-preview-id",params:{id:s.id}}},{default:l(()=>[k(" #"+h(s.id),1)]),_:2},1032,["to"])]),"item.trending":l(({item:s})=>[e(Se,null,{activator:l(({props:ae})=>[e(Q,Y({size:30},ae,{color:V(s.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e(F,{size:20,icon:V(s.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[x("p",Me,h(s.invoiceStatus),1),x("p",je," Balance: "+h(s.balance),1),x("p",Je," Due date: "+h(s.dueDate),1)]),_:2},1024)]),"item.client":l(({item:s})=>[x("div",Re,[e(Q,{size:"38",color:s.avatar.length?void 0:V(s.invoiceStatus).variant,variant:s.avatar.length?void 0:"tonal",class:"me-3"},{default:l(()=>[s.avatar.length?(A(),O(xe,{key:0,src:s.avatar},null,8,["src"])):(A(),E("span",Le,h(("avatarText"in f?f.avatarText:a(fe))(s.client.name)),1))]),_:2},1032,["color","variant"]),x("div",Ee,[e(le,{class:"font-weight-medium mb-0 text-link",to:{name:"pages-user-profile-tab",params:{tab:"profile"}}},{default:l(()=>[k(h(s.client.name),1)]),_:2},1024),x("span",ze,h(s.client.companyEmail),1)])])]),"item.total":l(({item:s})=>[k(" $"+h(s.total),1)]),"item.date":l(({item:s})=>[k(h(s.issuedDate),1)]),"item.balance":l(({item:s})=>[typeof c(s.balance,s.total).status=="string"?(A(),O(De,{key:0,color:c(s.balance,s.total).chip.color,size:"small",label:""},{default:l(()=>[k(h(c(s.balance,s.total).status),1)]),_:2},1032,["color"])):(A(),E("span",Ge,h(Number(c(s.balance,s.total).status)>0?`$${c(s.balance,s.total).status}`:`-$${Math.abs(Number(c(s.balance,s.total).status))}`),1))]),"item.actions":l(({item:s})=>[e(te,{onClick:ae=>n(s.id)},{default:l(()=>[e(F,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(te,{to:{name:"apps-invoice-preview-id",params:{id:s.id}}},{default:l(()=>[e(F,{icon:"tabler-eye"})]),_:2},1032,["to"]),e(re,{"menu-list":a(b)(s.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:l(()=>[e(L),x("div",He,[x("p",Ke,h(a(Ve)({page:a(o),itemsPerPage:a(_)},a(t))),1),e(Ue,{modelValue:a(o),"onUpdate:modelValue":v[3]||(v[3]=s=>T(o)?o.value=s:null),length:Math.ceil(a(t)/a(_)),"total-visible":f.$vuetify.display.xs?1:Math.ceil(a(t)/a(_))},{prev:l(s=>[e(C,Y({variant:"tonal",color:"default"},s,{icon:!1}),{default:l(()=>v[8]||(v[8]=[k(" Previous ")])),_:2},1040)]),next:l(s=>[e(C,Y({variant:"tonal",color:"default"},s,{icon:!1}),{default:l(()=>v[9]||(v[9]=[k(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["modelValue","items-per-page","page","items-length","items"]),e(L)]),_:1})):K("",!0)}}};const Ye={__name:"AccountSettingsParents",props:{student:Object},emits:["userData"],setup(I,{emit:D}){const N=D,d=y({}),p=y();X(()=>I.student,o=>{o&&(d.value=JSON.parse(JSON.stringify(o)))},{immediate:!0}),y(),y(!1);const U=()=>{d.value=JSON.parse(JSON.stringify(I.student))},_=()=>{var o;(o=p.value)==null||o.validate().then(({valid:i})=>{i&&(console.log("SUBMIT PAYLOAD",d.value),N("userData",{...d.value}))})};return(o,i)=>{const m=W,g=ce,P=Z;return A(),O(B,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(z,{title:"Parents Data"},{default:l(()=>[e(j,null,{default:l(()=>[e(ee,{ref_key:"refForm",ref:p,onSubmit:H(_,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(u,{md:"4",cols:"12"},{default:l(()=>[e(m,{modelValue:a(d).father,"onUpdate:modelValue":i[0]||(i[0]=r=>a(d).father=r),placeholder:"John Doe",label:"Father Name"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(g,{modelValue:a(d).father_birth,"onUpdate:modelValue":i[1]||(i[1]=r=>a(d).father_birth=r),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(P,{modelValue:a(d).father_note,"onUpdate:modelValue":i[2]||(i[2]=r=>a(d).father_note=r),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(m,{modelValue:a(d).mother,"onUpdate:modelValue":i[3]||(i[3]=r=>a(d).mother=r),placeholder:"Maemunah",label:"Mother Name"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(g,{modelValue:a(d).mother_birth,"onUpdate:modelValue":i[4]||(i[4]=r=>a(d).mother_birth=r),placeholder:"1980-01-01",label:"Birth Date"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(P,{modelValue:a(d).mother_note,"onUpdate:modelValue":i[5]||(i[5]=r=>a(d).mother_note=r),label:"Note",items:["Masih ada","Meninggal","Cerai","Lainnya"],placeholder:"Select Note"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(m,{modelValue:a(d).phone,"onUpdate:modelValue":i[6]||(i[6]=r=>a(d).phone=r),placeholder:"+62 888 1234 5678",label:"Phone Number"},null,8,["modelValue"])]),_:1}),e(u,{md:"4",cols:"12"},{default:l(()=>[e(m,{modelValue:a(d).job,"onUpdate:modelValue":i[7]||(i[7]=r=>a(d).job=r),placeholder:"Software Engineer",label:"Job Title"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(P,{modelValue:a(d).income,"onUpdate:modelValue":i[8]||(i[8]=r=>a(d).income=r),label:"Income",items:["< 5 juta","5 - 10 juta","10 - 20 juta","20 juta >"],placeholder:"Select Income"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:l(()=>[e(C,{type:"submit"},{default:l(()=>i[9]||(i[9]=[k(" Save changes ")])),_:1}),e(C,{type:"reset",color:"secondary",variant:"tonal",onClick:U},{default:l(()=>i[10]||(i[10]=[k(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(We)]),_:1})]),_:1})}}},lt={__name:"[tab]",setup(I){const D=q("userData").value,N=de(),d=M({get:()=>N.params.tab,set:()=>N.params.tab}),p=M(()=>N.params.id),U=y(null),_=y(!1),o=y(null),i=q("userData"),m=M(()=>{var V;return p.value==((V=i.value)==null?void 0:V.admin_student_id)}),g=y(!1),P=y(""),r=y("primary"),$=(V,b="primary")=>{P.value=V,r.value=b,g.value=!0,setTimeout(()=>{g.value=!1},1e4)};me(async()=>{_.value=!0,o.value=null;try{const V=await G(`/public/student/${p.value}`);U.value=V.data.value.data??null,console.log("Student data:",U.value)}catch(V){o.value=V,console.error("Failed to fetch student:",V)}finally{_.value=!1}});const t=[{title:"Account",icon:"tabler-users",tab:"account"},{title:"Parents",icon:"tabler-file-text",tab:"parents"},{title:"Others data",icon:"tabler-link",tab:"others"},{title:"Security",icon:"tabler-lock",tab:"security"},{title:"Roles",icon:"tabler-bell",tab:"roles"}],c=async(V,b)=>{var v;const n=parseInt(V)===(D==null?void 0:D.admin_student_id),f=(D==null?void 0:D.role)>=4;if(!n&&!f){$("You are not authorized to update this student","error");return}console.log("Updating student:",V,b);try{const{data:w,response:J}=await G(`/students/${V}`,{method:"PATCH",body:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}});J.value.ok?($("Data berhasil diperbarui","success"),console.log("Student updated:",w)):($(J.value.statusText||"Gagal memperbarui data","error"),console.error("Update error response:",J.value))}catch(w){console.error("Update student error:",((v=w==null?void 0:w.data)==null?void 0:v.errors)||w),$(w.message||"Gagal memperbarui data","error")}};return(V,b)=>(A(),E("div",null,[e(we,{modelValue:a(d),"onUpdate:modelValue":b[0]||(b[0]=n=>T(d)?d.value=n:null),class:"v-tabs-pill"},{default:l(()=>[(A(),E(se,null,pe(t,n=>e(Pe,{key:n.icon,value:n.tab,to:{name:"profile-student-id-tab",params:{tab:n.tab}}},{default:l(()=>[e(F,{size:"20",start:"",icon:n.icon},null,8,["icon"]),k(" "+h(n.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"]),e(Ae,{modelValue:a(g),"onUpdate:modelValue":b[2]||(b[2]=n=>T(g)?g.value=n:null),location:"center",variant:"tonal",transition:"scale-transition",color:a(r),class:"text-center"},{actions:l(()=>[e(C,{color:a(r),onClick:b[1]||(b[1]=n=>g.value=!1)},{default:l(()=>b[7]||(b[7]=[k(" Close ")])),_:1},8,["color"])]),default:l(()=>[k(h(a(P))+" ",1)]),_:1},8,["modelValue","color"]),e(Ne,{modelValue:a(d),"onUpdate:modelValue":b[6]||(b[6]=n=>T(d)?d.value=n:null),class:"mt-6 disable-tab-transition",touch:!1},{default:l(()=>[e(R,{value:"account"},{default:l(()=>[e(Te,{student:a(U),onUserData:b[3]||(b[3]=n=>c(a(p),n))},null,8,["student"])]),_:1}),e(R,{value:"parents"},{default:l(()=>[e(Ye,{student:a(U),onUserData:b[4]||(b[4]=n=>c(a(p),n))},null,8,["student"])]),_:1}),e(R,{value:"others"},{default:l(()=>[e($e,{student:a(U),onUserData:b[5]||(b[5]=n=>c(a(p),n))},null,8,["student"])]),_:1}),e(R,{value:"security"},{default:l(()=>[a(m)?(A(),O(ke,{key:0})):K("",!0)]),_:1}),e(R,{value:"roles"},{default:l(()=>[a(m)?(A(),O(he,{key:0})):K("",!0)]),_:1})]),_:1},8,["modelValue"])]))}};export{lt as default};
