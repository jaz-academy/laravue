import{_ as j}from"./AppTextField-8792b8bb.js";import{bm as z,r as g,b5 as R,o as b,f as c,e as a,b as l,v as r,x as I,z as T,a$ as A,aj as p,n as B,d as f,a0 as D,j as F}from"./main-b871c247.js";import{u as M}from"./useApi-e86a5383.js";import{$ as O}from"./api-4f18cc3a.js";import{a as n,V as k}from"./VRow-6fcd1b0a.js";import{V as C}from"./VCard-b2c7daaa.js";import{V as E}from"./VDivider-adb1395f.js";import{V as v}from"./VCardText-de098736.js";import{V as G}from"./VAlert-c640a60b.js";import{V as L}from"./VForm-804f51cb.js";import{V as J}from"./VAvatar-8e3ed6ed.js";import"./form-7cc48b0d.js";import"./VTextField-51610683.js";/* empty css                   */import"./VCounter-4d3eaf5c.js";import"./VImg-8fc3d1b5.js";import"./VField-3696a4fc.js";import"./easing-9f15041e.js";import"./VInput-8e497f2d.js";import"./forwardRefs-8348545e.js";import"./index-42b50782.js";import"./index-9c720871.js";const H="/build/assets/no-photo-0cdf71ff.png",K={class:"d-flex flex-column justify-center gap-4"},q={class:"d-flex flex-wrap gap-2"},Q={__name:"AccountSettingsAccount",async setup(w){let u,V;const o=z({}),y=g(""),m=g(""),x=g(),{data:i,error:_}=([u,V]=R(()=>M("/schools")),u=await u,V(),u);_.value?console.log(_.value):i.value&&Object.assign(o,i.value.data[0]);const N=()=>{Object.assign(o,i.value.data[0])},P=s=>{const e=new FileReader,{files:d}=s.target;d&&d.length&&(e.readAsDataURL(d[0]),e.onload=()=>{typeof e.result=="string"&&(o.logo=e.result)})},S=()=>{o.logo=i.value.data[0].logo},$=async()=>{try{const s=await O(`/schools/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D("accessToken").value}`},body:JSON.stringify(o)});s&&(m.value=s.status,y.value=s.message)}catch(s){errorMessage.value="An error occurred while updating the profile",console.error(s)}};return(s,e)=>{const d=j;return b(),c(k,null,{default:a(()=>[l(n,{cols:"12"},{default:a(()=>[l(C,{title:"School Profile Details"},{default:a(()=>[l(E),l(v,null,{default:a(()=>[m.value?(b(),c(G,{key:0,type:m.value,dismissible:"",onClick:e[0]||(e[0]=t=>m.value="")},{default:a(()=>[r(I(y.value),1)]),_:1},8,["type"])):T("",!0)]),_:1}),l(v,null,{default:a(()=>[l(L,{onSubmit:A($,["prevent"])},{default:a(()=>[l(k,null,{default:a(()=>[l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.name=t),label:"Institution Name"},null,8,["modelValue"])]),_:1}),l(n,{cols:"6",md:"3"},{default:a(()=>[l(d,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=t=>o.nickname=t),label:"Initial"},null,8,["modelValue"])]),_:1}),l(n,{cols:"6",md:"3"},{default:a(()=>[l(d,{modelValue:o.npsn,"onUpdate:modelValue":e[3]||(e[3]=t=>o.npsn=t),label:"NPSN"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.organization,"onUpdate:modelValue":e[4]||(e[4]=t=>o.organization=t),label:"Organization"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.permit,"onUpdate:modelValue":e[5]||(e[5]=t=>o.permit=t),label:"Permit"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12"},{default:a(()=>[l(d,{modelValue:o.address,"onUpdate:modelValue":e[6]||(e[6]=t=>o.address=t),label:"Address"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.map,"onUpdate:modelValue":e[7]||(e[7]=t=>o.map=t),label:"Location"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.phone,"onUpdate:modelValue":e[8]||(e[8]=t=>o.phone=t),label:"Phone Number"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.email,"onUpdate:modelValue":e[9]||(e[9]=t=>o.email=t),label:"E-mail",type:"email"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.motto,"onUpdate:modelValue":e[10]||(e[10]=t=>o.motto=t),label:"Motto"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.period,"onUpdate:modelValue":e[11]||(e[11]=t=>o.period=t),label:"Period"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.head,"onUpdate:modelValue":e[12]||(e[12]=t=>o.head=t),label:"Head"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.contact,"onUpdate:modelValue":e[13]||(e[13]=t=>o.contact=t),label:"Contact"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:o.note,"onUpdate:modelValue":e[14]||(e[14]=t=>o.note=t),label:"Note"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[l(p,{type:"submit"},{default:a(()=>e[16]||(e[16]=[r(" Save changes ")])),_:1}),l(p,{color:"secondary",variant:"tonal",onClick:A(N,["prevent"])},{default:a(()=>e[17]||(e[17]=[r(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(n,{cols:"12"},{default:a(()=>[l(C,{title:"Logo"},{default:a(()=>[l(v,{class:"d-flex"},{default:a(()=>[l(J,{image:o.logo||B(H),rounded:"",size:"100",class:"me-6"},null,8,["image"]),f("form",K,[f("div",q,[l(p,{color:"primary",onClick:e[15]||(e[15]=t=>{var U;return(U=x.value)==null?void 0:U.click()})},{default:a(()=>e[18]||(e[18]=[r(" Upload ")])),_:1}),f("input",{ref_key:"refInputEl",ref:x,type:"file",accept:".jpeg,.png,.jpg,.gif",hidden:"",onInput:P},null,544),l(p,{type:"reset",color:"secondary",variant:"tonal",onClick:S},{default:a(()=>e[19]||(e[19]=[r(" Reset ")])),_:1})]),e[20]||(e[20]=f("p",null,"Allowed JPG, GIF or PNG. Max size of 800K",-1))])]),_:1})]),_:1})]),_:1})]),_:1})}}},be={__name:"index",setup(w){return F(),(u,V)=>(b(),c(Q))}};export{be as default};
