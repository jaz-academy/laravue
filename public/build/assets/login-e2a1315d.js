import{r as k,e as S}from"./validators-03fae5bb.js";import{r as u,j as $,k as F,a as P,o as x,f as _,e as o,b as a,d as l,n as t,I as h,v as i,x as C,z,a$ as U,aV as E,aj as L,a0 as b,aZ as G}from"./main-e40851b7.js";import{_ as J}from"./AppTextField-a9d65adc.js";import{u as R}from"./useGenerateImageVariant-99d63f92.js";import{a as O,b as W,c as Z,d as H}from"./auth-v2-login-illustration-light-8e098e97.js";import{a as K,b as Q}from"./misc-mask-light-a3cab517.js";import{V as X}from"./VNodeRenderer-b3a0c65a.js";import{u as Y}from"./useAbility-3ced6271.js";import{$ as ee}from"./api-e6efa3e7.js";import{V as I}from"./VImg-d0687b57.js";import{a as n,V as T}from"./VRow-f8693abc.js";import{V as ae}from"./VCard-c8ea4733.js";import{V as y}from"./VCardText-e11304cd.js";import{V as te}from"./VAlert-ed80c70a.js";import{V as oe}from"./VForm-4a2fa4d7.js";import{V as se}from"./VCheckbox-49b0f7b1.js";import{V as D}from"./VDivider-06554ebe.js";import"./helpers-2778edbe.js";import"./no-profile-4221a4a6.js";import"./form-c3e0076b.js";import"./VTextField-bbc7a2fc.js";/* empty css                   */import"./VCounter-f770fb79.js";import"./VField-a2644e25.js";import"./easing-9f15041e.js";import"./VInput-6eaa5e55.js";import"./forwardRefs-8348545e.js";import"./index-8c7cbe3e.js";import"./index-9c720871.js";import"./VAvatar-43d2e5c8.js";import"./VCheckboxBtn-d41b44e1.js";import"./VSelectionControl-6e4301a8.js";const re={class:"position-relative bg-background rounded-lg w-100 ma-8 me-0"},le={class:"d-flex align-center justify-center w-100 h-100"},ie={class:"text-h4 mb-1"},ne={class:"text-capitalize"},me={class:"d-flex align-center flex-wrap justify-space-between mt-1 mb-4"},Ee={__name:"login",setup(ue){const j=R(H,Z,W,O,!0),q=R(Q,K),p=u(!1),v=$(),B=F(),M=Y(),c=u({email:void 0,password:void 0}),f=u(""),w=u(),m=u({email:"",password:""}),g=u(!1),A=async()=>{try{const s=await ee("/auth/login",{method:"POST",body:{email:m.value.email,password:m.value.password},onResponseError({response:r}){c.value=r._data.errors,f.value=r._data.message||"Login failed"}}),{accessToken:e,userData:V,userAbilityRules:d}=s;b("userAbilityRules").value=d,M.update(d),b("userData").value=V,b("accessToken").value=e,await G(()=>{B.replace(v.query.to?String(v.query.to):"/login")})}catch(s){console.error(s)}},N=()=>{var s;(s=w.value)==null||s.validate().then(({valid:e})=>{e&&A()})};return(s,e)=>{const V=J,d=P("RouterLink");return x(),_(T,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:o(()=>[a(n,{lg:"8",class:"d-none d-lg-flex"},{default:o(()=>[l("div",re,[l("div",le,[a(I,{"max-width":"505",src:t(j),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),a(I,{src:t(q),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),a(n,{cols:"12",lg:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:o(()=>[a(ae,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[a(y,null,{default:o(()=>[a(t(X),{nodes:t(h).app.logo,class:"mb-6"},null,8,["nodes"]),l("h4",ie,[e[5]||(e[5]=i(" Welcome to ")),l("span",ne,C(t(h).app.title),1),e[6]||(e[6]=i("! 👋🏻 "))]),e[7]||(e[7]=l("p",{class:"mb-0"}," Jaz Academy Project Management System ",-1))]),_:1}),a(y,null,{default:o(()=>[t(f)?(x(),_(te,{key:0,type:"error",dismissible:"","onClick:close":e[0]||(e[0]=r=>f.value="")},{default:o(()=>[i(C(t(f)),1)]),_:1})):z("",!0)]),_:1}),a(y,null,{default:o(()=>[a(t(oe),{ref_key:"refVForm",ref:w,onSubmit:U(N,["prevent"])},{default:o(()=>[a(T,null,{default:o(()=>[a(n,{cols:"12"},{default:o(()=>[a(V,{modelValue:t(m).email,"onUpdate:modelValue":e[1]||(e[1]=r=>t(m).email=r),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in s?s.requiredValidator:t(k),"emailValidator"in s?s.emailValidator:t(S)],"error-messages":t(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12"},{default:o(()=>[a(V,{modelValue:t(m).password,"onUpdate:modelValue":e[2]||(e[2]=r=>t(m).password=r),label:"Password",placeholder:"············",rules:["requiredValidator"in s?s.requiredValidator:t(k)],type:t(p)?"text":"password","error-messages":t(c).password,"append-inner-icon":t(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[3]||(e[3]=r=>p.value=!t(p))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),l("div",me,[a(se,{modelValue:t(g),"onUpdate:modelValue":e[4]||(e[4]=r=>E(g)?g.value=r:null),label:"Remember me"},null,8,["modelValue"]),a(d,{class:"text-primary ms-2 mb-1 d-none",to:{name:"forgot-password"}},{default:o(()=>e[8]||(e[8]=[i(" Forgot Password? ")])),_:1})]),a(L,{block:"",type:"submit"},{default:o(()=>e[9]||(e[9]=[i(" Login ")])),_:1})]),_:1}),a(n,{cols:"12",class:"text-center"},{default:o(()=>[e[11]||(e[11]=l("span",null,"New member?",-1)),a(d,{class:"text-primary ms-2",to:{name:"register"}},{default:o(()=>e[10]||(e[10]=[i(" Create an account ")])),_:1})]),_:1}),a(n,{cols:"12",class:"d-flex align-center"},{default:o(()=>[a(D),e[12]||(e[12]=l("span",{class:"mx-4"},"or",-1)),a(D)]),_:1}),a(n,{cols:"12",class:"text-center"},{default:o(()=>[a(L,{color:"secondary",to:"/"},{default:o(()=>e[13]||(e[13]=[i(" Back to Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Ee as default};
