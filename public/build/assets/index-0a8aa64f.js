import{_ as R}from"./AppTextField-07b9446e.js";import{bc as j,r as g,b5 as z,o as c,f as b,e as t,b as l,v as r,x as I,z as T,a$ as A,ai as p,n as B,d as f,$ as D,j as F}from"./main-7a04a4cc.js";import{u as M}from"./useApi-c87e68ce.js";import{$ as L}from"./api-272becb3.js";import{V as d}from"./VCol-3541d7c7.js";import{V as k}from"./VCard-c1d86edf.js";import{V as O}from"./VDivider-cd55d271.js";import{V as v}from"./VCardText-89ccd074.js";import{V as E}from"./VAlert-5ede27f5.js";import{V as G}from"./VForm-eac8e6b7.js";import{V as C}from"./VRow-9ddfb65a.js";import{V as J}from"./VAvatar-a8f8d7de.js";import"./form-41eb478e.js";import"./VTextField-8b5d0ff7.js";/* empty css                   */import"./VCounter-9d080591.js";import"./VImg-785fe2da.js";import"./VField-eef30866.js";import"./easing-9f15041e.js";import"./VInput-5d1e9d15.js";import"./forwardRefs-8348545e.js";import"./index-d1c1b48d.js";import"./index-9c720871.js";const H=""+new URL("no-photo-0cdf71ff.png",import.meta.url).href,K={class:"d-flex flex-column justify-center gap-4"},q={class:"d-flex flex-wrap gap-2"},Q={__name:"AccountSettingsAccount",async setup(w){let u,V;const o=j({}),y=g(""),m=g(""),x=g(),{data:i,error:U}=([u,V]=z(()=>M("/schools")),u=await u,V(),u);U.value?console.log(U.value):i.value&&Object.assign(o,i.value.data[0]);const N=()=>{Object.assign(o,i.value.data[0])},P=s=>{const e=new FileReader,{files:n}=s.target;n&&n.length&&(e.readAsDataURL(n[0]),e.onload=()=>{typeof e.result=="string"&&(o.logo=e.result)})},$=()=>{o.logo=i.value.data[0].logo},S=async()=>{try{const s=await L(`/schools/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D("accessToken").value}`},body:JSON.stringify(o)});s&&(m.value=s.status,y.value=s.message)}catch(s){errorMessage.value="An error occurred while updating the profile",console.error(s)}};return(s,e)=>{const n=R;return c(),b(C,null,{default:t(()=>[l(d,{cols:"12"},{default:t(()=>[l(k,{title:"School Profile Details"},{default:t(()=>[l(O),l(v,null,{default:t(()=>[m.value?(c(),b(E,{key:0,type:m.value,dismissible:"",onClick:e[0]||(e[0]=a=>m.value="")},{default:t(()=>[r(I(y.value),1)]),_:1},8,["type"])):T("",!0)]),_:1}),l(v,null,{default:t(()=>[l(G,{onSubmit:A(S,["prevent"])},{default:t(()=>[l(C,null,{default:t(()=>[l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.name=a),label:"Institution Name"},null,8,["modelValue"])]),_:1}),l(d,{cols:"6",md:"3"},{default:t(()=>[l(n,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=a=>o.nickname=a),label:"Initial"},null,8,["modelValue"])]),_:1}),l(d,{cols:"6",md:"3"},{default:t(()=>[l(n,{modelValue:o.npsn,"onUpdate:modelValue":e[3]||(e[3]=a=>o.npsn=a),label:"NPSN"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.organization,"onUpdate:modelValue":e[4]||(e[4]=a=>o.organization=a),label:"Organization"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.permit,"onUpdate:modelValue":e[5]||(e[5]=a=>o.permit=a),label:"Permit"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(n,{modelValue:o.address,"onUpdate:modelValue":e[6]||(e[6]=a=>o.address=a),label:"Address"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.map,"onUpdate:modelValue":e[7]||(e[7]=a=>o.map=a),label:"Location"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.phone,"onUpdate:modelValue":e[8]||(e[8]=a=>o.phone=a),label:"Phone Number"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.email,"onUpdate:modelValue":e[9]||(e[9]=a=>o.email=a),label:"E-mail",type:"email"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.motto,"onUpdate:modelValue":e[10]||(e[10]=a=>o.motto=a),label:"Motto"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.period,"onUpdate:modelValue":e[11]||(e[11]=a=>o.period=a),label:"Period"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.head,"onUpdate:modelValue":e[12]||(e[12]=a=>o.head=a),label:"Head"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.contact,"onUpdate:modelValue":e[13]||(e[13]=a=>o.contact=a),label:"Contact"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:t(()=>[l(n,{modelValue:o.note,"onUpdate:modelValue":e[14]||(e[14]=a=>o.note=a),label:"Note"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[l(p,{type:"submit"},{default:t(()=>e[16]||(e[16]=[r(" Save changes ")])),_:1}),l(p,{color:"secondary",variant:"tonal",onClick:A(N,["prevent"])},{default:t(()=>e[17]||(e[17]=[r(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(k,{title:"Logo"},{default:t(()=>[l(v,{class:"d-flex"},{default:t(()=>[l(J,{image:o.logo||B(H),rounded:"",size:"100",class:"me-6"},null,8,["image"]),f("form",K,[f("div",q,[l(p,{color:"primary",onClick:e[15]||(e[15]=a=>{var _;return(_=x.value)==null?void 0:_.click()})},{default:t(()=>e[18]||(e[18]=[r(" Upload ")])),_:1}),f("input",{ref_key:"refInputEl",ref:x,type:"file",accept:".jpeg,.png,.jpg,.gif",hidden:"",onInput:P},null,544),l(p,{type:"reset",color:"secondary",variant:"tonal",onClick:$},{default:t(()=>e[19]||(e[19]=[r(" Reset ")])),_:1})]),e[20]||(e[20]=f("p",null,"Allowed JPG, GIF or PNG. Max size of 800K",-1))])]),_:1})]),_:1})]),_:1})]),_:1})}}},be={__name:"index",setup(w){return F(),(u,V)=>(c(),b(Q))}};export{be as default};
