import{a as te}from"./formatters-5379081e.js";import{_ as ae}from"./MoreBtn-5db0e7a3.js";import{_ as le}from"./AppTextField-0858edf6.js";import{_ as oe}from"./AppDateTimePicker-b3e2c668.js";import{_ as ne}from"./AppSelect-3c67992b.js";import{p as ie}from"./paginationMeta-4ad053a4.js";import{u as se}from"./useApi-93131946.js";import{c as re}from"./createUrl-a4b7e7cf.js";import{$ as ce}from"./api-d97a1aea.js";import{V as w,b as de}from"./VCard-211b1d9e.js";import{V as S}from"./VCardText-e7df9280.js";import{V as q,a as $}from"./VRow-e41a8b34.js";import{V as U}from"./VAvatar-a7deecfc.js";import{r as d,a5 as D,b5 as ue,a as O,n,o as u,c as y,b as t,e as a,F as Q,i as pe,d as i,x as s,a0 as V,f as B,z as me,aU as m,ai as C,v as p,s as T}from"./main-2ca02b3b.js";import{V as ve}from"./VSpacer-a2f5af06.js";import{V as A}from"./VDivider-cc04d089.js";import{V as fe}from"./VDataTableServer-ca75f676.js";import{V as _e}from"./VTooltip-179d248a.js";import{V as be}from"./VImg-250183fa.js";import{V as ye}from"./VChip-c9cdb45a.js";import{V as ge}from"./VPagination-6a86b781.js";import"./helpers-e472473c.js";import"./no-profile-4221a4a6.js";import"./VMenu-d28590c8.js";import"./VOverlay-160906ea.js";import"./easing-9f15041e.js";import"./lazy-cceeae2e.js";import"./scopeId-34d005c1.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-a25a31df.js";import"./VList-c776ab47.js";import"./ssrBoot-29b51df8.js";import"./form-333814a1.js";import"./VTextField-0a864af4.js";/* empty css                   */import"./VCounter-973a6cc1.js";import"./VField-b433e507.js";import"./VInput-9aa25b78.js";import"./VSelect-bc7d8ac3.js";import"./VCheckboxBtn-f6f4a00f.js";import"./VSelectionControl-c0f025b5.js";import"./index-9c720871.js";import"./index-4e4fc132.js";import"./VDataTable-d76a7d42.js";import"./VTable-39b9e9e1.js";import"./filter-7e913ce0.js";const Ve={key:0},xe={class:"d-flex justify-space-between"},he={class:"d-flex flex-column gap-y-1"},ke={class:"text-h4 text-high-emphasis"},we={class:"text-body-1 text-capitalize"},De={class:"me-3 d-flex gap-3 align-center"},Pe={class:"d-flex align-center flex-wrap gap-4"},Ie={class:"invoice-list-filter"},Se={class:"invoice-list-filter"},$e={class:"mb-0"},Ue={class:"mb-0"},Be={class:"mb-0"},Ce={class:"d-flex align-center"},Te={key:1},Ae={class:"d-flex flex-column"},ze={class:"text-sm text-disabled"},Ne={key:1,class:"text-base"},Re={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Ee={class:"text-sm text-disabled mb-0"},Me={key:1},Tt={__name:"index",async setup(Fe){let x,z;const h=d(""),g=d(""),v=d(null),P=d([]),r=d(10),c=d(1),N=d(),R=d(),G=o=>{var l,_;c.value=o.page,N.value=(l=o.sortBy[0])==null?void 0:l.key,R.value=(_=o.sortBy[0])==null?void 0:_.order},E=d([{title:"Clients",value:24,icon:"tabler-user"},{title:"Invoices",value:165,icon:"tabler-file-invoice"},{title:"Paid",value:"$2.46k",icon:"tabler-checks"},{title:"Unpaid",value:"$876",icon:"tabler-currency-dollar-off"}]),H=[{title:"#ID",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Issued Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],J=D(()=>{const[o,l]=g.value?g.value.split("to"):"";return{start:o,end:l}}),{data:M,execute:K}=([x,z]=ue(()=>se(re("/apps/invoice",{query:{q:h,status:v,selectedDateRange:J,itemsPerPage:r,page:c,sortBy:N,orderBy:R}}))),x=await x,z(),x),F=D(()=>M.value.invoices),k=D(()=>M.value.totalInvoices),f=(o,l)=>o===l?{status:"Unpaid",chip:{color:"error"}}:o===0?{status:"Paid",chip:{color:"success"}}:{status:o,chip:{variant:"text"}},I=o=>o==="Partial Payment"?{variant:"success",icon:"tabler-circle-half-2"}:o==="Paid"?{variant:"warning",icon:"tabler-chart-pie"}:o==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:o==="Draft"?{variant:"primary",icon:"tabler-device-floppy"}:o==="Sent"?{variant:"secondary",icon:"tabler-circle-check"}:o==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},W=D(()=>o=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:o}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),X=async o=>{await ce(`/apps/invoice/${o}`,{method:"DELETE"}),K()};return(o,l)=>{const _=ne,Y=oe,Z=le,L=O("RouterLink"),j=O("IconBtn"),ee=ae;return n(F)?(u(),y("section",Ve,[t(w,{class:"mb-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(q,null,{default:a(()=>[(u(!0),y(Q,null,pe(n(E),(e,b)=>(u(),y(Q,{key:b},[t($,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:a(()=>[i("div",xe,[i("div",he,[i("h4",ke,s(e.value),1),i("div",we,s(e.title),1)]),t(U,{color:"rgba(var(--v-theme-on-background), var(--v-hover-opacity))",rounded:"",class:"text-high-emphasis",size:"38"},{default:a(()=>[t(V,{icon:e.icon,size:"26"},null,8,["icon"])]),_:2},1024)])]),_:2},1024),(o.$vuetify.display.mdAndUp?b!==n(E).length-1:o.$vuetify.display.smAndUp&&b%2===0)?(u(),B(A,{key:0,vertical:"",inset:""})):me("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),t(w,{title:"Filters",class:"mb-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(q,null,{default:a(()=>[t($,{cols:"12",md:"6"},{default:a(()=>[t(_,{modelValue:n(v),"onUpdate:modelValue":l[0]||(l[0]=e=>m(v)?v.value=e:null),label:"Select Status",placeholder:"Select Status",clearable:"","clear-icon":"tabler-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])]),_:1}),t($,{cols:"12",md:"6"},{default:a(()=>[t(Y,{modelValue:n(g),"onUpdate:modelValue":l[1]||(l[1]=e=>m(g)?g.value=e:null),label:"Invoice Date","clear-icon":"tabler-x",clearable:"",config:{mode:"range"},placeholder:"Select Date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{id:"invoice-list"},{default:a(()=>[t(S,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[i("div",De,[t(_,{"model-value":n(r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=parseInt(e,10))},null,8,["model-value"]),t(C,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:a(()=>l[9]||(l[9]=[p(" Create invoice ")])),_:1})]),t(ve),i("div",Pe,[i("div",Ie,[t(Z,{modelValue:n(h),"onUpdate:modelValue":l[3]||(l[3]=e=>m(h)?h.value=e:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),i("div",Se,[t(_,{modelValue:n(v),"onUpdate:modelValue":l[4]||(l[4]=e=>m(v)?v.value=e:null),placeholder:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),t(A),t(n(fe),{modelValue:n(P),"onUpdate:modelValue":l[6]||(l[6]=e=>m(P)?P.value=e:null),"items-per-page":n(r),"onUpdate:itemsPerPage":l[7]||(l[7]=e=>m(r)?r.value=e:null),page:n(c),"onUpdate:page":l[8]||(l[8]=e=>m(c)?c.value=e:null),"show-select":"","items-length":n(k),headers:H,items:n(F),class:"text-no-wrap","onUpdate:options":G},{"column.trending":a(()=>[t(V,{size:"22",icon:"tabler-trending-up"})]),"item.id":a(({item:e})=>[t(L,{to:{name:"financial-payment-preview-id",params:{id:e.id}}},{default:a(()=>[p(" #"+s(e.id),1)]),_:2},1032,["to"])]),"item.trending":a(({item:e})=>[t(_e,null,{activator:a(({props:b})=>[t(U,T({size:30},b,{color:I(e.invoiceStatus).variant,variant:"tonal"}),{default:a(()=>[t(V,{size:20,icon:I(e.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[i("p",$e,s(e.invoiceStatus),1),i("p",Ue," Balance: "+s(e.balance),1),i("p",Be," Due date: "+s(e.dueDate),1)]),_:2},1024)]),"item.client":a(({item:e})=>[i("div",Ce,[t(U,{size:"38",color:e.avatar.length?void 0:I(e.invoiceStatus).variant,variant:e.avatar.length?void 0:"tonal",class:"me-3"},{default:a(()=>[e.avatar.length?(u(),B(be,{key:0,src:e.avatar},null,8,["src"])):(u(),y("span",Te,s(("avatarText"in o?o.avatarText:n(te))(e.client.name)),1))]),_:2},1032,["color","variant"]),i("div",Ae,[t(L,{class:"text-link font-weight-medium"},{default:a(()=>[p(s(e.client.name),1)]),_:2},1024),i("span",ze,s(e.client.companyEmail),1)])])]),"item.total":a(({item:e})=>[p(" $"+s(e.total),1)]),"item.date":a(({item:e})=>[p(s(e.issuedDate),1)]),"item.balance":a(({item:e})=>[typeof f(e.balance,e.total).status=="string"?(u(),B(ye,{key:0,color:f(e.balance,e.total).chip.color,label:""},{default:a(()=>[p(s(f(e.balance,e.total).status),1)]),_:2},1032,["color"])):(u(),y("span",Ne,s(Number(f(e.balance,e.total).status)>0?`$${f(e.balance,e.total).status}`:`-$${Math.abs(Number(f(e.balance,e.total).status))}`),1))]),"item.actions":a(({item:e})=>[t(j,{onClick:b=>X(e.id)},{default:a(()=>[t(V,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(j,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[t(V,{icon:"tabler-eye"})]),_:2},1032,["to"]),t(ee,{"menu-list":n(W)(e.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:a(()=>[t(A),i("div",Re,[i("p",Ee,s(n(ie)({page:n(c),itemsPerPage:n(r)},n(k))),1),t(ge,{modelValue:n(c),"onUpdate:modelValue":l[5]||(l[5]=e=>m(c)?c.value=e:null),length:Math.ceil(n(k)/n(r)),"total-visible":o.$vuetify.display.xs?1:Math.ceil(n(k)/n(r))},{prev:a(e=>[t(C,T({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>l[10]||(l[10]=[p(" Previous ")])),_:2},1040)]),next:a(e=>[t(C,T({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>l[11]||(l[11]=[p(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["modelValue","items-per-page","page","items-length","items"])]),_:1})])):(u(),y("section",Me,[t(w,null,{default:a(()=>[t(de,null,{default:a(()=>l[12]||(l[12]=[p("No Invoice Found")])),_:1})]),_:1})]))}}};export{Tt as default};
