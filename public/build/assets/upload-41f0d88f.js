import{a as x}from"./formatters-f2ec2421.js";import{u as w,f as A,d as B}from"./fetchProjectData-798f9ee6.js";import{N as H,F as D}from"./front-page-navbar-72a26784.js";import{_ as E}from"./PostingCard-fb31e992.js";import{r as i,H as M,d7 as z,f9 as P,a as U,o,c as n,b as a,d as $,e as r,F as f,i as T,f as p,x as c,n as q,v,z as O}from"./main-e40851b7.js";import{a as N,V as R}from"./VRow-f8693abc.js";import{V as W}from"./VCard-c8ea4733.js";import{V as Y,b as G,c as J,a as K}from"./VList-deb9c324.js";import{V as Q}from"./VAvatar-43d2e5c8.js";import{V as X}from"./VImg-d0687b57.js";import{V as Z}from"./VDivider-06554ebe.js";import"./helpers-2778edbe.js";import"./no-profile-4221a4a6.js";import"./useApi-765b1997.js";import"./AppTextField-a9d65adc.js";import"./form-c3e0076b.js";import"./VTextField-bbc7a2fc.js";/* empty css                   */import"./VCounter-f770fb79.js";import"./VField-a2644e25.js";import"./easing-9f15041e.js";import"./VInput-6eaa5e55.js";import"./forwardRefs-8348545e.js";import"./VNodeRenderer-b3a0c65a.js";import"./useGenerateImageVariant-99d63f92.js";import"./VForm-4a2fa4d7.js";import"./VChip-f703cea5.js";import"./VContainer-3b9daa66.js";import"./NavbarThemeSwitcher-f29518e8.js";import"./VTooltip-75abf796.js";import"./VOverlay-c77512d0.js";import"./lazy-924c41e8.js";import"./scopeId-4e41f258.js";import"./VMenu-57cdd853.js";import"./dialog-transition-13233f06.js";import"./ssrBoot-282be025.js";import"./VNavigationDrawer-2d1d7a22.js";import"./VToolbar-af5c36cf.js";import"./VSpacer-b30a3d0b.js";import"./AppTextarea-340b184e.js";import"./AppSelect-1495259f.js";import"./VSelect-28fcf519.js";import"./VCheckboxBtn-d41b44e1.js";import"./VSelectionControl-6e4301a8.js";import"./GDriveEmbed-f721e8db.js";import"./InstagramEmbed-3dfd3444.js";import"./fetchTeacherData-86645937.js";import"./api-e6efa3e7.js";import"./index-8c7cbe3e.js";import"./index-9c720871.js";import"./VCardText-e11304cd.js";import"./VRating-c708759c.js";import"./VAlert-ed80c70a.js";const ee={class:"landing-page-wrapper"},te={class:"upload-card"},ae={key:1},rt={__name:"upload",setup(re){const m=i(null),_=i([]),u=i(!1),k=i(2);console.log("uploadTask:",w.value),M(async()=>{var t;await A(),m.value=(t=w.value)==null?void 0:t.data,m.value&&h(),window.addEventListener("scroll",L)});const L=async()=>{var d;const t=window.scrollY+window.innerHeight,s=document.documentElement.scrollHeight-10;if(t>=s&&!u.value){u.value=!0;const e=await B(k.value++);(d=e.data)!=null&&d.length&&(m.value.push(...e.data),h()),u.value=!1}};function h(){_.value=[{type:"subheader",title:"Best of the Week"},...m.value.filter(t=>t.rate>=4).flatMap(t=>{var s;return[{prependAvatar:z,title:((s=t.admin_student)==null?void 0:s.name)||"Unknown Student",subtitle:t.name||"No Task Name"},{type:"divider",inset:!0}]})]}const g=i(),S=i(),j=i(),C=i(),F=i(),I=i();return P([S,j,C,F,I],([{isIntersecting:t,target:s}])=>{t&&(g.value=s.id)},{threshold:.25}),(t,s)=>{const d=U("VSubheader");return o(),n("div",ee,[a(H,{"active-id":g.value},null,8,["active-id"]),$("div",te,[a(R,{class:"m-0 p-0"},{default:r(()=>[a(N,{class:"d-none d-lg-block",cols:"12",lg:"3"},{default:r(()=>[a(W,{style:{position:"sticky","inset-block-start":"6rem"}},{default:r(()=>[a(Y,{lines:"three"},{default:r(()=>[(o(!0),n(f,null,T(_.value,(e,l)=>(o(),n(f,{key:l},[e.prependAvatar?(o(),p(K,{key:0,class:"custom-list-item"},{prepend:r(()=>[a(Q,{size:"34",variant:"tonal",color:"primary",class:"me-3"},{default:r(()=>[t.avatar?(o(),p(X,{key:0,src:t.avatar},null,8,["src"])):(o(),n("span",ae,c(("avatarText"in t?t.avatarText:q(x))(e.title)),1))]),_:2},1024)]),default:r(()=>[a(G,null,{default:r(()=>[v(c(e.title),1)]),_:2},1024),a(J,null,{default:r(()=>[v(c(e.subtitle),1)]),_:2},1024)]),_:2},1024)):e.type==="divider"?(o(),p(Z,{key:`divider-${l}`,inset:""})):e.type==="subheader"?(o(),p(d,{key:2,class:"ps-3 mb-2 font-weight-medium text-primary"},{default:r(()=>[v(c(e.title),1)]),_:2},1024)):O("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),a(N,{cols:"12",lg:"9"},{default:r(()=>[(o(!0),n(f,null,T(m.value,e=>{var l,y,V,b;return o(),n("div",{key:e.id},[a(E,{"task-id":e.id,"task-name":e.name,description:e.description,subject:e.project_plan.subject,theme:e.project_plan.theme,stars:e.rate,media:e.media,"post-id":((y=(l=e.link)==null?void 0:l.match(/\/d\/(.*?)\//))==null?void 0:y[1])||"N/A","student-name":e.admin_student.name,nickname:e.admin_student.nickname,email:e.admin_student.email,teacher:e.admin_teacher?{id:e.admin_teacher.id,name:e.admin_teacher.nickname}:"Not Accepted","student-img":(V=e.admin_student)==null?void 0:V.image,"teacher-img":(b=e.admin_teacher)==null?void 0:b.image,accepted:e.accepted,review:(e==null?void 0:e.review)||null},null,8,["task-id","task-name","description","subject","theme","stars","media","post-id","student-name","nickname","email","teacher","student-img","teacher-img","accepted","review"])])}),128))]),_:1})]),_:1})]),a(D)])}}};export{rt as default};
